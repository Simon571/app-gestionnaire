"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7941],{50425:(e,t,r)=>{r.d(t,{PeopleProvider:()=>l,d:()=>d});var i=r(95155),n=r(12115);let o=[{number:1,title:"Connaissons-nous vraiment Dieu ?"},{number:2,title:"Survivrez-vous aux derniers jours ?"},{number:3,title:"Avan\xe7ons au rythme de l’organisation unie de J\xe9hovah"},{number:4,title:"Des preuves de l’existence de Dieu dans le monde qui nous entoure"},{number:5,title:"Une aide r\xe9elle pour la famille"},{number:6,title:"Le d\xe9luge et sa signification pour nous"},{number:7,title:"Imitons \xab le P\xe8re des tendres mis\xe9ricordes \xbb"},{number:8,title:"Vivons pour faire la volont\xe9 de Dieu, et non la n\xf4tre"},{number:9,title:"Soyons des auditeurs et des pratiquants de la Parole de Dieu"},{number:10,title:"Soyons honn\xeates en paroles et en actions"},{number:11,title:"Comme Christ, ne faisons pas partie du monde"},{number:12,title:"Notre conception de l’autorit\xe9 compte aux yeux de Dieu"},{number:13,title:"La pens\xe9e de Dieu sur le mariage et la sexualit\xe9"},{number:14,title:"Un peuple pur qui honore J\xe9hovah"},{number:15,title:"\xab Faisons du bien \xe0 tous \xbb"},{number:16,title:"Am\xe9liorons sans cesse nos relations avec Dieu"},{number:17,title:"Utilisons tout ce que nous avons pour glorifier Dieu"},{number:18,title:"Faites de J\xe9hovah votre forteresse"},{number:19,title:"Comment conna\xeetre votre avenir ?"},{number:20,title:"Le moment est-il venu pour Dieu de gouverner le monde ?"},{number:21,title:"Accordez de la valeur \xe0 votre place dans le Royaume"},{number:22,title:"Tirez-vous profit de ce que J\xe9hovah vous donne ?"},{number:23,title:"La vie a bien un but"},{number:24,title:"Avez-vous trouv\xe9 \xab une perle de grande valeur \xbb ?"},{number:25,title:"Luttons contre l’esprit du monde !"},{number:26,title:"Comptez-vous aux yeux de Dieu ?"},{number:27,title:"Comment prendre un bon d\xe9part dans le mariage"},{number:28,title:"Manifestez du respect et de l’amour dans le mariage"},{number:29,title:"Les responsabilit\xe9s et les joies d’\xeatre parents"},{number:30,title:"Comment am\xe9liorer la communication dans la famille"},{number:31,title:"\xcates-vous conscients de vos besoins spirituels ?"},{number:32,title:"Comment faire face aux inqui\xe9tudes de la vie"},{number:33,title:"Conna\xeetrons-nous un jour la justice v\xe9ritable ?"},{number:34,title:"Recevrons-nous la marque pour la survie ?"},{number:35,title:"La vie \xe9ternelle est-elle possible ? L’obtiendrez-vous ?"},{number:36,title:"N’y a-t-il rien de mieux que cette vie ?"},{number:37,title:"Les voies de Dieu sont-elles vraiment b\xe9n\xe9fiques ?"},{number:38,title:"Comment survivre \xe0 la fin du monde ?"},{number:39,title:"J\xe9sus Christ : sa victoire sur le monde. Comment et quand ?"},{number:40,title:"Que nous r\xe9serve l’avenir proche ?"},{number:41,title:"\xab Restez immobiles et voyez comment J\xe9hovah va agir pour vous sauver \xbb"},{number:42,title:"L’amour peut-il vaincre la haine ?"},{number:43,title:"Les exigences de Dieu sont toujours pour notre bien"},{number:44,title:"Comment les enseignements de J\xe9sus peuvent-ils vous apporter des bienfaits ?"},{number:45,title:"Suivons le chemin qui m\xe8ne \xe0 la vie"},{number:46,title:"Gardons une confiance ferme jusqu’\xe0 la fin"},{number:47,title:"(Ne pas utiliser)"},{number:48,title:"Restons fid\xe8les face aux \xe9preuves"},{number:49,title:"Vivrons-nous un jour sur une terre purifi\xe9e ?"},{number:50,title:"Comment prendre de bonnes d\xe9cisions"},{number:51,title:"La Bible transforme-t-elle votre vie ?"},{number:52,title:"Qui est votre Dieu ?"},{number:53,title:"Voyez-vous les choses comme J\xe9hovah ?"},{number:54,title:"B\xe2tissez votre foi en Dieu et dans ses promesses"},{number:55,title:"Comment se faire une bonne r\xe9putation aux yeux de Dieu ?"},{number:56,title:"En quel dirigeant pouvez-vous avoir confiance ?"},{number:57,title:"Comment endurer la pers\xe9cution"},{number:58,title:"Qui sont les vrais disciples de Christ ?"},{number:59,title:"(Ne pas utiliser)"},{number:60,title:"Quel est votre but dans la vie ?"},{number:61,title:"En quelles promesses avez-vous confiance ?"},{number:62,title:"O\xf9 pouvez-vous trouver le v\xe9ritable espoir ?"},{number:63,title:"Avez-vous l’esprit d’\xe9vang\xe9lisation ?"},{number:64,title:"Voulez-vous \xeatre ‘ami des plaisirs’ ou ‘ami de Dieu’ ?"},{number:65,title:"Favorisons la paix dans un monde en col\xe8re"},{number:66,title:"Serez-vous un ouvrier pour la moisson ?"},{number:67,title:"M\xe9ditons sur la Parole de J\xe9hovah et sur sa cr\xe9ation"},{number:68,title:"\xab Continuez \xe0 vous pardonner volontiers les uns aux autres \xbb"},{number:69,title:"Pourquoi manifester un amour plein d’abn\xe9gation ?"},{number:70,title:"Pourquoi vous pouvez avoir confiance en Dieu"},{number:71,title:"\xab Rester \xe9veill\xe9 \xbb : Pourquoi et comment"},{number:72,title:"L’amour permet de reconna\xeetre les vrais chr\xe9tiens"},{number:73,title:"Acqu\xe9rons \xab un cœur sage \xbb"},{number:74,title:"Les yeux de J\xe9hovah sont sur chacun de nous"},{number:75,title:"Soutenez la souverainet\xe9 de J\xe9hovah dans votre vie"},{number:76,title:"Quelle est l’utilit\xe9 des principes de la Bible aujourd’hui ?"},{number:77,title:"\xab Faisons toujours preuve d’hospitalit\xe9 \xbb"},{number:78,title:"Servez J\xe9hovah d’un cœur joyeux"},{number:79,title:"De qui voulez-vous \xeatre l’ami ?"},{number:80,title:"Fondez-vous votre esp\xe9rance sur la science ou sur la Bible ?"},{number:81,title:"Qui est qualifi\xe9 pour faire des disciples ?"},{number:82,title:"(Ne pas utiliser)"},{number:83,title:"Les chr\xe9tiens doivent-ils ob\xe9ir aux Dix Commandements ?"},{number:84,title:"Partagerons-nous le sort du monde ?"},{number:85,title:"Une bonne nouvelle dans un monde de violence"},{number:86,title:"Des pri\xe8res que Dieu entend"},{number:87,title:"Quelles relations entretenons-nous avec Dieu ?"},{number:88,title:"Pourquoi vivre en accord avec les normes de la Bible ?"},{number:89,title:"Venez, vous qui avez soif de v\xe9rit\xe9 !"},{number:90,title:"La vraie vie est \xe0 votre port\xe9e !"},{number:91,title:"Le messie : sa pr\xe9sence et son r\xe8gne"},{number:92,title:"Le r\xf4le de la religion dans les affaires du monde"},{number:93,title:"Les catastrophes naturelles : Quand prendront-elles fin ?"},{number:94,title:"La vraie religion comble les besoins de la soci\xe9t\xe9 humaine"},{number:95,title:"Ne nous laissons pas tromper par le spiritisme"},{number:96,title:"Quel est l’avenir de la religion ?"},{number:97,title:"Demeurons irr\xe9prochables au milieu d’une g\xe9n\xe9ration tortueuse"},{number:98,title:"\xab La sc\xe8ne de ce monde est en train de changer \xbb"},{number:99,title:"Pourquoi faire confiance \xe0 la Bible"},{number:100,title:"Comment nouer des amiti\xe9s solides et durables"},{number:101,title:"J\xe9hovah : le \xab Grand Cr\xe9ateur \xbb"},{number:102,title:"Pr\xeatons attention \xe0 \xab la parole proph\xe9tique \xbb"},{number:103,title:"Comment trouver la vraie joie ?"},{number:104,title:"Parents, b\xe2tissez-vous avec des mat\xe9riaux \xe0 l’\xe9preuve du feu ?"},{number:105,title:"Trouvons la consolation dans toutes nos tribulations"},{number:106,title:"Ceux qui ruinent la terre subiront le ch\xe2timent de Dieu"},{number:107,title:"R\xe9coltons les bienfaits d’une conscience bien \xe9duqu\xe9e"},{number:108,title:"Vous pouvez regarder l’avenir avec optimisme !"},{number:109,title:"Le Royaume de Dieu est proche"},{number:110,title:"Une vie de famille heureuse : en accordant la premi\xe8re place \xe0 Dieu"},{number:111,title:"La gu\xe9rison compl\xe8te de l’humanit\xe9 : est-ce possible ?"},{number:112,title:"(Ne pas utiliser)"},{number:113,title:"Comment les jeunes peuvent-ils r\xe9ussir leur vie et \xeatre heureux ?"},{number:114,title:"Appr\xe9cions les merveilles de la cr\xe9ation de Dieu"},{number:115,title:"Comment se prot\xe9ger des ruses de Satan"},{number:116,title:"Faisons preuve de sagesse dans le choix de nos fr\xe9quentations"},{number:117,title:"Comment vaincre le mal par le bien"},{number:118,title:"Ayons la pens\xe9e de J\xe9hovah sur les jeunes"},{number:119,title:"Les chr\xe9tiens se tiennent s\xe9par\xe9s du monde : pourquoi est-ce b\xe9n\xe9fique ?"},{number:120,title:"Pourquoi se soumettre d\xe8s maintenant \xe0 la domination de Dieu"},{number:121,title:"Une communaut\xe9 mondiale de fr\xe8res sauv\xe9e du malheur"},{number:122,title:"(Ne pas utiliser)"},{number:123,title:"(Ne pas utiliser)"},{number:124,title:"Raisons de croire que Dieu est l’auteur de la Bible"},{number:125,title:"Pourquoi l’humanit\xe9 a-t-elle besoin d’une ran\xe7on ?"},{number:126,title:"Qui sera sauv\xe9 ?"},{number:127,title:"Que se passe-t-il quand on meurt ?"},{number:128,title:"L’enfer est-il r\xe9ellement un lieu de flammes et de tourments ?"},{number:129,title:"La Bible enseigne-t-elle la Trinit\xe9 ?"},{number:130,title:"La terre subsistera pour toujours"},{number:131,title:"(Ne pas utiliser)"},{number:132,title:"Bient\xf4t la victoire sur la mort !"},{number:133,title:"L’origine de l’homme : pourquoi vous y int\xe9resser"},{number:134,title:"Les chr\xe9tiens doivent-ils observer le sabbat ?"},{number:135,title:"Le caract\xe8re sacr\xe9 de la vie et du sang"},{number:136,title:"Dieu approuve-t-il l’utilisation d’images dans le culte ?"},{number:137,title:"Les miracles de la Bible ont-ils vraiment eu lieu ?"},{number:138,title:"Vivons avec bon sens au sein d’un monde d\xe9prav\xe9"},{number:139,title:"La sagesse divine dans un monde \xe9pris de science"},{number:140,title:"\xab J\xe9sus Christ : qui est-il vraiment ? \xbb"},{number:141,title:"L’humanit\xe9 g\xe9mit : jusqu’\xe0 quand ?"},{number:142,title:"Pourquoi se r\xe9fugier en J\xe9hovah"},{number:143,title:"Ayez confiance dans le Dieu de toute consolation"},{number:144,title:"Une congr\xe9gation fid\xe8le sous la direction de Christ"},{number:145,title:"Qui est comme J\xe9hovah notre Dieu ?"},{number:146,title:"Utilisons l’instruction pour louer J\xe9hovah"},{number:147,title:"Ayons confiance dans le pouvoir de sauver de J\xe9hovah"},{number:148,title:"Avez-vous la pens\xe9e de Dieu sur la vie ?"},{number:149,title:"Marchez-vous avec Dieu ?"},{number:150,title:"Le monde est-il condamn\xe9 \xe0 dispara\xeetre ?"},{number:151,title:"J\xe9hovah est \xab une hauteur s\xfbre \xbb pour son peuple"},{number:152,title:"La bataille d’Harmagu\xe9don : pourquoi et quand ?"},{number:153,title:"Gardez constamment \xe0 l’esprit le \xab jour redoutable \xbb"},{number:154,title:"La domination humaine : l’heure du bilan"},{number:155,title:"L’heure du jugement de Babylone est-elle arriv\xe9e ?"},{number:156,title:"Le jour du jugement : un jour de terreur ou d’espoir ?"},{number:157,title:"Les vrais chr\xe9tiens parent l’enseignement divin"},{number:158,title:"Soyez courageux et mettez votre confiance en J\xe9hovah"},{number:159,title:"Comment trouver la s\xe9curit\xe9 dans un monde dangereux"},{number:160,title:"Pr\xe9servez votre identit\xe9 chr\xe9tienne !"},{number:161,title:"Pourquoi J\xe9sus a-t-il souffert ? Pourquoi est-il mort ?"},{number:162,title:"D\xe9livr\xe9s d’un monde de t\xe9n\xe8bres"},{number:163,title:"Pourquoi craindre le vrai Dieu ?"},{number:164,title:"Dieu est-il toujours le souverain de la terre ?"},{number:165,title:"\xc0 quelles valeurs \xeates-vous attach\xe9 ?"},{number:166,title:"La vraie foi : qu’est-ce que c’est, et comment la manifester ?"},{number:167,title:"Agissons sagement dans un monde insens\xe9"},{number:168,title:"En s\xe9curit\xe9 dans un monde agit\xe9"},{number:169,title:"Pourquoi se laisser guider par la Bible ?"},{number:170,title:"Qui est qualifi\xe9 pour diriger l’humanit\xe9 ?"},{number:171,title:"Vivez dans la paix d\xe8s \xe0 pr\xe9sent et pour l’\xe9ternit\xe9 !"},{number:172,title:"Quelle r\xe9putation avez-vous aupr\xe8s de Dieu ?"},{number:173,title:"Dieu approuve-t-il une religion en particulier ?"},{number:174,title:"Le monde nouveau promis par Dieu : qui y sera admis ?"},{number:175,title:"La Bible : un livre digne de foi"},{number:176,title:"La paix et la s\xe9curit\xe9 v\xe9ritables — Quand ?"},{number:177,title:"O\xf9 trouver de l’aide dans les temps de d\xe9tresse ?"},{number:178,title:"Marchez dans la voie de l’int\xe9grit\xe9"},{number:179,title:"Rejetez les illusions du monde, poursuivez les r\xe9alit\xe9s du Royaume"},{number:180,title:"Pourquoi croire en la r\xe9surrection ?"},{number:181,title:"Est-il plus tard que vous ne le pensez ?"},{number:182,title:"Ce que le Royaume de Dieu fait pour nous d\xe8s maintenant"},{number:183,title:"D\xe9tournons les yeux de ce qui ne vaut rien !"},{number:184,title:"La mort est-elle la fin de tout ?"},{number:185,title:"La v\xe9rit\xe9 influence-t-elle votre vie ?"},{number:186,title:"Unissez-vous au peuple heureux de Dieu"},{number:187,title:"Pourquoi un Dieu d’amour permet-il la m\xe9chancet\xe9 ?"},{number:188,title:"Placez-vous votre confiance en J\xe9hovah ?"},{number:189,title:"Marcher avec Dieu procure des bienfaits, maintenant et pour toujours"},{number:190,title:"La promesse d’un bonheur familial parfait"},{number:191,title:"Comment l’amour et la foi peuvent vaincre le monde"},{number:192,title:"Marchez-vous sur la route qui m\xe8ne \xe0 la vie \xe9ternelle ?"},{number:193,title:"D\xe9livr\xe9s de la d\xe9tresse"},{number:194,title:"Les bienfaits de la sagesse qui vient de Dieu"}],a=(0,n.createContext)({people:[],isLoaded:!1,addPerson:()=>{throw Error("PeopleProvider not found")},updatePerson:()=>{throw Error("PeopleProvider not found")},deletePerson:()=>{throw Error("PeopleProvider not found")},replacePeople:()=>{throw Error("PeopleProvider not found")},families:[],addFamily:()=>{throw Error("PeopleProvider not found")},updateFamily:()=>{throw Error("PeopleProvider not found")},deleteFamily:()=>{throw Error("PeopleProvider not found")},preachingGroups:[],addPreachingGroup:()=>{throw Error("PeopleProvider not found")},updatePreachingGroup:()=>{throw Error("PeopleProvider not found")},deletePreachingGroup:()=>{throw Error("PeopleProvider not found")},discourseList:[],updateDiscourseList:()=>{throw Error("PeopleProvider not found")},devices:[],replaceDevices:()=>{throw Error("PeopleProvider not found")}}),u=[{personId:"669429",deviceId:"DEV-001",personName:"Jacob BEYA",deviceModel:"iPhone",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"274610",deviceId:"DEV-002",personName:"Bernard BUKASA",deviceModel:"TECNO MOBILE LIMITED TECNO BE7",appVersion:"3.7.12",expirationDate:"2025/12/05",alert:!1},{personId:"927596",deviceId:"DEV-003",personName:"Nicha BUNSANGA",deviceModel:"TECNO TECNO KI5k",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"565985",deviceId:"DEV-004",personName:"Papy BUNSANGA",deviceModel:"Xiaomi 23053RN02A",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"125958",deviceId:"DEV-005",personName:"Augustine BWANGA",deviceModel:"samsung SM-A065F",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"985411",deviceId:"DEV-006",personName:"Isaac BWANGA",deviceModel:"iPhone",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"319114",deviceId:"DEV-007",personName:"Jess\xe9 BWANGA",deviceModel:"TECNO MOBILE LIMITED TECNO KC8",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"363288",deviceId:"DEV-008",personName:"Marie Jos\xe9 DIATEKILA",deviceModel:"TECNO TECNO CL6k",appVersion:"3.7.18",expirationDate:"2025/11/11",alert:!1},{personId:"372026",deviceId:"DEV-009",personName:"Micha\xebl DIATEKILA",deviceModel:"samsung SM-S911B",appVersion:"3.7.18",expirationDate:"2025/12/10",alert:!1},{personId:"594653",deviceId:"DEV-010",personName:"Zacharie DIATEKILA",deviceModel:"TECNO TECNO KJ5",appVersion:"3.7.18",expirationDate:"2025/12/10",alert:!1},{personId:"515553",deviceId:"DEV-011",personName:"Dieudonn\xe9 DIMBO",deviceModel:"TECNO MOBILE LIMITED TECNO KC8",appVersion:"3.7.15",expirationDate:"2025/12/05",alert:!1},{personId:"737800",deviceId:"DEV-012",personName:"Mireille DIMBO",deviceModel:"ITEL itel A662L",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"785074",deviceId:"DEV-013",personName:"Christophe EFAMBE",deviceModel:"samsung SM-S711B",appVersion:"3.7.18",expirationDate:"2025/12/05",alert:!1},{personId:"592898",deviceId:"DEV-014",personName:"Galina EFAMBE",deviceModel:"samsung SM-A137F",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"908065",deviceId:"DEV-015",personName:"Isabelle FATUMA",deviceModel:"iPhone",appVersion:"3.7.18",expirationDate:"2025/12/05",alert:!1},{personId:"267489",deviceId:"DEV-016",personName:"Claude ILANDA",deviceModel:"TECNO MOBILE LIMITED TECNO KF6i",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"596493",deviceId:"DEV-017",personName:"Rachel ILELE",deviceModel:"ITEL itel A662L",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"999289",deviceId:"DEV-018",personName:"Braslin ILUNGA",deviceModel:"samsung SM-A065F",appVersion:"3.7.18",expirationDate:"2025/12/10",alert:!1},{personId:"866929",deviceId:"DEV-019",personName:"God\xe9 ILUNGA",deviceModel:"TECNO MOBILE LIMITED TECNO KG6",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"427634",deviceId:"DEV-020",personName:"Didier INGINDIA",deviceModel:"TECNO TECNO KI5k",appVersion:"3.7.18",expirationDate:"2025/12/05",alert:!1},{personId:"508764",deviceId:"DEV-021",personName:"Dienne INGINDIA",deviceModel:"samsung SM-225F",appVersion:"3.7.18",expirationDate:"2025/12/05",alert:!1},{personId:"145137",deviceId:"DEV-022",personName:"Jonathan IYOMBE",deviceModel:"samsung SM-M986U",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"340658",deviceId:"DEV-023",personName:"Gaddiel KABISALA",deviceModel:"INFINIX Infinix X678B",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1},{personId:"438772",deviceId:"DEV-024",personName:"Nancy KABISALA",deviceModel:"iPhone",appVersion:"3.7.18",expirationDate:"2025/12/05",alert:!1},{personId:"998366",deviceId:"DEV-025",personName:"Michel KADIMA",deviceModel:"TECNO TECNO CL6k",appVersion:"3.7.18",expirationDate:"2025/12/12",alert:!1}],s=e=>{for(let t of["birthDate"])e[t]&&(e[t]=new Date(e[t]));if(e.spiritual){for(let t of["functionDate","baptismDate","preachingStartDate","lastVisitDate","teleVolunteerDate","complexVolunteerDate","bethelVolunteerDate","customSpiritual7Date"])e.spiritual[t]&&(e.spiritual[t]=new Date(e.spiritual[t]));if(e.spiritual.pioneer)for(let t of["date","schoolDate"])e.spiritual.pioneer[t]&&(e.spiritual.pioneer[t]=new Date(e.spiritual.pioneer[t]))}return e},l=e=>{let{children:t}=e,[r,l]=(0,n.useState)([]),[d,m]=(0,n.useState)([]),[p,c]=(0,n.useState)([]),[v,b]=(0,n.useState)([]),[h,f]=(0,n.useState)(!1),[D,g]=(0,n.useState)([]),[I,y]=(0,n.useState)(!1);(0,n.useEffect)(()=>{try{let e=localStorage.getItem("people");if(e){let t=JSON.parse(e);Array.isArray(t)||(console.warn("Stored people data is not an array. Resetting to empty array."),t=[]),t=(t=t.filter(e=>e.displayName&&""!==e.displayName.trim())).map(e=>e.pin?e:{...e,pin:Math.floor(1e3+9e3*Math.random()).toString()}),l(t.map(s))}let t=localStorage.getItem("families");t&&m(JSON.parse(t));let r=localStorage.getItem("preachingGroups");r&&c(JSON.parse(r));let i=localStorage.getItem("publisherDevices");i?g(JSON.parse(i)):g(u);let n=localStorage.getItem("discourseList");n?b(JSON.parse(n)):b(o)}catch(e){console.error("Failed to load data from localStorage",e)}f(!0)},[]),(0,n.useEffect)(()=>{h&&(async()=>{try{let e=await fetch("/api/publisher-app/users/export");if(e.ok){let t=await e.json();Array.isArray(t.users)&&t.users.length>0&&l(t.users.map(s))}let t=await fetch("/api/families");if(t.ok){let e=await t.json();Array.isArray(e.families)&&e.families.length>0&&m(e.families)}let r=await fetch("/api/preaching-groups");if(r.ok){let e=await r.json();Array.isArray(e.groups)&&e.groups.length>0&&c(e.groups)}}catch(e){console.error("Failed to load data from API",e)}})()},[h]),(0,n.useEffect)(()=>{if(h)try{localStorage.setItem("people",JSON.stringify(r)),localStorage.setItem("families",JSON.stringify(d)),localStorage.setItem("preachingGroups",JSON.stringify(p)),localStorage.setItem("discourseList",JSON.stringify(v)),localStorage.setItem("publisherDevices",JSON.stringify(D))}catch(e){console.error("Failed to save data to localStorage",e)}},[r,d,p,v,D,h]),(0,n.useEffect)(()=>{h&&0!==d.length&&(async()=>{try{await fetch("/api/families",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({families:d})})}catch(e){console.error("Sync families to API failed",e)}})()},[d,h]),(0,n.useEffect)(()=>{h&&0!==p.length&&(async()=>{try{await fetch("/api/preaching-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({groups:p})})}catch(e){console.error("Sync preaching groups to API failed",e)}})()},[p,h]);let E=async(e,t)=>{try{await fetch("/api/sync-activity",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e,activity:t})})}catch(e){console.error("Failed to sync activity to preaching:",e)}},N=async e=>{try{var t;let r=e.activity&&e.activity.length>0,i=(null==(t=e.emergency)?void 0:t.contacts)&&e.emergency.contacts.length>0;(r||i)&&await fetch("/api/publisher-app/create-sync-job",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({person:e})})}catch(e){console.error("Failed to create sync job:",e)}};return(0,i.jsx)(a.Provider,{value:{people:r,isLoaded:h,addPerson:e=>{let t={...e,id:"person-".concat(Date.now()),pin:Math.floor(1e3+9e3*Math.random()).toString()};return l(e=>[...e,s(t)]),N(t),t},updatePerson:e=>{l(t=>t.map(t=>t.id===e.id?s(e):t)),e.activity&&e.activity.length>0&&E(e.id,e.activity),N(e)},deletePerson:e=>{l(t=>t.filter(t=>t.id!==e))},replacePeople:e=>{if(!Array.isArray(e))return void console.warn("replacePeople called with non-array value");l(()=>{let t=Date.now();return e.map((e,r)=>{let i="string"==typeof e.id?e.id:e.id?String(e.id):"",n=""!==i.trim()?i:"person-".concat(t,"-").concat(r),o="string"==typeof e.pin?e.pin:e.pin?String(e.pin):"",a=""!==o.trim()?o:Math.floor(1e3+9e3*Math.random()).toString();return s({...e,id:n,pin:a})})})},families:d,addFamily:e=>{let t={id:"fam-".concat(Date.now()),name:e};return m(e=>[...e,t]),t},updateFamily:(e,t)=>{m(r=>r.map(r=>r.id===e?{...r,name:t}:r))},deleteFamily:e=>{l(t=>t.map(t=>t.familyId===e?{...t,familyId:null}:t)),m(t=>t.filter(t=>t.id!==e))},preachingGroups:p,addPreachingGroup:e=>{let t={id:"group-".concat(Date.now()),name:e};return c(e=>[...e,t]),t},updatePreachingGroup:(e,t)=>{c(r=>r.map(r=>r.id===e?{...r,name:t}:r)),l(r=>r.map(r=>r.spiritual.group===e?{...r,spiritual:{...r.spiritual,groupName:t}}:r))},deletePreachingGroup:e=>{l(t=>t.map(t=>t.spiritual.group===e?{...t,spiritual:{...t.spiritual,group:null}}:t)),c(t=>t.filter(t=>t.id!==e))},discourseList:v,updateDiscourseList:e=>{b(e)},devices:D,replaceDevices:e=>{g(e)}},children:t})},d=()=>{let e=(0,n.useContext)(a);if(void 0===e)throw Error("usePeople must be used within a PeopleProvider");return e}},64269:(e,t,r)=>{r.d(t,{cn:()=>o});var i=r(2821),n=r(75889);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.QP)((0,i.$)(t))}}}]);