(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9325],{3998:(e,t,a)=>{"use strict";a.d(t,{Button:()=>c,r:()=>d});var r=a(95155),s=a(12115),n=a(17129),o=a(83101),i=a(92033),l=a(64269);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:a,variant:s,size:o,asChild:c=!1,loading:u=!1,loadingText:p="Patientez...",children:f,...m}=e,g=c?n.DX:"button",h=u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),p]}):(0,r.jsx)(r.Fragment,{children:f});return(0,r.jsx)(g,{className:(0,l.cn)(d({variant:s,size:o,className:a})),ref:t,disabled:u,"aria-busy":u,...m,children:c?f:h})});c.displayName="Button"},10960:(e,t,a)=>{"use strict";a.d(t,{e:()=>i});var r=a(92475),s=a.n(r),n=a(2837),o=a.n(n);let i=async function(e){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(()=>{let e="desktop-main",t="38Z14BPvnYp9BfZ3eSE6T_otZRgfV4Vo";return e&&t?{deviceId:e,apiKey:t}:null})();if(!r)return console.warn("publisherSyncFetch: missing NEXT_PUBLIC_PUBLISHER_SYNC_DEVICE_*. Sending request without auth headers."),fetch(e,a);let{deviceId:n,apiKey:i}=r,l=new URL(e,window.location.origin),d=Date.now().toString(),{signature:c}=((e,t,a,r)=>{let n=s()(r).toString(),i="".concat(e.toUpperCase(),"\n").concat(t,"\n").concat(a),l=o()(i,n).toString();return{hashedKey:n,signature:l}})(null!=(t=a.method)?t:"GET","".concat(l.pathname).concat(l.search),d,i),u=new Headers(a.headers);return u.set("X-Device-Id",n),u.set("X-Api-Key",i),u.set("X-Timestamp",d),u.set("X-Signature",c),fetch(e,{...a,headers:u})}},11186:(e,t,a)=>{"use strict";a.d(t,{bq:()=>p,eb:()=>h,gC:()=>g,l6:()=>c,yv:()=>u});var r=a(95155),s=a(12115),n=a(4729),o=a(59007),i=a(42614),l=a(72251),d=a(64269);let c=n.bL;n.YJ;let u=n.WT,p=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(n.l9,{ref:t,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[s,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(o.A,{className:"h-4 w-4 opacity-50"})})]})});p.displayName=n.l9.displayName;let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.PP,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});f.displayName=n.PP.displayName;let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wn,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,r.jsx)(o.A,{className:"h-4 w-4"})})});m.displayName=n.wn.displayName;let g=s.forwardRef((e,t)=>{let{className:a,children:s,position:o="popper",...i}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:t,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:o,...i,children:[(0,r.jsx)(f,{}),(0,r.jsx)(n.LM,{className:(0,d.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),(0,r.jsx)(m,{})]})})});g.displayName=n.UC.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.JU,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...s})}).displayName=n.JU.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,...o}=e;return(0,r.jsxs)(n.q7,{ref:t,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...o,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:s})]})});h.displayName=n.q7.displayName,s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(n.wv,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...s})}).displayName=n.wv.displayName},15894:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var r=a(12115);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},i=[],l={toasts:[]};function d(e){l=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(l,e),i.forEach(e=>{e(l)})}function c(e){let{...t}=e,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||r()}}}),{id:a,dismiss:r,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=r.useState(l);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},37369:(e,t,a)=>{"use strict";a.d(t,{w:()=>o});var r=a(12115),s=a(15894),n=a(10960);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{toast:t}=(0,s.dj)(),[a,o]=(0,r.useState)(!1),{showToasts:i=!0,onSuccess:l,onError:d}=e,c=(0,r.useCallback)(async(e,a,r)=>{o(!0);try{var s,c,u;let o=await (0,n.e)("/api/publisher-app/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:e,payload:{...a,updatedAt:new Date().toISOString()},direction:"desktop_to_mobile",initiator:"desktop",deviceTarget:null!=(c=null==r?void 0:r.deviceTarget)?c:null,notify:null==(u=null==r?void 0:r.notify)||u})});if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.error||"Erreur HTTP ".concat(o.status))}let d=await o.json();return i&&t({title:"Synchronis\xe9",description:(null==r?void 0:r.successMessage)||"Les donn\xe9es ont \xe9t\xe9 envoy\xe9es vers Publisher App."}),null==l||l(),{success:!0,jobId:null==(s=d.job)?void 0:s.id}}catch(a){let e=a instanceof Error?a.message:"Erreur inconnue";return console.error("Sync to Flutter failed:",a),i&&t({title:"Erreur de synchronisation",description:(null==r?void 0:r.errorMessage)||e,variant:"destructive"}),null==d||d(a instanceof Error?a:Error(e)),{success:!1,error:e}}finally{o(!1)}},[t,i,l,d]),u=(0,r.useCallback)(e=>c("programme_week",e),[c]),p=(0,r.useCallback)(e=>c("programme_weekend",e),[c]),f=(0,r.useCallback)(e=>c("predication",e),[c]),m=(0,r.useCallback)(e=>c("services",e),[c]),g=(0,r.useCallback)(e=>c("nettoyage",e),[c]),h=(0,r.useCallback)(e=>c("communications",{generatedAt:new Date().toISOString(),...e}),[c]),b=(0,r.useCallback)(e=>c("territories",e),[c]),y=(0,r.useCallback)(e=>c("emergency_contacts",e),[c]),v=(0,r.useCallback)(e=>c("discours_publics",{generatedAt:new Date().toISOString(),...e}),[c]),w=(0,r.useCallback)(e=>c("temoignage_public",{generatedAt:new Date().toISOString(),...e}),[c]),x=(0,r.useCallback)(e=>c("rapports",{generatedAt:new Date().toISOString(),...e}),[c]),S=(0,r.useCallback)(e=>c("assistance",{generatedAt:new Date().toISOString(),...e}),[c]);return{syncData:c,isSyncing:a,syncProgrammeWeek:u,syncProgrammeWeekend:p,syncPredication:f,syncServices:m,syncNettoyage:g,syncCommunications:h,syncTerritories:b,syncEmergencyContacts:y,syncDiscoursPublics:v,syncTemoignagePublic:w,syncRapports:x,syncAssistance:S}}},50477:()=>{}}]);