(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{3444:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,13673,23)),Promise.resolve().then(s.t.bind(s,86130,23)),Promise.resolve().then(s.bind(s,38114)),Promise.resolve().then(s.bind(s,74957)),Promise.resolve().then(s.bind(s,18516)),Promise.resolve().then(s.bind(s,40315)),Promise.resolve().then(s.bind(s,50425))},10960:(e,t,s)=>{"use strict";s.d(t,{e:()=>l});var i=s(92475),r=s.n(i),a=s(2837),n=s.n(a);let l=async function(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(()=>{let e="desktop-main",t="38Z14BPvnYp9BfZ3eSE6T_otZRgfV4Vo";return e&&t?{deviceId:e,apiKey:t}:null})();if(!i)return console.warn("publisherSyncFetch: missing NEXT_PUBLIC_PUBLISHER_SYNC_DEVICE_*. Sending request without auth headers."),fetch(e,s);let{deviceId:a,apiKey:l}=i,o=new URL(e,window.location.origin),c=Date.now().toString(),{signature:d}=((e,t,s,i)=>{let a=r()(i).toString(),l="".concat(e.toUpperCase(),"\n").concat(t,"\n").concat(s),o=n()(l,a).toString();return{hashedKey:a,signature:o}})(null!=(t=s.method)?t:"GET","".concat(o.pathname).concat(o.search),c,l),u=new Headers(s.headers);return u.set("X-Device-Id",a),u.set("X-Api-Key",l),u.set("X-Timestamp",c),u.set("X-Signature",d),fetch(e,{...s,headers:u})}},13673:()=>{},15894:(e,t,s)=>{"use strict";s.d(t,{dj:()=>u});var i=s(12115);let r=0,a=new Map,n=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},l=[],o={toasts:[]};function c(e){o=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(o,e),l.forEach(e=>{e(o)})}function d(e){let{...t}=e,s=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||i()}}}),{id:s,dismiss:i,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=i.useState(o);return i.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:d,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},18516:(e,t,s)=>{"use strict";s.d(t,{Toaster:()=>g});var i=s(95155),r=s(15894),a=s(12115),n=s(65476),l=s(83101),o=s(26615),c=s(64269);let d=n.Kq,u=a.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.LM,{ref:t,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...r})});u.displayName=n.LM.displayName;let p=(0,l.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),m=a.forwardRef((e,t)=>{let{className:s,variant:r,...a}=e;return(0,i.jsx)(n.bL,{ref:t,className:(0,c.cn)(p({variant:r}),s),...a})});m.displayName=n.bL.displayName,a.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.rc,{ref:t,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...r})}).displayName=n.rc.displayName;let h=a.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.bm,{ref:t,className:(0,c.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...r,children:(0,i.jsx)(o.A,{className:"h-4 w-4"})})});h.displayName=n.bm.displayName;let f=a.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.hE,{ref:t,className:(0,c.cn)("text-sm font-semibold",s),...r})});f.displayName=n.hE.displayName;let b=a.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,i.jsx)(n.VY,{ref:t,className:(0,c.cn)("text-sm opacity-90",s),...r})});function g(){let{toasts:e}=(0,r.dj)();return(0,i.jsxs)(d,{children:[e.map(function(e){let{id:t,title:s,description:r,action:a,...n}=e;return(0,i.jsxs)(m,{...n,children:[(0,i.jsxs)("div",{className:"grid gap-1",children:[s&&(0,i.jsx)(f,{children:s}),r&&(0,i.jsx)(b,{children:r})]}),a,(0,i.jsx)(h,{})]},t)}),(0,i.jsx)(u,{})]})}b.displayName=n.VY.displayName},37024:(e,t,s)=>{"use strict";s.d(t,{C:()=>B});var i=s(8595),r=s(23590),a=s(66065),n=s(18771),l=s(75004),o=s(28127),c=s(5225),d=s(6943),u=s(2484),p=s(1272),m=s(78742),h=s(42997),f=s(50817),b=s(27500),g=s(25212),v=s(79855),x=s(6600),A=s(12813),y=s(60272),w=s(59338),j=s(24467),S=s(44575),N=s(5351),T=s(26541),I=s(42770),E=s(58772),M=s(53489),P=s(24820),_=s(71942),k=s(27314),O=s(74421),R=s(90542),C=s(9573),D=s(56639),F=s(46181),V=s(4785);let B=[{id:"dashboard",label:"Tableau de bord",icon:i.A,href:"/",isMainItem:!0},{id:"assembly",label:"Assembl\xe9e",icon:r.A,isCollapsible:!0,isMainItem:!0,href:"/assembly",subItems:[{id:"assembly-info",label:"Information de l’assembl\xe9e",icon:a.A,href:"/parametres"},{id:"assembly-sharing",label:"Partage de l’assembl\xe9e",icon:n.A,href:"/partage"},{id:"bulletin-assembly",label:"Tableau d'affichage assembl\xe9e",icon:l.A,href:"/communications?board=assembly"},{id:"bulletin-elders",label:"Tableau d'affichage anciens",icon:l.A,href:"/communications?board=elders"},{id:"bulletin-elders-assistants",label:"Tableau d'affichage anciens et assistants",icon:l.A,href:"/communications?board=elders-assistants"},{id:"events",label:"Ev\xe9nements de l’assembl\xe9e",icon:o.A,href:"/evenements"},{id:"preaching-activity",label:"Activit\xe9 de pr\xe9dication (S-1)",icon:c.A,href:"/activite-predication"},{id:"groups-families",label:"Groupes et familles",icon:d.A,href:"/groupes-familles"},{id:"circuits-speakers",label:"Circonscriptions & Orateurs",icon:u.A,href:"/circonscriptions-orateurs"},{id:"meeting-attendance",label:"Assistance aux r\xe9unions",icon:p.A,href:"/reports"},{id:"responsibilities",label:"Responsabilit\xe9s",icon:m.A,href:"/responsabilites"}]},{id:"personnes",label:"Personnes",icon:d.A,isCollapsible:!0,isMainItem:!0,href:"/personnes",subItems:[{id:"add-person",label:"Ajouter une personne",icon:h.A,href:"/personnes"}]},{id:"programme",label:"Programme",icon:f.A,isCollapsible:!0,isMainItem:!0,href:"/programme",subItems:[{id:"reunion-vie-ministere",label:"R\xe9union Vie et minist\xe8re",icon:b.A,href:"/programme/reunion-vie-ministere"},{id:"besoins-assemblee",label:"Besoins de l’assembl\xe9e",icon:i.A,href:"/programme/besoins-assemblee"},{id:"discours-publics-local",label:"Discours publics - Local",icon:g.A,href:"/programme/discours-publics-local"},{id:"discours-publics-exterieur",label:"Discours publics - Ext\xe9rieur",icon:v.A,href:"/programme/discours-publics-exterieur"},{id:"predication",label:"Pr\xe9dication",icon:x.A,href:"/programme/predication"},{id:"temoignage-public",label:"T\xe9moignage public",icon:A.A,href:"/programme/temoignage-public"},{id:"services",label:"Services",icon:y.A,href:"/programme/services"},{id:"nettoyage",label:"Nettoyage",icon:w.A,href:"/programme/nettoyage"},{id:"entretien-espaces-verts",label:"Entretien des espaces verts",icon:j.A,href:"/programme/entretien-espaces-verts"},{id:"maintenance",label:"Maintenance",icon:S.A,href:"/programme/maintenance"},{id:"visite-responsable-circonscription",label:"Visite du responsable de circonscription",icon:N.A,href:"/programme/visite-responsable-circonscription"}]},{id:"territories",label:"Territoires",icon:T.A,href:"/territories",isMainItem:!0},{id:"publisherApp",label:"Publisher App",icon:I.A,isCollapsible:!0,isMainItem:!0,href:"/publisher-app",subItems:[{id:"send-data",label:"Envoyer les donn\xe9es",icon:E.A,href:"/publisher-app/send-data"},{id:"receive-data",label:"Recevoir les donn\xe9es",icon:M.A,href:"/publisher-app/receive-data"},{id:"users",label:"Utilisateurs",icon:d.A,href:"/publisher-app/users"},{id:"devices",label:"Appareils",icon:I.A,href:"/publisher-app/devices"},{id:"app-settings",label:"Param\xe8tres de l'application",icon:P.A,href:"/publisher-app/settings"},{id:"logs",label:"Journaux",icon:_.A,href:"/publisher-app/logs"}]},{id:"moi",label:"Moi",icon:k.A,isCollapsible:!0,isMainItem:!0,href:"/moi",subItems:[{id:"tasks",label:"T\xe2ches",icon:O.A,href:"/moi/taches"},{id:"subscription",label:"Abonnement",icon:R.A,href:"/moi/abonnement"},{id:"alerts",label:"Voir les alertes",icon:C.A,href:"/moi/alertes"},{id:"my-settings",label:"Param\xe8tres",icon:D.A,href:"/moi/parametres"},{id:"updates",label:"Mises \xe0 jour",icon:F.A,href:"/moi/mises-a-jour"}]},{id:"logger",label:"Assistant IA",icon:V.A,href:"/logger"}]},38114:(e,t,s)=>{"use strict";s.d(t,{AppShell:()=>f});var i=s(95155),r=s(12115),a=s(20063),n=s(92033),l=s(27314),o=s(45444),c=s(18155),d=s(37024),u=s(64269),p=s(10960);function m(e){let{href:t,label:s,active:l,children:o,showBadge:c}=e,d=(0,a.useRouter)(),[p,m]=(0,r.useTransition)();return(0,i.jsxs)("button",{onClick:()=>m(()=>d.push(t)),"aria-label":s,title:s,"aria-busy":p,disabled:p,className:(0,u.cn)("relative inline-grid place-items-center w-14 h-14 rounded-xl transition outline-offset-2",l?"ring-1 ring-yellow-400 bg-yellow-400/20 text-white":"text-white/90 hover:bg-white/10 focus-visible:ring-2 focus-visible:ring-yellow-400","disabled:cursor-progress disabled:opacity-80"),children:[(0,i.jsx)("span",{className:(0,u.cn)(p&&"opacity-0"),children:r.isValidElement(o)?r.cloneElement(o,{size:30,strokeWidth:2.8}):o}),p&&(0,i.jsx)(n.A,{className:"absolute animate-spin text-yellow-400",size:22,strokeWidth:2.8}),c&&(0,i.jsx)("span",{className:"absolute right-2 top-2 h-3 w-3 rounded-full bg-red-500 ring-2 ring-white","aria-hidden":!0})]})}function h(){return(0,i.jsx)("div",{className:"my-2 h-px w-10 rounded-full bg-white/25"})}function f(e){let{children:t}=e,s=(0,a.usePathname)(),[n,u]=r.useState(!1),f=e=>"/"===e?s===e:(s.endsWith("/")?s.slice(0,-1):s).startsWith(e);r.useEffect(()=>{let e=!0,t=async()=>{try{let[t,s]=await Promise.all([(0,p.e)("/api/publisher-app/incoming?status=pending").catch(()=>null),(0,p.e)("/api/publisher-app/queue?direction=desktop_to_mobile&status=pending").catch(()=>null)]),i=(null==t?void 0:t.ok)?await t.json().catch(()=>null):null,r=(null==s?void 0:s.ok)?await s.json().catch(()=>null):null,a=Array.isArray(null==i?void 0:i.jobs)?i.jobs.length:0,n=Array.isArray(null==r?void 0:r.jobs)?r.jobs.length:0;e&&u(a>0||n>0)}catch(e){}};t();let s=setInterval(t,3e4);return()=>{e=!1,clearInterval(s)}},[]);let b=["/","/assembly","/personnes","/programme","/territories","/publisher-app"],g=d.C.map(e=>({...e,href:e.href||""})),v=g.filter(e=>b.includes(e.href)),x=g.find(e=>"/reports"===e.href),A=[{href:"/moi",label:"Moi",icon:l.A},x,{href:"/parametres",label:"Param\xe8tres",icon:o.A}].filter(Boolean);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("aside",{className:"fixed left-0 top-0 z-40 h-[100dvh] w-16 border-r border-white/10 bg-gradient-to-b from-cyan-400 via-sky-500 to-sky-700 text-white backdrop-blur no-print",children:(0,i.jsxs)("nav",{className:"app-shell-nav flex h-full flex-col items-center py-5",children:[(0,i.jsx)("div",{className:"flex flex-col items-center gap-6 pt-1",children:v.map(e=>(0,i.jsx)(m,{href:e.href,label:e.label,active:f(e.href),showBadge:"publisherApp"===e.id&&n,children:(0,i.jsx)(e.icon,{})},e.id))}),(0,i.jsx)(h,{}),(0,i.jsx)("div",{className:"flex flex-col items-center gap-6",children:A.map(e=>(0,i.jsx)(m,{href:e.href,label:e.label,active:f(e.href),children:(0,i.jsx)(e.icon,{})},e.href))}),(0,i.jsx)("div",{className:"mt-auto"}),(0,i.jsx)(h,{}),(0,i.jsx)("div",{className:"pb-4",children:(0,i.jsx)(m,{href:"/help",label:"Aide",children:(0,i.jsx)(c.A,{})})})]})}),(0,i.jsxs)("div",{className:"ml-16",children:[(0,i.jsx)("header",{className:"sticky top-0 z-30 flex h-14 items-center border-b border-white/10 bg-gradient-to-r from-cyan-400 via-sky-500 to-sky-700 text-white shadow-md no-print",children:(0,i.jsx)("div",{className:"w-full px-4 sm:px-6",children:(0,i.jsx)("h1",{className:"text-xl font-semibold tracking-wide",children:"Gestionnaire d’Assembl\xe9e"})})}),(0,i.jsx)("main",{className:"flex-1 p-4 sm:p-6 bg-muted/30",children:t})]})]})}},40315:(e,t,s)=>{"use strict";s.d(t,{AppSettingsProvider:()=>l,I:()=>o});var i=s(95155),r=s(12115);let a={language:"fr",theme:"Original",initialView:"Moi",congregationName:"",saveReminderFrequency:4,showTipsOnStartup:!0,passwordProtectApp:!1,displayNameFormat:"Nom Pr\xe9nom",dateFormat:"jj/MM/aaaa",shortDateFormat:"jj/MM/aaaa",dateRangeFormat:"MMMM jj–jj",timeFormat:"24h",meetingMinTimeBetweenAssignments:2,meetingMinTimeBetweenStudentDuties:4,meetingAvoidSameFamilySameDay:!0,publicTalkMaxExternalSpeakersPerWeek:1,servicesMinTimeBetweenServices:2,paperSize:"A4"},n=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[s,l]=(0,r.useState)(a),[o,c]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{try{let e=localStorage.getItem("appSettings");if(e){let t=JSON.parse(e);l({...a,...t})}}catch(e){console.error("Failed to load app settings from localStorage",e)}c(!0)},[]),(0,r.useEffect)(()=>{if(o)try{localStorage.setItem("appSettings",JSON.stringify(s))}catch(e){console.error("Failed to save app settings to localStorage",e)}},[s,o]),(0,i.jsx)(n.Provider,{value:{settings:s,updateSetting:(e,t)=>{l(s=>({...s,[e]:t}))}},children:t})},o=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAppSettings must be used within an AppSettingsProvider");return e}},50477:()=>{},74957:(e,t,s)=>{"use strict";s.d(t,{default:()=>n});var i=s(95155),r=s(12115),a=s(20063);function n(){let e=(0,a.usePathname)(),[t,s]=(0,r.useState)(0),n=(0,r.useRef)(null);return(0,r.useEffect)(()=>{s(10),n.current&&clearInterval(n.current),n.current=setInterval(()=>{s(e=>e<85?e+5:e)},200)},[e]),(0,r.useEffect)(()=>{e&&(n.current&&clearInterval(n.current),s(100),setTimeout(()=>s(0),250))},[e]),(0,i.jsx)("div",{className:"pointer-events-none fixed left-0 top-0 z-[999] h-0.5 w-full bg-transparent",children:(0,i.jsx)("div",{style:{width:"".concat(t,"%")},className:"h-full bg-yellow-400 transition-[width] duration-200 ease-out shadow-[0_1px_6px_rgba(250,204,21,.6)]"})})}}},e=>{e.O(0,[2978,3822,830,3928,4733,227,277,7941,8441,1255,7358],()=>e(e.s=3444)),_N_E=e.O()}]);