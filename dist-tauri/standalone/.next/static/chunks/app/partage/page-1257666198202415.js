(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4597],{22452:(e,s,i)=>{"use strict";i.d(s,{A:()=>r});let r=(0,i(14294).A)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]])},32692:(e,s,i)=>{Promise.resolve().then(i.bind(i,46780))},36654:(e,s,i)=>{"use strict";i.d(s,{A:()=>r});let r=(0,i(14294).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},46780:(e,s,i)=>{"use strict";i.r(s),i.d(s,{default:()=>y});var r=i(95155),n=i(12115),a=i(86948),t=i(76444),l=i(65142),c=i(3998),d=i(50909),o=i(22452),u=i(13630),m=i(74640),h=i(36654),x=i(26615),j=i(11186),p=i(51834),f=i(50425),v=i(64269),g=i(15894);let b={africa:"Afrique",antarctica:"Antarctique",asia:"Asie",europe:"Europe",north_america:"Am\xe9rique du Nord",oceania:"Oc\xe9anie",south_america:"Am\xe9rique du Sud"},N=["Administration de l’assembl\xe9e","Tableau d’affichage","\xc9v\xe9nements de l’assembl\xe9e","Activit\xe9 de pr\xe9dication de l’assembl\xe9e (S-1)","Autres groupes","Assistance aux r\xe9unions","Publications","Informations sur la personne","Personne Spirituel","Personne Attribuer","R\xe9union Vie et minist\xe8re","Besoins de l’assembl\xe9e","Discours publics","Pr\xe9dication et T\xe9moignage public","Services","Maintenance","Nettoyage et Entretien des espaces verts","T\xe2ches"];function y(){let[e,s]=n.useState([]),[i,y]=n.useState(!1),[w,A]=n.useState(null),{toast:k}=(0,g.dj)(),{people:S}=(0,f.d)(),C=S.filter(e=>"elder"===e.spiritual.function);n.useEffect(()=>{let e=localStorage.getItem("sharing-users");e&&s(JSON.parse(e))},[]),n.useEffect(()=>{localStorage.setItem("sharing-users",JSON.stringify(e))},[e]);let L=e.find(e=>e.id===w);return(0,r.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,r.jsx)("div",{className:"lg:w-1/3 flex flex-col",children:(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsx)(a.ZB,{children:"Donn\xe9es de connexion"}),(0,r.jsx)(a.BT,{children:"G\xe9rez les identifiants de connexion pour le partage."})]}),(0,r.jsxs)(a.Wu,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(t.Label,{htmlFor:"assembly-id",children:"ID de l’assembl\xe9e"}),(0,r.jsx)(l.p,{id:"assembly-id"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(t.Label,{htmlFor:"connection-password",children:"Mot de passe de connexion"}),(0,r.jsx)(l.p,{id:"connection-password",type:"password"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(t.Label,{htmlFor:"sharing-region",children:"R\xe9gion de partage"}),(0,r.jsxs)(j.l6,{children:[(0,r.jsx)(j.bq,{id:"sharing-region",children:(0,r.jsx)(j.yv,{placeholder:"S\xe9lectionner un continent"})}),(0,r.jsx)(j.gC,{children:Object.entries(b).map(e=>{let[s,i]=e;return(0,r.jsx)(j.eb,{value:s,children:i},s)})})]})]})]})]})}),(0,r.jsx)("div",{className:"lg:w-1/3 flex flex-col",children:(0,r.jsxs)(a.Zp,{className:"flex-grow",children:[(0,r.jsx)(a.aR,{children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(a.ZB,{children:"Utilisateurs de partage"}),(0,r.jsx)(a.BT,{children:"G\xe9rez les acc\xe8s des administrateurs."})]}),(0,r.jsxs)(p.lG,{open:i,onOpenChange:y,children:[(0,r.jsx)(p.zM,{asChild:!0,children:(0,r.jsxs)(c.Button,{size:"sm",children:[(0,r.jsx)(o.A,{className:"mr-2 h-4 w-4"}),"Ajouter"]})}),(0,r.jsxs)(p.Cf,{children:[(0,r.jsxs)(p.c7,{children:[(0,r.jsx)(p.L3,{children:"Ajouter un administrateur"}),(0,r.jsx)(p.rr,{children:"S\xe9lectionnez un ancien."})]}),(0,r.jsxs)("form",{id:"user-form",onSubmit:i=>{i.preventDefault();let r=new FormData(i.currentTarget).get("name");if(e.some(e=>e.name===r))return void k({title:"Erreur",description:"Cet administrateur a d\xe9j\xe0 \xe9t\xe9 ajout\xe9.",variant:"destructive"});if(r){let e={id:Date.now(),name:r,permission:"admin",taskPermissions:N.reduce((e,s)=>({...e,[s]:"not-authorized"}),{})};s(s=>[...s,e]),y(!1),k({title:"Succ\xe8s",description:"L'administrateur ".concat(r," a \xe9t\xe9 ajout\xe9.")})}},children:[(0,r.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,r.jsx)(t.Label,{htmlFor:"name",children:"Nom de l'ancien"}),(0,r.jsxs)(j.l6,{name:"name",required:!0,children:[(0,r.jsx)(j.bq,{children:(0,r.jsx)(j.yv,{placeholder:"S\xe9lectionner un nom"})}),(0,r.jsx)(j.gC,{children:C.map(e=>(0,r.jsx)(j.eb,{value:e.displayName,children:e.displayName},e.id))})]})]}),(0,r.jsxs)(p.Es,{children:[(0,r.jsx)(c.Button,{type:"button",variant:"ghost",onClick:()=>y(!1),children:"Annuler"}),(0,r.jsx)(c.Button,{type:"submit",children:"Sauvegarder"})]})]})]})]})]})}),(0,r.jsxs)(a.Wu,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(t.Label,{children:"Administrateurs ajout\xe9s"}),e.length>0?(0,r.jsx)("ul",{className:"rounded-md border p-2 space-y-2",children:e.map(i=>(0,r.jsxs)("li",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:i.name}),(0,r.jsx)(c.Button,{variant:"ghost",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>(i=>{let r=e.find(e=>e.id===i);s(e=>e.filter(e=>e.id!==i)),w===i&&A(null),r&&k({title:"Succ\xe8s",description:"L'administrateur ".concat(r.name," a \xe9t\xe9 supprim\xe9."),variant:"destructive"})})(i.id),children:(0,r.jsx)(u.A,{className:"h-4 w-4"})})]},i.id))}):(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aucun administrateur ajout\xe9."})]}),e.length>0&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(t.Label,{htmlFor:"permission-select",children:"G\xe9rer les permissions pour"}),(0,r.jsxs)(j.l6,{onValueChange:e=>A(Number(e)),children:[(0,r.jsx)(j.bq,{id:"permission-select",children:(0,r.jsx)(j.yv,{placeholder:"S\xe9lectionner un administrateur..."})}),(0,r.jsx)(j.gC,{children:e.map(e=>(0,r.jsx)(j.eb,{value:String(e.id),children:e.name},e.id))})]})]}),L&&(0,r.jsxs)("div",{className:"border-t pt-6 mt-4",children:[(0,r.jsxs)("h3",{className:"text-lg font-medium mb-4",children:["Permissions pour ",L.name]}),(0,r.jsx)("div",{className:"space-y-4 h-96 overflow-y-auto pr-4",children:N.map((e,i)=>{var n,a,l,c;return(0,r.jsxs)("div",{className:"flex items-center justify-between rounded-md border p-3",children:[(0,r.jsx)(t.Label,{className:"text-sm font-medium flex-1",children:e}),(0,r.jsxs)(d.z,{value:(null==(n=L.taskPermissions)?void 0:n[e])||"not-authorized",onValueChange:i=>{var r;return r=L.id,void(s(s=>s.map(s=>s.id===r?{...s,taskPermissions:{...s.taskPermissions,[e]:i}}:s)),k({description:'Permission pour "'.concat(e,'" mise \xe0 jour.')}))},className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(d.C,{value:"authorized",id:"auth-".concat(L.id,"-").concat(i),className:"sr-only"}),(0,r.jsx)(t.Label,{htmlFor:"auth-".concat(L.id,"-").concat(i),title:"Autoriser",className:(0,v.cn)("flex h-8 w-8 items-center justify-center rounded-md border cursor-pointer transition-colors",(null==(a=L.taskPermissions)?void 0:a[e])==="authorized"?"bg-primary text-primary-foreground":"hover:bg-accent"),children:(0,r.jsx)(m.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.C,{value:"view-only",id:"view-".concat(L.id,"-").concat(i),className:"sr-only"}),(0,r.jsx)(t.Label,{htmlFor:"view-".concat(L.id,"-").concat(i),title:"Voir",className:(0,v.cn)("flex h-8 w-8 items-center justify-center rounded-md border cursor-pointer transition-colors",(null==(l=L.taskPermissions)?void 0:l[e])==="view-only"?"bg-primary text-primary-foreground":"hover:bg-accent"),children:(0,r.jsx)(h.A,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(d.C,{value:"not-authorized",id:"not-auth-".concat(L.id,"-").concat(i),className:"sr-only"}),(0,r.jsx)(t.Label,{htmlFor:"not-auth-".concat(L.id,"-").concat(i),title:"Non autoris\xe9",className:(0,v.cn)("flex h-8 w-8 items-center justify-center rounded-md border cursor-pointer transition-colors",(null==(c=L.taskPermissions)?void 0:c[e])==="not-authorized"?"bg-destructive text-destructive-foreground":"hover:bg-accent"),children:(0,r.jsx)(x.A,{className:"h-4 w-4"})})]})]})]},"".concat(L.id,"-task-").concat(i))})})]})]})]})}),(0,r.jsx)("div",{className:"lg:w-1/3 flex flex-col",children:(0,r.jsxs)(a.Zp,{className:"flex-grow",children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsx)(a.ZB,{children:"Journaux du partage"}),(0,r.jsx)(a.BT,{children:"Historique des activit\xe9s de partage."})]}),(0,r.jsx)(a.Wu,{children:(0,r.jsx)("div",{className:"text-sm text-muted-foreground text-center pt-10",children:(0,r.jsx)("p",{children:"La fonctionnalit\xe9 de journalisation sera bient\xf4t disponible."})})})]})})]})}},50909:(e,s,i)=>{"use strict";i.d(s,{C:()=>d,z:()=>c});var r=i(95155),n=i(12115),a=i(24058),t=i(75797),l=i(64269);let c=n.forwardRef((e,s)=>{let{className:i,...n}=e;return(0,r.jsx)(a.bL,{className:(0,l.cn)("grid gap-2",i),...n,ref:s})});c.displayName=a.bL.displayName;let d=n.forwardRef((e,s)=>{let{className:i,...n}=e;return(0,r.jsx)(a.q7,{ref:s,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",i),...n,children:(0,r.jsx)(a.C1,{className:"flex items-center justify-center",children:(0,r.jsx)(t.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=a.q7.displayName}},e=>{e.O(0,[830,3928,5502,9823,7776,7941,2820,8441,1255,7358],()=>e(e.s=32692)),_N_E=e.O()}]);