(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2698],{3998:(e,r,s)=>{"use strict";s.d(r,{Button:()=>c,r:()=>o});var a=s(95155),i=s(12115),l=s(17129),t=s(83101),n=s(92033),d=s(64269);let o=(0,t.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=i.forwardRef((e,r)=>{let{className:s,variant:i,size:t,asChild:c=!1,loading:u=!1,loadingText:m="Patientez...",children:f,...b}=e,p=c?l.DX:"button",x=u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}),m]}):(0,a.jsx)(a.Fragment,{children:f});return(0,a.jsx)(p,{className:(0,d.cn)(o({variant:i,size:t,className:s})),ref:r,disabled:u,"aria-busy":u,...b,children:c?f:x})});c.displayName="Button"},17037:(e,r,s)=>{"use strict";s.d(r,{F:()=>n});var a=s(95155),i=s(12115),l=s(59034),t=s(64269);let n=i.forwardRef((e,r)=>{let{className:s,children:i,...n}=e;return(0,a.jsxs)(l.bL,{ref:r,className:(0,t.cn)("relative overflow-hidden",s),...n,children:[(0,a.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:i}),(0,a.jsx)(d,{}),(0,a.jsx)(l.OK,{})]})});n.displayName=l.bL.displayName;let d=i.forwardRef((e,r)=>{let{className:s,orientation:i="vertical",...n}=e;return(0,a.jsx)(l.VM,{ref:r,orientation:i,className:(0,t.cn)("flex touch-none select-none transition-colors","vertical"===i&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===i&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,a.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=l.VM.displayName},47499:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>w});var a=s(95155),i=s(12115),l=s(8595),t=s(28127),n=s(6943),d=s(26541),o=s(27314),c=s(13381),u=s(73180),m=s(50425),f=s(64269),b=s(86948),p=s(3998),x=s(50909),h=s(17037),g=s(87270);let j=[{id:"assembly",label:"Assembl\xe9e",icon:l.A,permissions:[{id:"assembly_admin",label:"Administration de l'assembl\xe9e"},{id:"bulletin_board",label:"Tableau d'affichage"},{id:"events",label:"\xc9v\xe8nements de l'assembl\xe9e"},{id:"preaching_activity",label:"Activit\xe9 de pr\xe9dication"},{id:"other_groups",label:"Autres groupes"},{id:"meeting_attendance",label:"Assistance aux r\xe9unions"},{id:"publications",label:"Publications"}]},{id:"schedule",label:"Programme",icon:t.A,permissions:[{id:"life_and_ministry_meeting",label:"R\xe9union Vie et minist\xe8re"},{id:"congregation_needs",label:"Besoins de l'assembl\xe9e"},{id:"public_talks",label:"Discours publics"},{id:"preaching_and_witnessing",label:"Pr\xe9dication et T\xe9moignage"},{id:"services",label:"Services"},{id:"maintenance",label:"Maintenance"},{id:"cleaning",label:"Nettoyage et Entretien"}]},{id:"people",label:"Personnes",icon:n.A,permissions:[{id:"personal_info",label:"Informations sur la personne"},{id:"spiritual_person",label:"Personne Spirituel"},{id:"assign_person",label:"Personne Attribuer"},{id:"publisher_reports",label:"Rapports du proclamateur"}]},{id:"territory",label:"Territoire",icon:d.A,permissions:[{id:"territories",label:"Territoires"}]},{id:"me",label:"Moi",icon:o.A,permissions:[{id:"tasks",label:"T\xe2ches"}]}],v=e=>{let{label:r,value:s,onChange:l}=e,t=i.useId();return(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-3",children:[(0,a.jsx)("span",{className:"text-sm",children:r}),(0,a.jsxs)(x.z,{value:s,onValueChange:l,className:"flex items-center gap-4",children:[(0,a.jsx)(x.C,{value:"edit",id:"".concat(t,"-edit"),className:"h-6 w-6 border-green-600 text-green-600 focus:ring-green-600"}),(0,a.jsx)(x.C,{value:"view",id:"".concat(t,"-view"),className:"h-6 w-6 border-orange-500 text-orange-500 focus:ring-orange-500"}),(0,a.jsx)(x.C,{value:"none",id:"".concat(t,"-none"),className:"h-6 w-6 border-red-600 text-red-600 focus:ring-red-600"})]})]})},N=()=>j.flatMap(e=>e.permissions).reduce((e,r)=>("publisher_reports"===r.id||"territories"===r.id?e[r.id]="view":e[r.id]="none",e),{}),y=e=>{let{users:r,selectedUser:s,onSelectUser:i}=e;return(0,a.jsxs)(b.Zp,{className:"h-full",children:[(0,a.jsx)(b.aR,{children:(0,a.jsx)(b.ZB,{children:"Utilisateurs de partage"})}),(0,a.jsx)(b.Wu,{className:"p-0",children:(0,a.jsx)(h.F,{className:"h-[calc(100vh-200px)]",children:(0,a.jsx)(g.XI,{children:(0,a.jsx)(g.BF,{children:r.map(e=>(0,a.jsx)(g.Hj,{onClick:()=>i(e),className:(0,f.cn)("cursor-pointer",(null==s?void 0:s.id)===e.id&&"bg-accent"),children:(0,a.jsx)(g.nA,{children:e.displayName})},e.id))})})})})]})};function w(){let{people:e,updatePerson:r}=(0,m.d)(),[s,l]=i.useState(null),[t,n]=i.useState(N());return i.useEffect(()=>{s?n(s.sharingPermissions||N()):n(N())},[s]),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4",children:[(0,a.jsx)(y,{users:e,selectedUser:s,onSelectUser:l}),(0,a.jsxs)(b.Zp,{children:[(0,a.jsxs)(b.aR,{children:[(0,a.jsxs)(b.ZB,{children:["Permissions pour ",s?s.displayName:"aucun utilisateur s\xe9lectionn\xe9"]}),(0,a.jsx)(b.BT,{children:"G\xe9rer les autorisations d'acc\xe8s pour l'utilisateur s\xe9lectionn\xe9."})]}),(0,a.jsx)(b.Wu,{className:"grid gap-8 md:grid-cols-2",children:j.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"flex items-center text-lg font-semibold",children:[(0,a.jsx)(e.icon,{className:"mr-3 h-5 w-5 text-primary"}),e.label]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"Modifier"}),(0,a.jsx)("span",{children:"Voir"}),(0,a.jsx)("span",{children:"Aucun"})]})]}),(0,a.jsx)("div",{className:"flex flex-col",children:e.permissions.map(e=>(0,a.jsx)(v,{label:e.label,value:t[e.id]||"none",onChange:r=>{var s;return s=e.id,void n(e=>({...e,[s]:r}))}},e.id))})]},e.id))}),(0,a.jsxs)(b.wL,{className:"flex justify-end gap-2",children:[(0,a.jsxs)(p.Button,{variant:"outline",onClick:()=>{n(Object.keys(t).reduce((e,r)=>(e[r]="none",e),{}))},disabled:!s,children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"R\xe9initialiser"]}),(0,a.jsxs)(p.Button,{onClick:()=>{s&&(r({...s,sharingPermissions:t}),alert("Permissions sauvegard\xe9es !"))},disabled:!s,children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})]})]})]})}},50909:(e,r,s)=>{"use strict";s.d(r,{C:()=>o,z:()=>d});var a=s(95155),i=s(12115),l=s(24058),t=s(75797),n=s(64269);let d=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)(l.bL,{className:(0,n.cn)("grid gap-2",s),...i,ref:r})});d.displayName=l.bL.displayName;let o=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)(l.q7,{ref:r,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...i,children:(0,a.jsx)(l.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(t.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=l.q7.displayName},86948:(e,r,s)=>{"use strict";s.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>t,aR:()=>n,wL:()=>u});var a=s(95155),i=s(12115),l=s(64269);let t=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...i})});t.displayName="Card";let n=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...i})});n.displayName="CardHeader";let d=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("h3",{ref:r,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight text-primary",s),...i})});d.displayName="CardTitle";let o=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("p",{ref:r,className:(0,l.cn)("text-sm text-muted-foreground",s),...i})});o.displayName="CardDescription";let c=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("p-6 pt-0",s),...i})});c.displayName="CardContent";let u=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{ref:r,className:(0,l.cn)("flex items-center p-6 pt-0",s),...i})});u.displayName="CardFooter"},87270:(e,r,s)=>{"use strict";s.d(r,{A0:()=>n,BF:()=>d,Hj:()=>o,XI:()=>t,nA:()=>u,nd:()=>c});var a=s(95155),i=s(12115),l=s(64269);let t=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,l.cn)("w-full caption-bottom text-sm",s),...i})})});t.displayName="Table";let n=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("thead",{ref:r,className:(0,l.cn)("[&_tr]:border-b",s),...i})});n.displayName="TableHeader";let d=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("tbody",{ref:r,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...i})});d.displayName="TableBody",i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("tfoot",{ref:r,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...i})}).displayName="TableFooter";let o=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("tr",{ref:r,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...i})});o.displayName="TableRow";let c=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("th",{ref:r,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...i})});c.displayName="TableHead";let u=i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("td",{ref:r,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...i})});u.displayName="TableCell",i.forwardRef((e,r)=>{let{className:s,...i}=e;return(0,a.jsx)("caption",{ref:r,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...i})}).displayName="TableCaption"},90884:(e,r,s)=>{Promise.resolve().then(s.bind(s,47499))}},e=>{e.O(0,[830,3928,9034,7776,6885,7941,8441,1255,7358],()=>e(e.s=90884)),_N_E=e.O()}]);