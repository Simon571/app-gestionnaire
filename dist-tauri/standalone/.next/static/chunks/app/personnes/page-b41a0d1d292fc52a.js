(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5912],{3998:(e,s,a)=>{"use strict";a.d(s,{Button:()=>o,r:()=>d});var t=a(95155),r=a(12115),i=a(17129),n=a(83101),l=a(92033),c=a(64269);let d=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,s)=>{let{className:a,variant:r,size:n,asChild:o=!1,loading:m=!1,loadingText:u="Patientez...",children:h,...x}=e,p=o?i.DX:"button",g=m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.A,{className:"mr-2 h-4 w-4 animate-spin"}),u]}):(0,t.jsx)(t.Fragment,{children:h});return(0,t.jsx)(p,{className:(0,c.cn)(d({variant:r,size:n,className:a})),ref:s,disabled:m,"aria-busy":m,...x,children:o?h:g})});o.displayName="Button"},11186:(e,s,a)=>{"use strict";a.d(s,{bq:()=>u,eb:()=>g,gC:()=>p,l6:()=>o,yv:()=>m});var t=a(95155),r=a(12115),i=a(4729),n=a(59007),l=a(42614),c=a(72251),d=a(64269);let o=i.bL;i.YJ;let m=i.WT,u=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(i.l9,{ref:s,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...l,children:[r,(0,t.jsx)(i.In,{asChild:!0,children:(0,t.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=i.l9.displayName;let h=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.PP,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(l.A,{className:"h-4 w-4"})})});h.displayName=i.PP.displayName;let x=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.wn,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})});x.displayName=i.wn.displayName;let p=r.forwardRef((e,s)=>{let{className:a,children:r,position:n="popper",...l}=e;return(0,t.jsx)(i.ZL,{children:(0,t.jsxs)(i.UC,{ref:s,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:n,...l,children:[(0,t.jsx)(h,{}),(0,t.jsx)(i.LM,{className:(0,d.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,t.jsx)(x,{})]})})});p.displayName=i.UC.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.JU,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=i.JU.displayName;let g=r.forwardRef((e,s)=>{let{className:a,children:r,...n}=e;return(0,t.jsxs)(i.q7,{ref:s,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...n,children:[(0,t.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,t.jsx)(i.VF,{children:(0,t.jsx)(c.A,{className:"h-4 w-4"})})}),(0,t.jsx)(i.p4,{children:r})]})});g.displayName=i.q7.displayName,r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.wv,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=i.wv.displayName},13406:(e,s,a)=>{"use strict";a.d(s,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>l});var t=a(95155),r=a(12115),i=a(25667),n=a(64269);let l=i.bL,c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.B8,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...r})});c.displayName=i.B8.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.l9,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...r})});d.displayName=i.l9.displayName;let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.UC,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...r})});o.displayName=i.UC.displayName},15894:(e,s,a)=>{"use strict";a.d(s,{dj:()=>m});var t=a(12115);let r=0,i=new Map,n=e=>{if(i.has(e))return;let s=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,s)},l=[],c={toasts:[]};function d(e){c=((e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=s;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}})(c,e),l.forEach(e=>{e(c)})}function o(e){let{...s}=e,a=(r=(r+1)%Number.MAX_SAFE_INTEGER).toString(),t=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:e=>{e||t()}}}),{id:a,dismiss:t,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function m(){let[e,s]=t.useState(c);return t.useEffect(()=>(l.push(s),()=>{let e=l.indexOf(s);e>-1&&l.splice(e,1)}),[e]),{...e,toast:o,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},17037:(e,s,a)=>{"use strict";a.d(s,{F:()=>l});var t=a(95155),r=a(12115),i=a(59034),n=a(64269);let l=r.forwardRef((e,s)=>{let{className:a,children:r,...l}=e;return(0,t.jsxs)(i.bL,{ref:s,className:(0,n.cn)("relative overflow-hidden",a),...l,children:[(0,t.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:r}),(0,t.jsx)(c,{}),(0,t.jsx)(i.OK,{})]})});l.displayName=i.bL.displayName;let c=r.forwardRef((e,s)=>{let{className:a,orientation:r="vertical",...l}=e;return(0,t.jsx)(i.VM,{ref:s,orientation:r,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...l,children:(0,t.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=i.VM.displayName},26333:(e,s,a)=>{"use strict";a.d(s,{AM:()=>l,Wv:()=>c,hl:()=>d});var t=a(95155),r=a(12115),i=a(31138),n=a(64269);let l=i.bL,c=i.l9,d=r.forwardRef((e,s)=>{let{className:a,align:r="center",sideOffset:l=4,...c}=e;return(0,t.jsx)(i.ZL,{children:(0,t.jsx)(i.UC,{ref:s,align:r,sideOffset:l,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...c})})});d.displayName=i.UC.displayName},31120:(e,s,a)=>{"use strict";a.d(s,{T:()=>n});var t=a(95155),r=a(12115),i=a(64269);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:s,...r})});n.displayName="Textarea"},40885:(e,s,a)=>{Promise.resolve().then(a.bind(a,65822))},50276:(e,s,a)=>{"use strict";a.d(s,{V:()=>d});var t=a(95155);a(12115);var r=a(51190),i=a(63263),n=a(1454),l=a(64269),c=a(3998);function d(e){let{className:s,classNames:a,showOutsideDays:d=!0,...o}=e;return(0,t.jsx)(n.hv,{showOutsideDays:d,className:(0,l.cn)("p-3",s),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,l.cn)((0,c.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,l.cn)((0,c.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:s,...a}=e;return(0,t.jsx)(r.A,{className:(0,l.cn)("h-4 w-4",s),...a})},IconRight:e=>{let{className:s,...a}=e;return(0,t.jsx)(i.A,{className:(0,l.cn)("h-4 w-4",s),...a})}},...o})}d.displayName="Calendar"},50909:(e,s,a)=>{"use strict";a.d(s,{C:()=>d,z:()=>c});var t=a(95155),r=a(12115),i=a(24058),n=a(75797),l=a(64269);let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.bL,{className:(0,l.cn)("grid gap-2",a),...r,ref:s})});c.displayName=i.bL.displayName;let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.q7,{ref:s,className:(0,l.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,t.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,t.jsx)(n.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});d.displayName=i.q7.displayName},51834:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>h,Es:()=>p,HM:()=>m,L3:()=>g,c7:()=>x,lG:()=>c,rr:()=>f,zM:()=>d});var t=a(95155),r=a(12115),i=a(93409),n=a(26615),l=a(64269);let c=i.bL,d=i.l9,o=i.ZL,m=i.bm,u=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.hJ,{ref:s,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});u.displayName=i.hJ.displayName;let h=r.forwardRef((e,s)=>{let{className:a,children:r,...c}=e;return(0,t.jsxs)(o,{children:[(0,t.jsx)(u,{}),(0,t.jsxs)(i.UC,{ref:s,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c,children:[r,(0,t.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,t.jsx)(n.A,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=i.UC.displayName;let x=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};x.displayName="DialogHeader";let p=e=>{let{className:s,...a}=e;return(0,t.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};p.displayName="DialogFooter";let g=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.hE,{ref:s,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});g.displayName=i.hE.displayName;let f=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.VY,{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",a),...r})});f.displayName=i.VY.displayName},65142:(e,s,a)=>{"use strict";a.d(s,{p:()=>n});var t=a(95155),r=a(12115),i=a(64269);let n=r.forwardRef((e,s)=>{let{className:a,type:r,...n}=e;return(0,t.jsx)("input",{type:r,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:ring-yellow-400/30 focus-visible:border-yellow-400",a),ref:s,...n})});n.displayName="Input"},65822:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>eM});var t=a(95155),r=a(12115),i=a(50425),n=a(86948),l=a(3998),c=a(17037),d=a(27314),o=a(11186),m=a(65142),u=a(76444),h=a(73457),x=a(13406),p=a(28127),g=a(10639),f=a(88955),j=a(79855),b=a(88964),v=a(13141),N=a(13630),y=a(47940),C=a(44575),w=a(32373),k=a(49595),A=a(94374),S=a(71942),D=a(58956),L=a(90109),_=a(77187),M=a(11568),P=a(56397),F=a(2559),R=a(20515),I=a(96711),T=a(50705),B=a(11729),E=a(60272),O=a(59338),V=a(42997),z=a(6943),q=a(6713),G=a(62846),H=a(42614),U=a(59007),J=a(31363),W=a(24820),X=a(91851),Y=a(42366),Z=a(76251),K=a(18155),Q=a(64269),$=a(26333),ee=a(50276),es=a(38621),ea=a(88260),et=a(19456),er=a(33133),ei=a(87915),en=a(50909),el=a(51834),ec=a(87270),ed=a(31120);let eo=e=>{let{gender:s,selectedGender:a,onSelect:r,children:i,icon:n}=e;return(0,t.jsxs)(l.Button,{type:"button",variant:a===s?"default":"outline",onClick:()=>r(s),className:(0,Q.cn)("bg-white hover:bg-gray-100",a===s&&"bg-blue-100 border-blue-500 text-blue-700 hover:bg-blue-200"),children:[(0,t.jsx)(n,{className:"h-4 w-4 mr-2"}),i]})},em=e=>{let{date:s,setDate:a,placeholder:i="jj/mm/aa"}=e,[n,c]=r.useState(s?(0,es.GP)(s,"dd/MM/yy"):"");return r.useEffect(()=>{c(s?(0,es.GP)(s,"dd/MM/yy"):"")},[s]),(0,t.jsxs)("div",{className:"relative flex items-center",children:[(0,t.jsx)(m.p,{type:"text",value:n,onChange:e=>{let s=e.target.value;if(c(s),s.length>=8)try{let e=(0,ea.qg)(s,"dd/MM/yy",new Date);(0,et.f)(e)?a(e):a(void 0)}catch(e){a(void 0)}else""===s&&a(void 0)},placeholder:i,className:"w-28 bg-white h-8 pr-8"}),(0,t.jsxs)($.AM,{children:[(0,t.jsx)($.Wv,{asChild:!0,children:(0,t.jsxs)(l.Button,{variant:"ghost",className:"absolute right-0 h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Ouvrir le calendrier"}),(0,t.jsx)(p.A,{className:"h-4 w-4"})]})}),(0,t.jsx)($.hl,{className:"w-auto p-0",align:"start",children:(0,t.jsx)(ee.V,{mode:"single",selected:s,onSelect:e=>{a(e),e&&(0,et.f)(e)?c((0,es.GP)(e,"dd/MM/yy")):c("")},initialFocus:!0})})]})]})},eu=e=>{let{families:s,onAddFamily:a,onCancel:i}=e,[n,c]=r.useState("");return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-md mb-4",children:(0,t.jsxs)(ec.XI,{children:[(0,t.jsx)(ec.A0,{children:(0,t.jsx)(ec.Hj,{children:(0,t.jsx)(ec.nd,{children:"Nom de la famille"})})}),(0,t.jsxs)(ec.BF,{children:[s.map(e=>(0,t.jsx)(ec.Hj,{children:(0,t.jsx)(ec.nA,{children:e.name})},e.id)),0===s.length&&(0,t.jsx)(ec.Hj,{children:(0,t.jsx)(ec.nA,{className:"text-center text-muted-foreground",children:"Aucune famille ajout\xe9e."})})]})]})}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n.trim()&&(a(n.trim()),c(""))},className:"flex gap-2",children:[(0,t.jsx)(m.p,{placeholder:"Nom de la nouvelle famille",value:n,onChange:e=>c(e.target.value)}),(0,t.jsx)(l.Button,{type:"submit",children:"Ajouter"})]}),(0,t.jsx)(el.Es,{className:"mt-4",children:(0,t.jsx)(l.Button,{variant:"ghost",onClick:i,children:"Fermer"})})]})},eh=e=>{let{personData:s,setPersonData:a}=e,{families:n,addFamily:x}=(0,i.d)(),[p,N]=r.useState(!1);r.useEffect(()=>{let e=[s.firstName,s.middleName,s.lastName].filter(Boolean).join(" ");e!==s.displayName&&a({...s,displayName:e})},[s.firstName,s.middleName,s.lastName]);let y=(e,t)=>{a({...s,[e]:t})};return(0,t.jsxs)("div",{className:"space-y-4 p-1",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsx)(m.p,{placeholder:"Pr\xe9nom",value:s.firstName,onChange:e=>y("firstName",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"Deuxi\xe8me pr\xe9nom",value:s.middleName,onChange:e=>y("middleName",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"Nom de famille",value:s.lastName,onChange:e=>y("lastName",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"Suffixe",value:s.suffix,onChange:e=>y("suffix",e.target.value)})]}),(0,t.jsx)(m.p,{placeholder:"Nom affich\xe9",value:s.displayName,readOnly:!0,onChange:e=>y("displayName",e.target.value)}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsx)(m.p,{placeholder:"T\xe9l\xe9phone fixe",type:"tel",value:s.homePhone,onChange:e=>y("homePhone",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"Mobile",type:"tel",value:s.mobilePhone,onChange:e=>y("mobilePhone",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"Travail",type:"tel",value:s.workPhone,onChange:e=>y("workPhone",e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(m.p,{placeholder:"Adresse",className:"flex-grow",value:s.address,onChange:e=>y("address",e.target.value)}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"link-family",checked:s.linkFamily,onCheckedChange:e=>y("linkFamily",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"link-family",className:"whitespace-nowrap text-muted-foreground",children:"Lien avec la famille"})]}),(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground",children:[(0,t.jsx)(g.A,{className:"h-4 w-4"})," Naviguer"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[(0,t.jsx)(m.p,{placeholder:"Latitude",value:s.latitude,onChange:e=>y("latitude",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"Longitude",value:s.longitude,onChange:e=>y("longitude",e.target.value)}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(l.Button,{variant:"ghost",size:"sm",className:"gap-2 text-muted-foreground",children:[(0,t.jsx)(f.A,{className:"h-4 w-4"})," G\xe9olocaliser"]}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:"Coordonn\xe9es GPS"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsx)(m.p,{placeholder:"E-mail",type:"email",value:s.email1,onChange:e=>y("email1",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"E-mail 2",type:"email",value:s.email2,onChange:e=>y("email2",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-center",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Label,{className:"text-muted-foreground",children:"Genre"}),(0,t.jsx)(eo,{gender:"male",selectedGender:s.gender,onSelect:e=>y("gender",e),icon:d.A,children:"Homme"}),(0,t.jsx)(eo,{gender:"female",selectedGender:s.gender,onSelect:e=>y("gender",e),icon:j.A,children:"Femme"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Label,{className:"text-muted-foreground",children:"Date de naissance"}),(0,t.jsx)(em,{date:s.birthDate,setDate:e=>y("birthDate",e)}),s.birthDate&&(0,et.f)(s.birthDate)&&(0,t.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",(e=>{let s=new Date,a=s.getFullYear()-e.getFullYear(),t=s.getMonth()-e.getMonth();return(t<0||0===t&&s.getDate()<e.getDate())&&a--,a.toFixed(1)})(s.birthDate)," Ann\xe9es)"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Label,{className:"text-muted-foreground",children:"Famille"}),(0,t.jsxs)(o.l6,{value:s.familyId||"no-family",onValueChange:e=>y("familyId","no-family"===e?null:e),children:[(0,t.jsx)(o.bq,{className:"flex-grow bg-white",children:(0,t.jsx)(o.yv,{placeholder:"Aucune famille"})}),(0,t.jsx)(o.gC,{children:(0,t.jsxs)(c.F,{className:"h-[40vh]",children:[(0,t.jsx)(o.eb,{value:"no-family",children:"Aucune famille"}),n.map(e=>(0,t.jsx)(o.eb,{value:e.id,children:e.name},e.id))]})})]}),(0,t.jsxs)(el.lG,{open:p,onOpenChange:N,children:[(0,t.jsx)(el.zM,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(el.Cf,{children:[(0,t.jsx)(el.c7,{children:(0,t.jsx)(el.L3,{children:"G\xe9rer les familles"})}),(0,t.jsx)(eu,{families:n,onAddFamily:e=>{y("familyId",x(e).id)},onCancel:()=>N(!1)})]})]})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"autre",checked:s.other,onCheckedChange:e=>y("other",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"autre",children:"Autre"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"enfant",checked:s.child,onCheckedChange:e=>y("child",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"enfant",children:"Enfant"})]}),(0,t.jsx)(m.p,{placeholder:"Autres informations",value:s.otherInfo,onChange:e=>y("otherInfo",e.target.value)})]}),(0,t.jsx)("div",{className:"space-y-2",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"age-infirme",checked:s.agedOrInfirm,onCheckedChange:e=>y("agedOrInfirm",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"age-infirme",children:"\xc2g\xe9/infirme"})]})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"sourd",checked:s.deaf,onCheckedChange:e=>y("deaf",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"sourd",children:"Sourd"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"aveugle",checked:s.blind,onCheckedChange:e=>y("blind",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"aveugle",children:"Aveugle"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"incarcere",checked:s.incarcerated,onCheckedChange:e=>y("incarcere",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"incarcere",children:"Incarc\xe9r\xe9"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"chef-famille",checked:s.isHeadOfFamily,onCheckedChange:e=>y("isHeadOfFamily",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"chef-famille",children:"Chef de famille"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"desactiver-acces",checked:s.disableAppAccess,onCheckedChange:e=>y("disableAppAccess",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"desactiver-acces",children:"D\xe9sactiver l'acc\xe8s \xe0 l'Appli"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"supprimer-infos",checked:s.deletePersonalInfo,onCheckedChange:e=>y("deletePersonalInfo",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"supprimer-infos",children:"Supprimer les informations personnelles"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Label,{className:"text-muted-foreground",htmlFor:"notes",children:"Notes"}),(0,t.jsx)(m.p,{id:"notes",value:s.notes,onChange:e=>y("notes",e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(l.Button,{variant:"outline",className:"bg-blue-50 hover:bg-blue-100 text-blue-700 border-blue-200",children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"})," P\xe9riodes d'absence"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Label,{htmlFor:"parti",children:"Parti(e)"}),(0,t.jsx)(h.S,{id:"parti",checked:s.departed,onCheckedChange:e=>y("departed",!!e)})]})]})]})]})]})},ex=e=>{let{groups:s,onAddGroup:a,onDeleteGroup:i,onCancel:n}=e,[c,d]=r.useState("");return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"max-h-60 overflow-y-auto border rounded-md mb-4",children:(0,t.jsxs)(ec.XI,{children:[(0,t.jsx)(ec.A0,{children:(0,t.jsxs)(ec.Hj,{children:[(0,t.jsx)(ec.nd,{children:"Nom du groupe"}),(0,t.jsx)(ec.nd,{className:"text-right",children:"Actions"})]})}),(0,t.jsxs)(ec.BF,{children:[s.map(e=>(0,t.jsxs)(ec.Hj,{children:[(0,t.jsx)(ec.nA,{children:e.name}),(0,t.jsx)(ec.nA,{className:"text-right",children:(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>i(e.id),children:(0,t.jsx)(N.A,{className:"h-4 w-4 text-destructive"})})})]},e.id)),0===s.length&&(0,t.jsx)(ec.Hj,{children:(0,t.jsx)(ec.nA,{colSpan:2,className:"text-center text-muted-foreground",children:"Aucun groupe ajout\xe9."})})]})]})}),(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),c.trim()&&(a(c.trim()),d(""))},className:"flex gap-2",children:[(0,t.jsx)(m.p,{placeholder:"Nom du nouveau groupe",value:c,onChange:e=>d(e.target.value)}),(0,t.jsx)(l.Button,{type:"submit",children:"Ajouter"})]}),(0,t.jsx)(el.Es,{className:"mt-4",children:(0,t.jsx)(l.Button,{variant:"ghost",onClick:n,children:"Fermer"})})]})},ep=e=>{var s;let{spiritualData:a,setSpiritualData:n}=e,{preachingGroups:d,addPreachingGroup:x,deletePreachingGroup:p}=(0,i.d)(),[g,f]=r.useState(!1),j=(e,s)=>{if("group"===e){let e=d.find(e=>e.id===s);n({...a,group:s,groupName:e?e.name:null})}else n({...a,[e]:s})},v=e=>{j("function",a.function===e?null:e)},N=null!=(s=a.pioneer)?s:{status:null,date:void 0,sfl:!1,schoolDate:void 0},F=e=>{let s=N.status;j("pioneer",{...N,status:s===e?null:e})},R=(e,s)=>{j("pioneer",{...N,[e]:s})};return(0,t.jsxs)("div",{className:"p-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Groupe"}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.l6,{value:a.group||"non-attribue",onValueChange:e=>j("group","non-attribue"===e?null:e),children:[(0,t.jsx)(o.bq,{className:"h-8 bg-white",children:(0,t.jsx)(o.yv,{placeholder:"Non attribu\xe9"})}),(0,t.jsx)(o.gC,{children:(0,t.jsxs)(c.F,{className:"h-[40vh]",children:[(0,t.jsx)(o.eb,{value:"non-attribue",children:"Non attribu\xe9"}),d.slice().sort((e,s)=>e.name.localeCompare(s.name)).map(e=>(0,t.jsx)(o.eb,{value:e.id,children:e.name},e.id))]})})]}),(0,t.jsxs)(el.lG,{open:g,onOpenChange:f,children:[(0,t.jsx)(el.zM,{asChild:!0,children:(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,t.jsx)(b.A,{className:"h-4 w-4"})})}),(0,t.jsxs)(el.Cf,{children:[(0,t.jsx)(el.c7,{children:(0,t.jsx)(el.L3,{children:"G\xe9rer les groupes de pr\xe9dication"})}),(0,t.jsx)(ex,{groups:d,onAddGroup:e=>{j("group",x(e).id)},onDeleteGroup:e=>{a.group===e&&j("group",null),p(e)},onCancel:()=>f(!1)})]})]})]}),(0,t.jsxs)(en.z,{value:a.roleInGroup,onValueChange:e=>j("roleInGroup",e),className:"flex items-center gap-4 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(en.C,{value:"overseer",id:"respon"}),(0,t.jsx)(u.Label,{htmlFor:"respon",className:"font-normal text-xs",children:"Respon"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(en.C,{value:"assistant",id:"adjoint"}),(0,t.jsx)(u.Label,{htmlFor:"adjoint",className:"font-normal text-xs",children:"Adjoint"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(en.C,{value:"member",id:"role-non"}),(0,t.jsx)(u.Label,{htmlFor:"role-non",className:"font-normal text-xs",children:"Non"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(u.Label,{children:"Fonction"}),(0,t.jsx)(em,{date:a.functionDate,setDate:e=>j("functionDate",e),placeholder:"//"})]}),(0,t.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"f-ancien",checked:"elder"===a.function,onCheckedChange:()=>v("elder")}),(0,t.jsxs)(u.Label,{htmlFor:"f-ancien",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(y.A,{className:"h-4 w-4"}),"Ancien"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"f-assistant",checked:"servant"===a.function,onCheckedChange:()=>v("servant")}),(0,t.jsxs)(u.Label,{htmlFor:"f-assistant",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(C.A,{className:"h-4 w-4"}),"Assistant"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"f-proclamateur",checked:"publisher"===a.function,onCheckedChange:()=>v("publisher")}),(0,t.jsxs)(u.Label,{htmlFor:"f-proclamateur",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(w.A,{className:"h-4 w-4"}),"Proclamateur"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"f-non-bap",checked:"unbaptized"===a.function,onCheckedChange:()=>v("unbaptized")}),(0,t.jsxs)(u.Label,{htmlFor:"f-non-bap",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(k.A,{className:"h-4 w-4"}),"Proclamateur non bap"]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2 text-xs",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)(u.Label,{children:"Date de bapt\xeame"}),(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsx)(em,{date:a.baptismDate,setDate:e=>j("baptismDate",e)}),a.baptismDate&&(0,et.f)(a.baptismDate)&&(0,t.jsxs)("span",{className:"text-muted-foreground",children:["(",(e=>{if(!e||!(0,et.f)(e))return 0;let s=new Date,a=s.getFullYear()-e.getFullYear(),t=s.getMonth()-e.getMonth();return(t<0||0===t&&s.getDate()<e.getDate())&&a--,a})(a.baptismDate)," Ann\xe9)"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)(u.Label,{children:"Date de d\xe9but de la pr\xe9dication"}),(0,t.jsx)(em,{date:a.preachingStartDate,setDate:e=>j("preachingStartDate",e)})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,t.jsx)(u.Label,{children:"Derni\xe8re visite"}),(0,t.jsx)(em,{date:a.lastVisitDate,setDate:e=>j("lastVisitDate",e)})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(u.Label,{children:"Pionnier"}),(0,t.jsxs)("div",{className:"flex items-center justify-between my-1",children:[(0,t.jsx)(em,{date:N.date,setDate:e=>R("date",e)}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"sfl",checked:N.sfl,onCheckedChange:e=>R("sfl",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"sfl",className:"font-normal text-xs",children:"S.O. (sfl 9:18)"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 mt-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"p-aux-perm",checked:"aux-permanent"===N.status,onCheckedChange:()=>F("aux-permanent")}),(0,t.jsx)(u.Label,{htmlFor:"p-aux-perm",className:"font-normal text-xs",children:"Pionnier auxiliaire"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"p-perm",checked:"permanent"===N.status,onCheckedChange:()=>F("permanent")}),(0,t.jsx)(u.Label,{htmlFor:"p-perm",className:"font-normal text-xs",children:"Pionnier permanent"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"p-special",checked:"special"===N.status,onCheckedChange:()=>F("special")}),(0,t.jsx)(u.Label,{htmlFor:"p-special",className:"font-normal text-xs",children:"Pionnier sp\xe9cial"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"p-missionnaire",checked:"missionary"===N.status,onCheckedChange:()=>F("missionary")}),(0,t.jsx)(u.Label,{htmlFor:"p-missionnaire",className:"font-normal text-xs",children:"Missionnaire affect\xe9 dan..."})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between gap-2 mt-2",children:[(0,t.jsx)(u.Label,{className:"text-xs",children:"\xc9cole des pionniers"}),(0,t.jsx)(em,{date:N.schoolDate,setDate:e=>R("schoolDate",e)})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-5",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"actif",checked:a.active,onCheckedChange:e=>j("active",!!e)}),(0,t.jsxs)(u.Label,{htmlFor:"actif",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"}),"Actif"]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"regulier",checked:a.regular,onCheckedChange:e=>j("regular",!!e)}),(0,t.jsxs)(u.Label,{htmlFor:"regulier",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(S.A,{className:"h-4 w-4 text-muted-foreground"}),"R\xe9gulier"]})]}),(0,t.jsx)("div",{className:"border-t my-3"}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"tg-papier",checked:a.tgPaper,onCheckedChange:e=>j("tgPaper",!!e)}),(0,t.jsxs)(u.Label,{htmlFor:"tg-papier",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(D.A,{className:"h-4 w-4 text-muted-foreground"}),"TG version papier"]})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,t.jsx)(L.A,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"cvm-papier",checked:a.cvmPaper,onCheckedChange:e=>j("cvmPaper",!!e)}),(0,t.jsxs)(u.Label,{htmlFor:"cvm-papier",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(_.A,{className:"h-4 w-4 text-muted-foreground"}),"CVM version papier"]})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,t.jsx)(L.A,{className:"h-4 w-4 text-muted-foreground"})})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"oint",checked:a.anointed,onCheckedChange:e=>j("anointed",!!e)}),(0,t.jsxs)(u.Label,{htmlFor:"oint",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(M.A,{className:"h-4 w-4 text-muted-foreground"}),"Oint"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"cle-salle"}),(0,t.jsxs)(u.Label,{htmlFor:"cle-salle",className:"font-normal flex items-center gap-2",children:[(0,t.jsx)(P.A,{className:"h-4 w-4 text-muted-foreground"}),"Cl\xe9 de la Salle du Royaume"]})]}),(0,t.jsx)(m.p,{className:"w-24 bg-white h-7",value:a.kingdomHallKey||"",onChange:e=>j("kingdomHallKey",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"televolontaire"}),(0,t.jsx)(m.p,{placeholder:"T\xe9l\xe9volontaire",className:"bg-white h-7"})]}),(0,t.jsx)(em,{date:a.teleVolunteerDate,setDate:e=>j("teleVolunteerDate",e),placeholder:"//"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"volontaire-comple"}),(0,t.jsx)(m.p,{placeholder:"Volontaire au comple",className:"bg-white h-7"})]}),(0,t.jsx)(em,{date:a.complexVolunteerDate,setDate:e=>j("complexVolunteerDate",e),placeholder:"//"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"volontaire-bethel"}),(0,t.jsx)(m.p,{placeholder:"Volontaire au B\xc9THEL",className:"bg-white h-7"})]}),(0,t.jsx)(em,{date:a.bethelVolunteerDate,setDate:e=>j("bethelVolunteerDate",e),placeholder:"//"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"custom-spiritual"}),(0,t.jsx)(m.p,{placeholder:"Custom Spiritual 7",className:"bg-white h-7"})]}),(0,t.jsx)(em,{date:a.customSpiritual7Date,setDate:e=>j("customSpiritual7Date",e),placeholder:"//"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"autre-info-1"}),(0,t.jsx)(m.p,{placeholder:"Autres informations t",className:"bg-white h-7",value:a.otherInfo1,onChange:e=>j("otherInfo1",e.target.value)})]}),(0,t.jsx)(m.p,{className:"w-28 bg-white h-7"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"autre-info-2"}),(0,t.jsx)(m.p,{placeholder:"Autres informations t",className:"bg-white h-7",value:a.otherInfo2,onChange:e=>j("otherInfo2",e.target.value)})]}),(0,t.jsx)(m.p,{className:"w-28 bg-white h-7"})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"autre-info-3"}),(0,t.jsx)(m.p,{placeholder:"Autres informations t",className:"bg-white h-7",value:a.otherInfo3,onChange:e=>j("otherInfo3",e.target.value)})]}),(0,t.jsx)(m.p,{className:"w-28 bg-white h-7"})]}),(0,t.jsxs)("div",{className:"border-t pt-3 mt-4 space-y-2 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"direct-reports",disabled:!0,checked:a.directReports}),(0,t.jsx)(u.Label,{htmlFor:"direct-reports",className:"font-normal text-muted-foreground",children:"Rapports envoy\xe9s directement \xe0 la filiale"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"no-local-report",disabled:!0,checked:a.noLocalReport}),(0,t.jsx)(u.Label,{htmlFor:"no-local-report",className:"font-normal text-muted-foreground",children:"Pas de rapport local"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"deleted",disabled:!0,checked:a.isDeleted}),(0,t.jsx)(u.Label,{htmlFor:"deleted",className:"font-normal text-muted-foreground",children:"Supprim\xe9"})]})]})]})]})},eg=e=>{let{icon:s,title:a,color:r="bg-blue-600",children:i}=e;return(0,t.jsxs)("div",{className:(0,Q.cn)("flex items-center p-1 rounded-t-md text-white text-sm font-bold",r),children:[(0,t.jsx)(s,{className:"h-4 w-4 mx-2"}),(0,t.jsx)("h3",{className:"flex-grow",children:a}),i]})},ef=e=>{let{label:s,checked:a,onCheckedChange:r,id:i}=e;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:i,checked:a,onCheckedChange:e=>r(!!e)}),(0,t.jsx)(u.Label,{htmlFor:i,className:"font-normal",children:s})]})},ej=e=>{let{assignmentsData:s,setAssignmentsData:a}=e,r=(e,t,r)=>{a({...s,[e]:{...s[e],[t]:r}})},i=(e,t)=>{let r={...s[e]};for(let e in r)"boolean"==typeof r[e]&&(r[e]=t);a({...s,[e]:r})},n=e=>{let a=s[e];return!!a&&Object.keys(a).filter(e=>"boolean"==typeof a[e]).every(e=>a[e])};return s?(0,t.jsxs)("div",{className:"p-1 grid grid-cols-1 lg:grid-cols-2 gap-4 items-start",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"bg-white border rounded-md",children:[(0,t.jsx)(eg,{icon:F.A,title:"Joyaux de la Parole de Dieu",color:"bg-cyan-600",children:(0,t.jsxs)("div",{className:"flex items-center text-white mr-2",children:[(0,t.jsx)(h.S,{id:"gems-all-checkbox",checked:n("gems"),onCheckedChange:e=>i("gems",!!e),className:"border-white"}),(0,t.jsx)(u.Label,{htmlFor:"gems-all-checkbox",className:"font-normal ml-2",children:"Tous"})]})}),(0,t.jsxs)("div",{className:"p-3 grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsx)(ef,{id:"gems-president",label:"Pr\xe9sident",checked:s.gems.president,onCheckedChange:e=>r("gems","president",e)}),(0,t.jsx)(ef,{id:"gems-secondaryRoomCounselor",label:"Conseiller salle secondaire",checked:s.gems.secondaryRoomCounselor,onCheckedChange:e=>r("gems","secondaryRoomCounselor",e)}),(0,t.jsx)(ef,{id:"gems-prayers",label:"Pri\xe8res",checked:s.gems.prayers,onCheckedChange:e=>r("gems","prayers",e)}),(0,t.jsx)(ef,{id:"gems-talks",label:"Discours",checked:s.gems.talks,onCheckedChange:e=>r("gems","talks",e)}),(0,t.jsx)(ef,{id:"gems-spiritualGems",label:"Perles spirituelles",checked:s.gems.spiritualGems,onCheckedChange:e=>r("gems","spiritualGems",e)}),(0,t.jsx)(ef,{id:"gems-bibleReading",label:"Lecture de la Bible",checked:s.gems.bibleReading,onCheckedChange:e=>r("gems","bibleReading",e)})]})]}),(0,t.jsxs)("div",{className:"bg-white border rounded-md",children:[(0,t.jsx)(eg,{icon:R.A,title:"Applique-toi au minist\xe8re",color:"bg-orange-500",children:(0,t.jsxs)("div",{className:"flex items-center text-white mr-2",children:[(0,t.jsx)(h.S,{id:"ministry-all-checkbox",checked:n("ministry"),onCheckedChange:e=>i("ministry",!!e),className:"border-white"}),(0,t.jsx)(u.Label,{htmlFor:"ministry-all-checkbox",className:"font-normal ml-2",children:"Tous"})]})}),(0,t.jsxs)("div",{className:"p-3 space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(ef,{id:"ministry-student",label:"\xc9l\xe8ve \xe0 la r\xe9union Vie et minist\xe8re",checked:s.ministry.student,onCheckedChange:e=>r("ministry","student",e)}),(0,t.jsx)(ef,{id:"ministry-firstContact",label:"Premier contact",checked:s.ministry.firstContact,onCheckedChange:e=>r("ministry","firstContact",e)}),(0,t.jsx)(ef,{id:"ministry-returnVisit",label:"Nouvelle visite",checked:s.ministry.returnVisit,onCheckedChange:e=>r("ministry","returnVisit",e)}),(0,t.jsx)(ef,{id:"ministry-bibleStudy",label:"Cours biblique",checked:s.ministry.bibleStudy,onCheckedChange:e=>r("ministry","bibleStudy",e)}),(0,t.jsx)(ef,{id:"ministry-explainBeliefs",label:"Explique tes croyances",checked:s.ministry.explainBeliefs,onCheckedChange:e=>r("ministry","explainBeliefs",e)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(o.l6,{defaultValue:"all",children:[(0,t.jsx)(o.bq,{className:"w-[180px] bg-white h-8",children:(0,t.jsx)(o.yv,{})}),(0,t.jsx)(o.gC,{children:(0,t.jsx)(o.eb,{value:"all",children:"Toutes les salles"})})]}),(0,t.jsx)(ef,{id:"ministry-interlocutor",label:"Interlocuteur",checked:s.ministry.interlocutor,onCheckedChange:e=>r("ministry","interlocutor",e)}),(0,t.jsx)(ef,{id:"ministry-discourse",label:"Discours",checked:s.ministry.discourse,onCheckedChange:e=>r("ministry","discourse",e)}),(0,t.jsx)(ef,{id:"ministry-languageGroupOnly",label:"Groupe langue uniquement",checked:s.ministry.languageGroupOnly,onCheckedChange:e=>r("ministry","languageGroupOnly",e)})]})]})]}),(0,t.jsxs)("div",{className:"bg-white border rounded-md",children:[(0,t.jsx)(eg,{icon:I.A,title:"Vie chr\xe9tienne",color:"bg-red-600",children:(0,t.jsxs)("div",{className:"flex items-center text-white mr-2",children:[(0,t.jsx)(h.S,{id:"christianLife-all-checkbox",checked:n("christianLife"),onCheckedChange:e=>i("christianLife",!!e),className:"border-white"}),(0,t.jsx)(u.Label,{htmlFor:"christianLife-all-checkbox",className:"font-normal ml-2",children:"Tous"})]})}),(0,t.jsxs)("div",{className:"p-3 grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsx)(ef,{id:"christianLife-interventions",label:"Interventions",checked:s.christianLife.interventions,onCheckedChange:e=>r("christianLife","interventions",e)}),(0,t.jsx)(ef,{id:"christianLife-congregationBibleStudy",label:"\xc9tude biblique de l'assembl\xe9e",checked:s.christianLife.congregationBibleStudy,onCheckedChange:e=>r("christianLife","congregationBibleStudy",e)}),(0,t.jsx)(ef,{id:"christianLife-reader",label:"Lecteur",checked:s.christianLife.reader,onCheckedChange:e=>r("christianLife","reader",e)})]})]}),(0,t.jsxs)("div",{className:"bg-white border rounded-md",children:[(0,t.jsx)(eg,{icon:T.A,title:"R\xe9union de week-end",color:"bg-blue-800",children:(0,t.jsxs)("div",{className:"flex items-center text-white mr-2",children:[(0,t.jsx)(h.S,{id:"weekendMeeting-all-checkbox",checked:n("weekendMeeting"),onCheckedChange:e=>i("weekendMeeting",!!e),className:"border-white"}),(0,t.jsx)(u.Label,{htmlFor:"weekendMeeting-all-checkbox",className:"font-normal ml-2",children:"Tous"})]})}),(0,t.jsxs)("div",{className:"p-3 space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(ef,{id:"weekendMeeting-localSpeaker",label:"Orateur local",checked:s.weekendMeeting.localSpeaker,onCheckedChange:e=>r("weekendMeeting","localSpeaker",e)}),(0,t.jsx)(ef,{id:"weekendMeeting-externalSpeaker",label:"Orateur ext\xe9rieur",checked:s.weekendMeeting.externalSpeaker,onCheckedChange:e=>r("weekendMeeting","externalSpeaker",e)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Label,{className:"text-xs",children:"Entre les num\xe9ros de discours, s\xe9par\xe9s par une virgule"}),(0,t.jsx)(m.p,{className:"bg-white h-8",value:s.weekendMeeting.discourseNumbers,onChange:e=>r("weekendMeeting","discourseNumbers",e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Label,{className:"text-xs",children:"Fr\xe9quence \xe0 l'ext\xe9rieur"}),(0,t.jsxs)(o.l6,{defaultValue:"4",children:[(0,t.jsx)(o.bq,{className:"w-[80px] bg-white h-8",children:(0,t.jsx)(o.yv,{})}),(0,t.jsx)(o.gC,{children:(0,t.jsx)(o.eb,{value:"4",children:"4"})})]}),(0,t.jsx)(u.Label,{className:"text-xs",children:"Semaines"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)(ef,{id:"weekendMeeting-president",label:"Pr\xe9sident",checked:s.weekendMeeting.president,onCheckedChange:e=>r("weekendMeeting","president",e)}),(0,t.jsx)(ef,{id:"weekendMeeting-wtReader",label:"Lecteur Tour de Garde",checked:s.weekendMeeting.wtReader,onCheckedChange:e=>r("weekendMeeting","wtReader",e)}),(0,t.jsx)(ef,{id:"weekendMeeting-finalPrayer",label:"Pri\xe8re de fin",checked:s.weekendMeeting.finalPrayer,onCheckedChange:e=>r("weekendMeeting","finalPrayer",e)}),(0,t.jsx)(ef,{id:"weekendMeeting-orateur2",label:"Orateur 2",checked:s.weekendMeeting.orateur2,onCheckedChange:e=>r("weekendMeeting","orateur2",e)}),(0,t.jsx)(ef,{id:"weekendMeeting-hospitality",label:"Hospitalit\xe9",checked:s.weekendMeeting.hospitality,onCheckedChange:e=>r("weekendMeeting","hospitality",e)}),(0,t.jsx)(ef,{id:"weekendMeeting-groupLangueUniquement",label:"Groupe langue uniquement",checked:s.weekendMeeting.groupLangueUniquement,onCheckedChange:e=>r("weekendMeeting","groupLangueUniquement",e)})]})]})]}),(0,t.jsxs)("div",{className:"bg-white border rounded-md",children:[(0,t.jsx)(eg,{icon:B.A,title:"Pr\xe9dication",color:"bg-purple-700",children:(0,t.jsxs)("div",{className:"flex items-center text-white mr-2",children:[(0,t.jsx)(h.S,{id:"preaching-all-checkbox",checked:n("preaching"),onCheckedChange:e=>i("preaching",!!e),className:"border-white"}),(0,t.jsx)(u.Label,{htmlFor:"preaching-all-checkbox",className:"font-normal ml-2",children:"Tous"})]})}),(0,t.jsxs)("div",{className:"p-3 grid grid-cols-2 gap-3 text-sm",children:[(0,t.jsx)(ef,{id:"preaching-publicWitnessing",label:"T\xe9moignage public",checked:s.preaching.publicWitnessing,onCheckedChange:e=>r("preaching","publicWitnessing",e)}),(0,t.jsx)(ef,{id:"preaching-keyPerson",label:"Personne-cl\xe9",checked:s.preaching.keyPerson,onCheckedChange:e=>r("preaching","keyPerson",e)}),(0,t.jsx)(ef,{id:"preaching-leadMeetings",label:"Diriger des r\xe9unions pour la pr\xe9dication",checked:s.preaching.leadMeetings,onCheckedChange:e=>r("preaching","leadMeetings",e)}),(0,t.jsx)(ef,{id:"preaching-meetingPrayers",label:"Pri\xe8res pour les r\xe9unions de pr\xe9dication",checked:s.preaching.meetingPrayers,onCheckedChange:e=>r("preaching","meetingPrayers",e)}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.Label,{className:"text-xs",children:"Conducteur rempla\xe7ant"}),(0,t.jsx)(m.p,{className:"bg-white h-8",value:s.preaching.substituteDriver,onChange:e=>r("preaching","substituteDriver",e.target.value)})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"bg-white border rounded-md",children:[(0,t.jsx)(eg,{icon:E.A,title:"Services",color:"bg-green-700",children:(0,t.jsxs)("div",{className:"flex items-center text-white mr-2",children:[(0,t.jsx)(h.S,{id:"services-all-checkbox",checked:n("services"),onCheckedChange:e=>i("services",!!e),className:"border-white"}),(0,t.jsx)(u.Label,{htmlFor:"services-all-checkbox",className:"font-normal ml-2",children:"Tous"})]})}),(0,t.jsxs)("div",{className:"p-3 space-y-2 text-sm",children:[(0,t.jsxs)(o.l6,{defaultValue:"all",children:[(0,t.jsx)(o.bq,{className:"w-full bg-white h-8",children:(0,t.jsx)(o.yv,{})}),(0,t.jsx)(o.gC,{children:(0,t.jsx)(o.eb,{value:"all",children:"Toutes les r\xe9unions"})})]}),(0,t.jsx)(ef,{id:"services-attendanceCount",label:"Comptage_Assistance",checked:s.services.attendanceCount,onCheckedChange:e=>r("services","attendanceCount",e)}),(0,t.jsx)(ef,{id:"services-doorAttendant",label:"Accueil \xe0 la porte",checked:s.services.doorAttendant,onCheckedChange:e=>r("services","doorAttendant",e)}),(0,t.jsx)(ef,{id:"services-soundSystem",label:"Sonorisation",checked:s.services.soundSystem,onCheckedChange:e=>r("services","soundSystem",e)}),(0,t.jsx)(ef,{id:"services-rovingMic",label:"Micros baladeur",checked:s.services.rovingMic,onCheckedChange:e=>r("services","rovingMic",e)}),(0,t.jsx)(ef,{id:"services-stageMic",label:"Micros Estrade",checked:s.services.stageMic,onCheckedChange:e=>r("services","stageMic",e)}),(0,t.jsx)(ef,{id:"services-sanitary",label:"Sanitaire",checked:s.services.sanitary,onCheckedChange:e=>r("services","sanitary",e)}),(0,t.jsx)(ef,{id:"services-hallAttendant",label:"Accueil dans la salle",checked:s.services.hallAttendant,onCheckedChange:e=>r("services","hallAttendant",e)}),(0,t.jsx)(ef,{id:"services-mainDoorAttendant",label:"Accueil \xe0 la grande porte",checked:s.services.mainDoorAttendant,onCheckedChange:e=>r("services","mainDoorAttendant",e)}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"custom-service-1",checked:s.services.customService1,onCheckedChange:e=>r("services","customService1",e)}),(0,t.jsx)(m.p,{className:"bg-white h-8",value:s.services.customService1Label,onChange:e=>r("services","customService1Label",e.target.value)})]}),(0,t.jsx)(ef,{id:"services-maintenance",label:"Maintenance",checked:s.services.maintenance,onCheckedChange:e=>r("services","maintenance",e)})]})]}),(0,t.jsxs)("div",{className:"bg-white border rounded-md",children:[(0,t.jsx)(eg,{icon:O.A,title:"Nettoyage et Entretien des espaces verts",color:"bg-teal-600",children:(0,t.jsxs)("div",{className:"flex items-center text-white mr-2",children:[(0,t.jsx)(h.S,{id:"cleaning-all-checkbox",checked:n("cleaning"),onCheckedChange:e=>i("cleaning",!!e),className:"border-white"}),(0,t.jsx)(u.Label,{htmlFor:"cleaning-all-checkbox",className:"font-normal ml-2",children:"Tous"})]})}),(0,t.jsxs)("div",{className:"p-3 space-y-2 text-sm",children:[(0,t.jsx)(ef,{id:"cleaning-hallCleaning",label:"Nettoyage de la Salle",checked:s.cleaning.hallCleaning,onCheckedChange:e=>r("cleaning","hallCleaning",e)}),(0,t.jsx)(ef,{id:"cleaning-hallCleaningAfterMeeting",label:"Nettoyage de la Salle_Apr\xe8s la r\xe9union",checked:s.cleaning.hallCleaningAfterMeeting,onCheckedChange:e=>r("cleaning","hallCleaningAfterMeeting",e)}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"custom-cleaning-1",checked:s.cleaning.customCleaning1,onCheckedChange:e=>r("cleaning","customCleaning1",e)}),(0,t.jsx)(m.p,{className:"bg-white h-8",value:s.cleaning.customCleaning1Label,onChange:e=>r("cleaning","customCleaning1Label",e.target.value)})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"custom-cleaning-2",checked:s.cleaning.customCleaning2,onCheckedChange:e=>r("cleaning","customCleaning2",e)}),(0,t.jsx)(m.p,{className:"bg-white h-8",value:s.cleaning.customCleaning2Label,onChange:e=>r("cleaning","customCleaning2Label",e.target.value)})]}),(0,t.jsx)(ef,{id:"cleaning-greenSpaces",label:"Entretien espaces verts",checked:s.cleaning.greenSpaces,onCheckedChange:e=>r("cleaning","greenSpaces",e)}),(0,t.jsx)(ef,{id:"cleaning-lawn",label:"Pelouse",checked:s.cleaning.lawn,onCheckedChange:e=>r("cleaning","lawn",e)})]})]})]})]}):(0,t.jsx)("div",{className:"p-4 text-center text-muted-foreground",children:"Les attributions ne sont pas disponibles."})},eb=e=>{let{activityData:s,setActivityData:a}=e,[i,n]=r.useState(2025),d=r.useMemo(()=>{let e=[],s=new Date(i,6,1);for(let a=0;a<12;a++){let t=new Date(s.getFullYear(),s.getMonth()+a,1);e.push({key:(0,es.GP)(t,"yyyy-MM"),label:(0,es.GP)(t,"MMMM yyyy",{locale:ei.fr})})}return e},[i]),x=(e,t,r)=>{let i=s.findIndex(s=>s.month===e),n=[...s];if(i>-1)n[i][t]=r;else{let s={month:e,participated:!1,bibleStudies:null,isAuxiliaryPioneer:!1,hours:null,credit:null,isLate:!1,remarks:""};s[t]=r,n.push(s)}a(n)},p=r.useMemo(()=>s.reduce((e,s)=>(e.bibleStudies+=s.bibleStudies||0,e.hours+=s.hours||0,e),{bibleStudies:0,hours:0}),[s]),g={bibleStudies:s.length>0?(p.bibleStudies/s.filter(e=>e.participated).length).toFixed(1):"0.0",hours:s.length>0?(p.hours/s.filter(e=>e.participated).length).toFixed(1):"0.0"},f=Array.from({length:10},(e,s)=>(0,er.C)(new Date)-5+s);return(0,t.jsxs)("div",{className:"p-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)(u.Label,{children:"Ann\xe9e"}),(0,t.jsxs)(o.l6,{value:i.toString(),onValueChange:e=>n(Number(e)),children:[(0,t.jsx)(o.bq,{className:"w-28 bg-white h-9",children:(0,t.jsx)(o.yv,{})}),(0,t.jsx)(o.gC,{children:(0,t.jsx)(c.F,{className:"h-[40vh]",children:f.map(e=>(0,t.jsx)(o.eb,{value:e.toString(),children:e},e))})})]})]}),(0,t.jsx)("div",{className:"overflow-x-auto border rounded-md",children:(0,t.jsxs)(ec.XI,{children:[(0,t.jsx)(ec.A0,{children:(0,t.jsxs)(ec.Hj,{className:"bg-gray-50 hover:bg-gray-50",children:[(0,t.jsx)(ec.nd,{className:"w-1/6"}),(0,t.jsx)(ec.nd,{className:"text-center w-1/12",children:"A particip\xe9 \xe0 la pr\xe9dication"}),(0,t.jsx)(ec.nd,{className:"text-center w-1/12",children:"Cours bibliques"}),(0,t.jsx)(ec.nd,{className:"text-center w-1/12",children:"Pionnier auxiliaire"}),(0,t.jsx)(ec.nd,{className:"text-center w-1/12",children:"Heures"}),(0,t.jsx)(ec.nd,{className:"text-center w-1/12",children:"Cr\xe9dit (minutes)"}),(0,t.jsx)(ec.nd,{className:"text-center w-1/12",children:"En retard"}),(0,t.jsx)(ec.nd,{className:"w-1/4",children:"Remarques"})]})}),(0,t.jsx)(ec.BF,{children:d.map(e=>{var a,r,i;let{key:n,label:l}=e,c=(e=>s.find(s=>s.month===e)||{month:e,participated:!1,bibleStudies:null,isAuxiliaryPioneer:!1,hours:null,credit:null,isLate:!1,remarks:""})(n);return(0,t.jsxs)(ec.Hj,{children:[(0,t.jsx)(ec.nA,{className:"font-medium capitalize",children:l}),(0,t.jsx)(ec.nA,{className:"text-center",children:(0,t.jsx)(h.S,{checked:c.participated,onCheckedChange:e=>x(n,"participated",e)})}),(0,t.jsx)(ec.nA,{children:(0,t.jsx)(m.p,{type:"number",className:"h-8 bg-white text-center",value:null!=(a=c.bibleStudies)?a:"",onChange:e=>x(n,"bibleStudies",e.target.value?Number(e.target.value):null)})}),(0,t.jsx)(ec.nA,{className:"text-center",children:(0,t.jsx)(h.S,{checked:c.isAuxiliaryPioneer,onCheckedChange:e=>x(n,"isAuxiliaryPioneer",e)})}),(0,t.jsx)(ec.nA,{children:(0,t.jsx)(m.p,{type:"number",className:"h-8 bg-white text-center",value:null!=(r=c.hours)?r:"",onChange:e=>x(n,"hours",e.target.value?Number(e.target.value):null)})}),(0,t.jsx)(ec.nA,{children:(0,t.jsx)(m.p,{type:"number",className:"h-8 bg-white text-center",value:null!=(i=c.credit)?i:"",onChange:e=>x(n,"credit",e.target.value?Number(e.target.value):null)})}),(0,t.jsx)(ec.nA,{className:"text-center",children:(0,t.jsx)(h.S,{checked:c.isLate,onCheckedChange:e=>x(n,"isLate",e)})}),(0,t.jsx)(ec.nA,{children:(0,t.jsx)(m.p,{className:"h-8 bg-white",value:c.remarks,onChange:e=>x(n,"remarks",e.target.value)})})]},n)})})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 mt-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"w-20 font-semibold",children:"Total"}),(0,t.jsx)("div",{className:"ml-[20%] text-center font-semibold w-20",children:p.bibleStudies}),(0,t.jsx)("div",{className:"ml-[7%] text-center font-semibold w-20",children:p.hours})]}),(0,t.jsxs)("div",{className:"flex items-center mt-2",children:[(0,t.jsx)("span",{className:"w-20 font-semibold",children:"Moyenne"}),(0,t.jsx)("div",{className:"ml-[20%] text-center font-semibold w-20",children:g.bibleStudies}),(0,t.jsx)("div",{className:"ml-[7%] text-center font-semibold w-20",children:g.hours})]})]}),(0,t.jsxs)("div",{className:"flex justify-end items-end gap-2",children:[(0,t.jsx)(l.Button,{variant:"outline",size:"sm",children:"Effacer le mois"}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",children:"Effacer les heures"})]})]})]})},ev=e=>{var s;let{emergencyData:a,setEmergencyData:i}=e,[n,d]=r.useState(null),o=null!=(s=a.contacts)?s:[],x=(e,s)=>{i({...a,[e]:s})},p=(e,s)=>{if(!n)return;let t=o.map(a=>a.id===n?{...a,[e]:s}:a);i({...a,contacts:t})},g=e=>{let s={id:"contact-".concat(Date.now()),name:"Nouveau Contact",isCongregationMember:!e,mobile:"",phone:"",email:"",relationship:"",notes:""},t=[...o,s];i({...a,contacts:t}),d(s.id)},f=o.find(e=>e.id===n);return(0,t.jsxs)("div",{className:"p-1 space-y-4",children:[(0,t.jsx)("h3",{className:"font-bold text-lg",children:a.personName}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(u.Label,{children:"Notes d'urgence"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"disasterAccommodations",checked:a.disasterAccommodations,onCheckedChange:e=>x("disasterAccommodations",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"disasterAccommodations",className:"font-normal",children:"H\xe9bergements temporaires pour les victimes de catastrophes"})]}),(0,t.jsx)(ed.T,{value:a.notes,onChange:e=>x("notes",e.target.value)})]}),(0,t.jsxs)("div",{className:"border-t pt-4",children:[(0,t.jsx)("h4",{className:"font-semibold mb-2",children:"Contacts d'urgence"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,t.jsxs)(l.Button,{className:"justify-start",onClick:()=>g(!1),children:[(0,t.jsx)(V.A,{className:"mr-2"}),"Nouveau de l'assembl\xe9e"]}),(0,t.jsxs)(l.Button,{className:"justify-start",onClick:()=>g(!0),children:[(0,t.jsx)(V.A,{className:"mr-2"}),"Nouveau de l'ext\xe9rieur"]}),(0,t.jsxs)(l.Button,{variant:"outline",className:"justify-start",children:[(0,t.jsx)(z.A,{className:"mr-2"}),"Copie du chef de famille"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(q.A,{className:"mr-2"}),"Lien"]}),(0,t.jsxs)(l.Button,{variant:"outline",className:"w-full justify-start",children:[(0,t.jsx)(G.A,{className:"mr-2"}),"Dissocier"]})]}),(0,t.jsxs)(l.Button,{variant:"destructive",className:"justify-start",onClick:()=>{if(!n)return;let e=o.filter(e=>e.id!==n);i({...a,contacts:e}),d(null)},disabled:!n,children:[(0,t.jsx)(N.A,{className:"mr-2"}),"Supprimer"]}),(0,t.jsxs)("div",{className:"border rounded-md h-32 mt-2 relative",children:[(0,t.jsx)(c.F,{className:"h-full",children:o.map(e=>(0,t.jsx)("div",{className:(0,Q.cn)("p-2 cursor-pointer",n===e.id&&"bg-accent"),onClick:()=>d(e.id),children:e.name},e.id))}),(0,t.jsxs)("div",{className:"absolute right-1 bottom-1 flex flex-col gap-1",children:[(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,t.jsx)(H.A,{className:"h-4 w-4"})}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",children:(0,t.jsx)(U.A,{className:"h-4 w-4"})})]})]})]}),f&&(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(m.p,{placeholder:"Nom",value:f.name,onChange:e=>p("name",e.target.value)}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 ml-2",children:[(0,t.jsx)(h.S,{id:"is-member",checked:f.isCongregationMember,onCheckedChange:e=>p("isCongregationMember",!!e)}),(0,t.jsx)(u.Label,{htmlFor:"is-member",className:"font-normal whitespace-nowrap",children:"Membre de l'assembl\xe9e"})]})]}),(0,t.jsx)(m.p,{placeholder:"Mobile",value:f.mobile,onChange:e=>p("mobile",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"T\xe9l\xe9phone",value:f.phone,onChange:e=>p("phone",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"E-mail",type:"email",value:f.email,onChange:e=>p("email",e.target.value)}),(0,t.jsx)(m.p,{placeholder:"Relations",value:f.relationship,onChange:e=>p("relationship",e.target.value)}),(0,t.jsx)(ed.T,{placeholder:"Notes",className:"h-24",value:f.notes,onChange:e=>p("notes",e.target.value)})]})]})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground pt-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(h.S,{id:"privacy-ack"}),(0,t.jsx)(u.Label,{htmlFor:"privacy-ack",className:"font-normal",children:"Le proclamateur a inform\xe9 son contact d'urgence que cette information sera partag\xe9e avec les anciens de l'assembl\xe9e, qui peuvent le contacter en cas d'urgence, et que toute information personnelle est trait\xe9e conform\xe9ment \xe0 la politique de confidentialit\xe9."})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:["ID #",null==f?void 0:f.id.split("-")[1]]}),(0,t.jsx)("span",{children:"Derni\xe8re v\xe9rification ou mise \xe0 jour"})]})]})]})},eN={all:"Tout","gems.president":"Pr\xe9sident","gems.secondaryRoomCounselor":"Conseil. salle sec.","gems.prayers":"Pri\xe8re","gems.talks":"Discours","gems.spiritualGems":"Perles spirituelles","gems.bibleReading":"Lecture de la Bible","ministry.student":"Eleve VCM","ministry.engage_conversation":"Engage la conversation","ministry.maintain_interest":"Entretien l'interet","ministry.make_disciples":"Fais des disciples","ministry.firstContact":"Premier contact","ministry.returnVisit":"Nouvelle visite","ministry.bibleStudy":"Cours biblique","ministry.explainBeliefs":"Explique tes croyances","ministry.discourse":"Discours (r\xe9p\xe9t\xe9)","ministry.interlocutor":"Adjoint","christianLife.interventions":"Intervention vie Chr\xe9tienne","christianLife.congregationBibleStudy":"EBA","christianLife.reader":"Lecteur","weekendMeeting.localSpeaker":"Orateur local","weekendMeeting.externalSpeaker":"Orateur ext\xe9rieur","weekendMeeting.president":"Weekend-end Pr\xe9sident","weekendMeeting.wtReader":"Lecteur Tour de Garde","weekendMeeting.finalPrayer":"Pri\xe8re de fin","weekendMeeting.orateur2":"Orateur 2","weekendMeeting.hospitality":"Hospitalit\xe9","preaching.publicWitnessing":"T\xe9moignage public","preaching.leadMeetings":"Diriger des r\xe9unions pour la pr\xe9dication","preaching.substituteDriver":"Conducteur rempla\xe7ant","preaching.meetingPrayers":"Pri\xe8res pour les r\xe9unions de pr\xe9dication","services.attendanceCount":"Comptage Assistance","services.doorAttendant":"Accueil \xe0 la porte","services.door_attendant_alt":"Accuel \xe0 la porte","services.soundSystem":"Sonorisation","services.rovingMic":"Micros baladeur","services.stageMic":"Micros Estrade","services.stage_mic_alt":"Micro Estrade","services.sanitary":"Sanitaire","services.hallAttendant":"Accueil dans la salle","services.hall_attendant_alt":"Accueil dans la salle","services.mainDoorAttendant":"accueil \xe0 la grande porte","services.main_door_attendant_alt":"accueil \xe0 la grande porte","services.maintenance":"Maintenance","cleaning.hallCleaningAfterMeeting":"Nettoyage de la salle apr\xe8s r\xe9union","cleaning.greenSpaces":"Entretien espaces verts"},ey={all:"Tous",families:"Familles",all_publishers:"Tous les proclamateurs",active_publishers:"Proclamateurs actifs",irregular_publishers:"Proclamateurs irr\xe9guliers",inactive_publishers:"Proclamateurs inactifs",unbaptized_publishers:"Proclamateurs non baptis\xe9s",not_publishers:"Pas proclamateurs",baptized:"Baptis\xe9(e)",elders:"Anciens",servants:"Assistants",appointed_brothers:"Fr\xe8res nomm\xe9s",active_unappointed_brothers:"Fr\xe8res actifs non nomm\xe9s",brothers:"Fr\xe8res",sisters:"Surs",all_pioneers:"Tous les pionniers",regular_pioneers:"Pionniers permanents",auxiliary_pioneers:"Pionniers auxiliaires",special_pioneers:"Pionniers sp\xe9ciaux",missionaries:"Missionnaires affect\xe9s dans le territoire",group_overseers:"Responsables de groupe",group_assistants:"Adjoints de groupe",family_heads:"Chef de famille",aged_or_infirm:"\xc2g\xe9/infirme",child:"Enfant",blind:"Aveugle",deaf:"Sourd",incarcerated:"Incarc\xe9r\xe9",other_personal_info:"Autres informations personnelles",anointed:"Oint",kh_key:"Cl\xe9 de la Salle du Royaume",tele_volunteer:"T\xe9l\xe9volontaire",complex_volunteer:"Volontaire au complexe des \xe9coles bibliques",bethel_volunteer:"Volontaire au B\xc9THEL",other_theocratic_info_4:"Autres informations th\xe9ocratiques 4",other_theocratic_info_5:"Autres informations th\xe9ocratiques 5",other_theocratic_info_6:"Autres informations th\xe9ocratiques 6",custom_spiritual_7:"Custom spiritual 7",direct_reports:"Rapports envoy\xe9s directement \xe0 la filiale",sent_back:"Renvoy\xe9",departed:"Parti(e)"},eC=()=>({firstName:"",middleName:"",lastName:"",suffix:"",displayName:"",homePhone:"",mobilePhone:"",workPhone:"",address:"",linkFamily:!1,latitude:"",longitude:"",email1:"",email2:"",gender:null,birthDate:void 0,familyId:null,isHeadOfFamily:!1,other:!1,child:!1,otherInfo:"",agedOrInfirm:!1,deaf:!1,blind:!1,incarcerated:!1,disableAppAccess:!1,deletePersonalInfo:!1,notes:"",absences:[],departed:!1,activity:[],spiritual:{group:null,groupName:null,roleInGroup:"member",functionDate:void 0,function:null,baptismDate:void 0,preachingStartDate:void 0,lastVisitDate:void 0,pioneer:{status:null,date:void 0,sfl:!1,schoolDate:void 0},active:!1,regular:!1,tgPaper:!1,cvmPaper:!1,anointed:!1,kingdomHallKey:null,teleVolunteerDate:void 0,complexVolunteerDate:void 0,bethelVolunteerDate:void 0,customSpiritual7Date:void 0,otherInfo1:"",otherInfo2:"",otherInfo3:"",directReports:!1,noLocalReport:!1,isDeleted:!1},assignments:{gems:{president:!1,prayers:!1,spiritualGems:!1,secondaryRoomCounselor:!1,talks:!1,bibleReading:!1},ministry:{student:!1,firstContact:!1,returnVisit:!1,bibleStudy:!1,explainBeliefs:!1,hall:"all",interlocutor:!1,discourse:!1,languageGroupOnly:!1,engageConversation:!1,maintainInterest:!1,makeDisciples:!1},christianLife:{interventions:!1,congregationBibleStudy:!1,reader:!1},weekendMeeting:{localSpeaker:!1,externalSpeaker:!1,discourseNumbers:"",frequency:"4",president:!1,finalPrayer:!1,hospitality:!1,wtReader:!1,orateur2:!1,groupLangueUniquement:!1},preaching:{publicWitnessing:!1,leadMeetings:!1,substituteDriver:"",keyPerson:!1,meetingPrayers:!1},services:{meeting:"all",attendanceCount:!1,doorAttendant:!1,soundSystem:!1,rovingMic:!1,stageMic:!1,sanitary:!1,hallAttendant:!1,mainDoorAttendant:!1,customService1:!1,customService1Label:"",maintenance:!1,doorAttendantAlt:!1,stageMicAlt:!1,hallAttendantAlt:!1,mainDoorAttendantAlt:!1},cleaning:{hallCleaning:!1,hallCleaningAfterMeeting:!1,customCleaning1:!1,customCleaning1Label:"",customCleaning2:!1,customCleaning2Label:"",greenSpaces:!1,lawn:!1}},emergency:{personName:"",notes:"",disasterAccommodations:!1,contacts:[]},sharingPermissions:{}});function ew(e){var s;let{selectedPerson:a,onSave:i,onNew:n,onDelete:c,activeTab:o,onTabChange:m}=e,[u,h]=r.useState(eC());return r.useEffect(()=>{if(a){let s=JSON.parse(JSON.stringify(a)),t=eC();if(["birthDate"].forEach(e=>{s[e]&&(s[e]=new Date(s[e]))}),s.spiritual){var e;s.spiritual={...t.spiritual,...s.spiritual,pioneer:{...t.spiritual.pioneer,...null!=(e=s.spiritual.pioneer)?e:{}}},["functionDate","baptismDate","preachingStartDate","lastVisitDate","teleVolunteerDate","complexVolunteerDate","bethelVolunteerDate","customSpiritual7Date"].forEach(e=>{s.spiritual[e]&&(s.spiritual[e]=new Date(s.spiritual[e]))}),s.spiritual.pioneer&&["date","schoolDate"].forEach(e=>{s.spiritual.pioneer[e]&&(s.spiritual.pioneer[e]=new Date(s.spiritual.pioneer[e]))})}else s.spiritual=t.spiritual;let r={...t.assignments};s.assignments?Object.keys(t.assignments).forEach(e=>{r[e]={...t.assignments[e],...s.assignments?s.assignments[e]:{}}}):s.assignments=t.assignments,s.emergency||(s.emergency=t.emergency),s.emergency.personName=s.displayName,h({...t,...s,assignments:r})}else h(eC())},[a]),r.useEffect(()=>{var e;u.displayName!==(null==(e=u.emergency)?void 0:e.personName)&&h(e=>({...e,emergency:{...e.emergency,personName:e.displayName}}))},[u.displayName,null==(s=u.emergency)?void 0:s.personName]),(0,t.jsx)("div",{className:"bg-card p-4 rounded-lg border",children:(0,t.jsxs)(x.tU,{value:o,onValueChange:m,defaultValue:"informations",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",onClick:c,disabled:!a,children:(0,t.jsx)(J.A,{})}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",type:"button",onClick:()=>{i(u),u.id||h(eC())},children:"Sauvegarder"}),(0,t.jsx)("div",{className:"border-l h-6 mx-2"}),(0,t.jsxs)(x.j7,{className:"bg-transparent p-0 gap-1",children:[(0,t.jsxs)(x.Xi,{value:"informations",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md p-2 gap-2 data-[state=active]:text-primary border-b-2 data-[state=active]:border-primary data-[state=inactive]:border-transparent",children:[(0,t.jsx)(d.A,{className:"h-4 w-4"}),"Informations"]}),(0,t.jsxs)(x.Xi,{value:"spirituel",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md p-2 gap-2 data-[state=active]:text-primary border-b-2 data-[state=active]:border-primary data-[state=inactive]:border-transparent",children:[(0,t.jsx)(_.A,{className:"h-4 w-4"}),"Spirituel"]}),(0,t.jsxs)(x.Xi,{value:"attribuer",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md p-2 gap-2 data-[state=active]:text-primary border-b-2 data-[state=active]:border-primary data-[state=inactive]:border-transparent",children:[(0,t.jsx)(W.A,{className:"h-4 w-4"}),"Attribuer"]}),(0,t.jsxs)(x.Xi,{value:"activite",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md p-2 gap-2 data-[state=active]:text-primary border-b-2 data-[state=active]:border-primary data-[state=inactive]:border-transparent",children:[(0,t.jsx)(X.A,{className:"h-4 w-4"}),"Activit\xe9 du proclamateur"]}),(0,t.jsxs)(x.Xi,{value:"urgence",className:"data-[state=active]:bg-background data-[state=active]:shadow-sm rounded-md p-2 gap-2 data-[state=active]:text-primary border-b-2 data-[state=active]:border-primary data-[state=inactive]:border-transparent",children:[(0,t.jsx)(Y.A,{className:"h-4 w-4"}),"Urgence"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",children:(0,t.jsx)(z.A,{})}),(0,t.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",children:(0,t.jsx)(Z.A,{})}),(0,t.jsx)(l.Button,{type:"button",variant:"ghost",size:"icon",children:(0,t.jsx)(K.A,{})})]})]}),(0,t.jsxs)(x.av,{value:"informations",className:"printable-area",children:[(0,t.jsxs)("div",{className:"print-only hidden my-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-center",children:"Fiche d'informations"}),(0,t.jsx)("h3",{className:"text-lg text-center",children:u.displayName})]}),(0,t.jsx)(eh,{personData:u,setPersonData:h})]}),(0,t.jsxs)(x.av,{value:"spirituel",className:"printable-area",children:[(0,t.jsxs)("div",{className:"print-only hidden my-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-center",children:"Informations spirituelles"}),(0,t.jsx)("h3",{className:"text-lg text-center",children:u.displayName})]}),(0,t.jsx)(ep,{spiritualData:u.spiritual,setSpiritualData:e=>{h(s=>({...s,spiritual:e}))}})]}),(0,t.jsxs)(x.av,{value:"attribuer",className:"printable-area",children:[(0,t.jsxs)("div",{className:"print-only hidden my-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-center",children:"Attributions"}),(0,t.jsx)("h3",{className:"text-lg text-center",children:u.displayName})]}),(0,t.jsx)(ej,{assignmentsData:u.assignments,setAssignmentsData:e=>{h(s=>({...s,assignments:e}))}})]}),(0,t.jsxs)(x.av,{value:"activite",className:"printable-area",children:[(0,t.jsxs)("div",{className:"print-only hidden my-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-center",children:"Activit\xe9 du proclamateur"}),(0,t.jsx)("h3",{className:"text-lg text-center",children:u.displayName})]}),(0,t.jsx)(eb,{activityData:u.activity||[],setActivityData:e=>{h(s=>({...s,activity:e}))}})]}),(0,t.jsxs)(x.av,{value:"urgence",className:"printable-area",children:[(0,t.jsxs)("div",{className:"print-only hidden my-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-center",children:"Contacts d'urgence"}),(0,t.jsx)("h3",{className:"text-lg text-center",children:u.displayName})]}),(0,t.jsx)(ev,{emergencyData:u.emergency,setEmergencyData:e=>{h(s=>({...s,emergency:e}))}})]})]})})}function ek(e){let{people:s,selectedPerson:a,onSelectPerson:u,onNewPerson:h}=e;if(!Array.isArray(s))return console.error("PeopleList received non-array people prop:",s),null;let{preachingGroups:x}=(0,i.d)(),[p,g]=r.useState(""),[f,j]=r.useState("all"),[b,v]=r.useState("all"),[N,y]=r.useState("all-groups"),C=[...s].sort((e,s)=>e.displayName.localeCompare(s.displayName)).filter(e=>!!e.displayName.toLowerCase().includes(p.toLowerCase())&&(()=>{if("all"===f)return!0;let[s,a]=f.split(".");return e.assignments&&e.assignments[s]&&e.assignments[s][a]})()&&(()=>{let s=e.spiritual;if(!s)return!1;switch(b){case"all":case"families":default:return!0;case"all_publishers":return s.function&&["publisher","servant","elder","unbaptized"].includes(s.function);case"active_publishers":return s.active;case"irregular_publishers":return s.active&&!s.regular;case"inactive_publishers":return!s.active;case"unbaptized_publishers":return"unbaptized"===s.function;case"not_publishers":return!s.function;case"baptized":return!!s.baptismDate;case"elders":return"elder"===s.function;case"servants":return"servant"===s.function;case"appointed_brothers":return"male"===e.gender&&("elder"===s.function||"servant"===s.function);case"active_unappointed_brothers":return"male"===e.gender&&s.active&&!s.function;case"brothers":return"male"===e.gender;case"sisters":return"female"===e.gender;case"all_pioneers":return!!s.pioneer.status;case"regular_pioneers":return"permanent"===s.pioneer.status;case"auxiliary_pioneers":return"aux-permanent"===s.pioneer.status;case"special_pioneers":return"special"===s.pioneer.status;case"missionaries":return"missionary"===s.pioneer.status;case"group_overseers":return"overseer"===s.roleInGroup;case"group_assistants":return"assistant"===s.roleInGroup;case"family_heads":return e.isHeadOfFamily;case"aged_or_infirm":return e.agedOrInfirm;case"child":return e.child;case"blind":return e.blind;case"deaf":return e.deaf;case"incarcerated":return e.incarcerated;case"other_personal_info":return!!e.otherInfo;case"anointed":return s.anointed;case"kh_key":return!!s.kingdomHallKey;case"tele_volunteer":return!!s.teleVolunteerDate;case"complex_volunteer":return!!s.complexVolunteerDate;case"bethel_volunteer":return!!s.bethelVolunteerDate;case"other_theocratic_info_4":return!!s.otherInfo1;case"other_theocratic_info_5":return!!s.otherInfo2;case"other_theocratic_info_6":return!!s.otherInfo3;case"custom_spiritual_7":return!!s.customSpiritual7Date;case"direct_reports":return s.directReports;case"sent_back":case"deleted":return s.isDeleted;case"departed":return e.departed}})()&&("all-groups"===N||e.spiritual.group===N));return(0,t.jsxs)(n.Zp,{className:"h-full flex flex-col max-h-[calc(100vh-120px)]",children:[(0,t.jsxs)(n.aR,{className:"flex flex-col items-start justify-between shrink-0",children:[(0,t.jsxs)("div",{className:"flex flex-row items-center justify-between w-full",children:[(0,t.jsxs)(n.ZB,{children:["Personnes (",C.length,")"]}),(0,t.jsx)(l.Button,{onClick:h,children:"Nouveau"})]}),(0,t.jsxs)("div",{className:"p-2 space-y-2 border rounded-md w-full mt-2",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)(o.l6,{value:b,onValueChange:v,children:[(0,t.jsx)(o.bq,{children:(0,t.jsx)(o.yv,{placeholder:"Filtre principal"})}),(0,t.jsx)(o.gC,{children:(0,t.jsx)(c.F,{className:"h-[40vh]",children:Object.entries(ey).map(e=>{let[s,a]=e;return(0,t.jsx)(o.eb,{value:s,children:a},s)})})})]}),(0,t.jsxs)(o.l6,{value:f,onValueChange:j,children:[(0,t.jsx)(o.bq,{children:(0,t.jsx)(o.yv,{placeholder:"R\xf4le"})}),(0,t.jsx)(o.gC,{children:(0,t.jsx)(c.F,{className:"h-[40vh]",children:Object.entries(eN).map(e=>{let[s,a]=e;return(0,t.jsx)(o.eb,{value:s,children:a},s)})})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-[1fr_auto] gap-2 items-center",children:[(0,t.jsxs)(o.l6,{value:N,onValueChange:y,children:[(0,t.jsx)(o.bq,{children:(0,t.jsx)(o.yv,{placeholder:"Groupe"})}),(0,t.jsx)(o.gC,{children:(0,t.jsxs)(c.F,{className:"h-[40vh]",children:[(0,t.jsx)(o.eb,{value:"all-groups",children:"Tous les groupes"}),x.slice().sort((e,s)=>e.name.localeCompare(s.name)).map(e=>(0,t.jsx)(o.eb,{value:e.id,children:e.name},e.id))]})})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(m.p,{placeholder:"Rechercher par nom",className:"h-9",value:p,onChange:e=>g(e.target.value)})})]})]})]}),(0,t.jsx)(n.Wu,{className:"p-0 flex-1 overflow-hidden",children:(0,t.jsx)(c.F,{className:"h-full",children:(0,t.jsx)("div",{className:"p-2",children:C.map(e=>(0,t.jsxs)(l.Button,{variant:(null==a?void 0:a.id)===e.id?"secondary":"ghost",className:"w-full justify-start mb-1",onClick:()=>u(e),children:[(0,t.jsx)(d.A,{className:"mr-2 h-4 w-4"}),e.displayName]},e.id))})})})]})}var eA=a(15894),eS=a(13381),eD=a(58772),eL=a(53489);let e_=(e,s)=>{let a=e.trim(),t=a.split(/\s+/).filter(Boolean),r=t[0]||a,i=t.length>1?t[t.length-1]:"";return{id:"",firstName:r,middleName:t.length>2?t.slice(1,-1).join(" "):"",lastName:i,suffix:"",displayName:a,homePhone:"",mobilePhone:"",workPhone:"",address:"",linkFamily:!1,latitude:"",longitude:"",email1:"",email2:"",gender:null,birthDate:void 0,familyId:null,isHeadOfFamily:!1,other:!1,child:!1,otherInfo:"",agedOrInfirm:!1,deaf:!1,blind:!1,incarcerated:!1,disableAppAccess:!1,deletePersonalInfo:!1,notes:"",absences:[],departed:!1,activity:[],spiritual:{group:null,groupName:null,roleInGroup:"member",functionDate:void 0,function:null,baptismDate:void 0,preachingStartDate:void 0,lastVisitDate:void 0,pioneer:{status:null,date:void 0,sfl:!1,schoolDate:void 0},active:!1,regular:!1,tgPaper:!1,cvmPaper:!1,anointed:!1,kingdomHallKey:null,teleVolunteerDate:void 0,complexVolunteerDate:void 0,bethelVolunteerDate:void 0,customSpiritual7Date:void 0,otherInfo1:"",otherInfo2:"",otherInfo3:"",directReports:!1,noLocalReport:!1,isDeleted:!1},assignments:{gems:{president:!1,prayers:!1,spiritualGems:!1,secondaryRoomCounselor:!1,talks:!1,bibleReading:!1},ministry:{student:!1,firstContact:!1,returnVisit:!1,bibleStudy:!1,explainBeliefs:!1,hall:"",interlocutor:!1,discourse:!1,languageGroupOnly:!1,engageConversation:!1,maintainInterest:!1,makeDisciples:!1},christianLife:{interventions:!1,congregationBibleStudy:!1,reader:!1},weekendMeeting:{localSpeaker:!1,externalSpeaker:!1,discourseNumbers:"",frequency:"",president:!1,finalPrayer:!1,hospitality:!1,wtReader:!1,orateur2:!1,groupLangueUniquement:!1},preaching:{publicWitnessing:!1,leadMeetings:!1,substituteDriver:"",keyPerson:!1,meetingPrayers:!1},services:{meeting:"",attendanceCount:!1,doorAttendant:!1,soundSystem:!1,rovingMic:!1,stageMic:!1,sanitary:!1,hallAttendant:!1,mainDoorAttendant:!1,customService1:!1,customService1Label:"",maintenance:!1,doorAttendantAlt:!1,stageMicAlt:!1,hallAttendantAlt:!1,mainDoorAttendantAlt:!1},cleaning:{hallCleaning:!1,hallCleaningAfterMeeting:!1,customCleaning1:!1,customCleaning1Label:"",customCleaning2:!1,customCleaning2Label:"",greenSpaces:!1,lawn:!1}},emergency:{personName:"",notes:"",disasterAccommodations:!1,contacts:[]},sharingPermissions:{}}};function eM(){let{people:e,addPerson:s,updatePerson:a,deletePerson:n,replacePeople:c}=(0,i.d)(),[d,o]=r.useState(null),[m,u]=r.useState("informations"),{toast:h}=(0,eA.dj)(),x=r.useRef(null),[p,g]=r.useState([]);r.useEffect(()=>{Array.isArray(e)?g(e):g([])},[e]),console.log("People in PeoplePage (from context):",e),console.log("PeopleList (local state):",p);let f=()=>{o(null),u("informations")},j=async()=>{try{let e=await fetch("/api/sync-publisher-users-to-people");if(!e.ok)throw Error("\xc9chec de la synchronisation");let s=(await e.json()).people||[],a=new Set(p.map(e=>e.id)),t=s.filter(e=>!a.has(e.id));if(t.length>0){let e=[...p,...t];c(e),h({title:"Synchronisation r\xe9ussie",description:"".concat(t.length," nouvelle(s) personne(s) import\xe9e(s) depuis Publisher App.")})}else h({title:"Aucune nouvelle personne",description:"Tous les utilisateurs Publisher App sont d\xe9j\xe0 dans la liste."})}catch(e){console.error("Sync from publisher app failed:",e),h({title:"Erreur de synchronisation",description:"Impossible de synchroniser depuis Publisher App.",variant:"destructive"})}},b=async()=>{try{let e=await fetch("/api/repair-publisher-users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({people:p})});if(!e.ok)throw Error("\xc9chec de la r\xe9paration");let s=await e.json();h({title:"R\xe9paration r\xe9ussie",description:"".concat(s.count," utilisateur(s) synchronis\xe9(s) vers Publisher App avec groupes.")})}catch(e){console.error("Repair publisher app failed:",e),h({title:"Erreur de r\xe9paration",description:"Impossible de r\xe9parer Publisher App. V\xe9rifiez la console.",variant:"destructive"})}};return(0,t.jsxs)("div",{className:"space-y-6 p-4 min-h-screen",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"Personnes"}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",onClick:b,className:"flex items-center gap-2 bg-orange-50",children:[(0,t.jsx)(eS.A,{className:"h-4 w-4 text-orange-600"}),(0,t.jsx)("span",{className:"text-orange-600",children:"R\xe9parer Publisher App"})]}),(0,t.jsxs)(l.Button,{variant:"outline",onClick:j,className:"flex items-center gap-2",children:[(0,t.jsx)(eS.A,{className:"h-4 w-4"}),"Sync Publisher App"]}),(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>{var e;null==(e=x.current)||e.click()},className:"flex items-center gap-2",children:[(0,t.jsx)(eD.A,{className:"h-4 w-4"}),"Importer"]}),(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>{try{let e=JSON.stringify(p,null,2),s=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(s),t=document.createElement("a");t.href=a,t.download="personnes-".concat(new Date().toISOString().split("T")[0],".json"),document.body.appendChild(t),t.click(),document.body.removeChild(t),URL.revokeObjectURL(a),h({title:"Export termin\xe9",description:"".concat(p.length," personne(s) export\xe9e(s) avec succ\xe8s.")})}catch(e){console.error("Failed to export people list",e),h({title:"Erreur d'export",description:"Impossible d'exporter la liste des personnes.",variant:"destructive"})}},disabled:0===p.length,className:"flex items-center gap-2",children:[(0,t.jsx)(eL.A,{className:"h-4 w-4"}),"Exporter"]})]}),(0,t.jsx)("input",{ref:x,type:"file",accept:"application/json,text/plain,.json,.txt",className:"hidden",onChange:e=>{var s;let a=null==(s=e.target.files)?void 0:s[0];if(!a){e.target.value="";return}let t=new FileReader;t.onload=s=>{try{var a;let e=null==(a=s.target)?void 0:a.result;if("string"!=typeof e)throw Error("File content is not text");let t=(e=>{try{let s=JSON.parse(e);if(!Array.isArray(s))throw Error("JSON must be an array");if(s.every(e=>"string"==typeof e))return s.map(e=>e.trim()).filter(e=>e.length>0).map((e,s)=>e_(e,s));if(s.some(e=>!e||"object"!=typeof e||"string"!=typeof e.displayName||""===e.displayName.trim()))throw Error("Invalid person entry detected");return s}catch(a){let s=e.split(/\r?\n/).map(e=>e.trim()).filter(e=>e.length>0).filter(e=>!/^liste\s+des\s+proclameurs?/i.test(e));if(0===s.length)throw a;return s.map((e,s)=>e_(e,s))}})(e);c(t),o(null),u("informations"),h({title:"Import r\xe9ussi",description:"".concat(t.length," personne(s) import\xe9e(s) avec succ\xe8s.")})}catch(e){console.error("Failed to import people list",e),h({title:"Erreur d'import",description:"Le fichier s\xe9lectionn\xe9 est invalide ou corrompu.",variant:"destructive"})}finally{e.target.value=""}},t.readAsText(a,"utf-8")}})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-3",children:[(0,t.jsx)("div",{children:(0,t.jsx)(ek,{people:p,selectedPerson:d,onSelectPerson:e=>{o(e),u("informations")},onNewPerson:f})}),(0,t.jsx)("div",{className:"lg:col-span-2",children:(0,t.jsx)(ew,{selectedPerson:d,onSave:e=>{if(e.id)a(e),h({title:"Mise \xe0 jour r\xe9ussie",description:"Les informations de ".concat(e.displayName," ont \xe9t\xe9 mises \xe0 jour.")});else{let a=s(e);o(a),u("informations"),h({title:"Personne ajout\xe9e",description:"".concat(a.displayName," a \xe9t\xe9 ajout\xe9(e) \xe0 la liste.")})}},onNew:f,onDelete:()=>{if(d){let e=d.displayName;n(d.id),o(null),u("informations"),h({title:"Personne supprim\xe9e",description:"".concat(e," a \xe9t\xe9 supprim\xe9(e) de la liste."),variant:"destructive"})}},activeTab:m,onTabChange:u},(null==d?void 0:d.id)||"new")})]})]})}},73457:(e,s,a)=>{"use strict";a.d(s,{S:()=>c});var t=a(95155),r=a(12115),i=a(38162),n=a(72251),l=a(64269);let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.bL,{ref:s,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground","accent-amber-500","data-[state=checked]:bg-amber-500 data-[state=checked]:border-amber-500",a),...r,children:(0,t.jsx)(i.C1,{className:(0,l.cn)("flex items-center justify-center text-current"),children:(0,t.jsx)(n.A,{className:"h-4 w-4"})})})});c.displayName=i.bL.displayName},76444:(e,s,a)=>{"use strict";a.d(s,{Label:()=>d});var t=a(95155),r=a(12115),i=a(10489),n=a(83101),l=a(64269);let c=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)(i.b,{ref:s,className:(0,l.cn)(c(),a),...r})});d.displayName=i.b.displayName},86948:(e,s,a)=>{"use strict";a.d(s,{BT:()=>d,Wu:()=>o,ZB:()=>c,Zp:()=>n,aR:()=>l,wL:()=>m});var t=a(95155),r=a(12115),i=a(64269);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});n.displayName="Card";let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...r})});l.displayName="CardHeader";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight text-primary",a),...r})});c.displayName="CardTitle";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})});d.displayName="CardDescription";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...r})});m.displayName="CardFooter"},87270:(e,s,a)=>{"use strict";a.d(s,{A0:()=>l,BF:()=>c,Hj:()=>d,XI:()=>n,nA:()=>m,nd:()=>o});var t=a(95155),r=a(12115),i=a(64269);let n=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:s,className:(0,i.cn)("w-full caption-bottom text-sm",a),...r})})});n.displayName="Table";let l=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("thead",{ref:s,className:(0,i.cn)("[&_tr]:border-b",a),...r})});l.displayName="TableHeader";let c=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tbody",{ref:s,className:(0,i.cn)("[&_tr:last-child]:border-0",a),...r})});c.displayName="TableBody",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tfoot",{ref:s,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...r})}).displayName="TableFooter";let d=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("tr",{ref:s,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...r})});d.displayName="TableRow";let o=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("th",{ref:s,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...r})});o.displayName="TableHead";let m=r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("td",{ref:s,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...r})});m.displayName="TableCell",r.forwardRef((e,s)=>{let{className:a,...r}=e;return(0,t.jsx)("caption",{ref:s,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",a),...r})}).displayName="TableCaption"}},e=>{e.O(0,[830,3928,5502,9823,9034,4244,4325,4589,2275,7776,8260,272,7941,8441,1255,7358],()=>e(e.s=40885)),_N_E=e.O()}]);