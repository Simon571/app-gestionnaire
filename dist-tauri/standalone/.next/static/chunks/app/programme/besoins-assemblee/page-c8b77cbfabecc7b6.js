(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9387],{3998:(e,t,r)=>{"use strict";r.d(t,{Button:()=>c,r:()=>o});var s=r(95155),a=r(12115),l=r(17129),n=r(83101),i=r(92033),d=r(64269);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:c=!1,loading:u=!1,loadingText:m="Patientez...",children:f,...h}=e,x=c?l.DX:"button",p=u?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),m]}):(0,s.jsx)(s.Fragment,{children:f});return(0,s.jsx)(x,{className:(0,d.cn)(o({variant:a,size:n,className:r})),ref:t,disabled:u,"aria-busy":u,...h,children:c?f:p})});c.displayName="Button"},6447:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(95155),a=r(12115),l=r(3998),n=r(92033),i=r(58772),d=r(15894),o=r(10960);function c(e){let{type:t,getPayload:r,save:c,disabled:u,label:m}=e,{toast:f}=(0,d.dj)(),[h,x]=a.useState(!1),p=async()=>{if(!u){x(!0);try{c&&await c();let e=r?r():{};if(!(await (0,o.e)("/api/publisher-app/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:t,payload:e,notify:!0})})).ok)throw Error("Impossible de cr\xe9er le job de synchronisation");f({title:"Enregistr\xe9 et envoy\xe9",description:"Le job a bien \xe9t\xe9 cr\xe9\xe9 pour Publisher App."})}catch(e){console.error("link-to-publisher error",e),f({title:"Erreur",description:(null==e?void 0:e.message)||"Envoi impossible",variant:"destructive"})}finally{x(!1)}}};return(0,s.jsxs)(l.Button,{onClick:p,disabled:u||h,className:"bg-sky-600 hover:bg-sky-700 text-white",children:[h?(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}):(0,s.jsx)(i.A,{className:"mr-2 h-4 w-4"}),null!=m?m:"Enregistrer & Envoyer vers Publisher App"]})}},10960:(e,t,r)=>{"use strict";r.d(t,{e:()=>i});var s=r(92475),a=r.n(s),l=r(2837),n=r.n(l);let i=async function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=(()=>{let e="desktop-main",t="38Z14BPvnYp9BfZ3eSE6T_otZRgfV4Vo";return e&&t?{deviceId:e,apiKey:t}:null})();if(!s)return console.warn("publisherSyncFetch: missing NEXT_PUBLIC_PUBLISHER_SYNC_DEVICE_*. Sending request without auth headers."),fetch(e,r);let{deviceId:l,apiKey:i}=s,d=new URL(e,window.location.origin),o=Date.now().toString(),{signature:c}=((e,t,r,s)=>{let l=a()(s).toString(),i="".concat(e.toUpperCase(),"\n").concat(t,"\n").concat(r),d=n()(i,l).toString();return{hashedKey:l,signature:d}})(null!=(t=r.method)?t:"GET","".concat(d.pathname).concat(d.search),o,i),u=new Headers(r.headers);return u.set("X-Device-Id",l),u.set("X-Api-Key",i),u.set("X-Timestamp",o),u.set("X-Signature",c),fetch(e,{...r,headers:u})}},15894:(e,t,r)=>{"use strict";r.d(t,{dj:()=>u});var s=r(12115);let a=0,l=new Map,n=e=>{if(l.has(e))return;let t=setTimeout(()=>{l.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,t)},i=[],d={toasts:[]};function o(e){d=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(d,e),i.forEach(e=>{e(d)})}function c(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>o({type:"DISMISS_TOAST",toastId:r});return o({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:c,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},17037:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var s=r(95155),a=r(12115),l=r(59034),n=r(64269);let i=a.forwardRef((e,t)=>{let{className:r,children:a,...i}=e;return(0,s.jsxs)(l.bL,{ref:t,className:(0,n.cn)("relative overflow-hidden",r),...i,children:[(0,s.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,s.jsx)(d,{}),(0,s.jsx)(l.OK,{})]})});i.displayName=l.bL.displayName;let d=a.forwardRef((e,t)=>{let{className:r,orientation:a="vertical",...i}=e;return(0,s.jsx)(l.VM,{ref:t,orientation:a,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r),...i,children:(0,s.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=l.VM.displayName},31120:(e,t,r)=>{"use strict";r.d(t,{T:()=>n});var s=r(95155),a=r(12115),l=r(64269);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});n.displayName="Textarea"},36885:(e,t,r)=>{Promise.resolve().then(r.bind(r,82210))},50477:()=>{},64269:(e,t,r)=>{"use strict";r.d(t,{cn:()=>l});var s=r(2821),a=r(75889);function l(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}},65142:(e,t,r)=>{"use strict";r.d(t,{p:()=>n});var s=r(95155),a=r(12115),l=r(64269);let n=a.forwardRef((e,t)=>{let{className:r,type:a,...n}=e;return(0,s.jsx)("input",{type:a,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:ring-yellow-400/30 focus-visible:border-yellow-400",r),ref:t,...n})});n.displayName="Input"},82210:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var s=r(95155),a=r(12115),l=r(3998),n=r(86948),i=r(65142),d=r(17037),o=r(87270),c=r(31120),u=r(32265),m=r(13630),f=r(73180),h=r(27500),x=r(76251),p=r(18155),b=r(15894),g=r(6447),v=r(64269);let j=[],N=Array.from({length:15},(e,t)=>({id:"".concat(t+1),date:"",minutes:"",title:"",orateur:""}));function w(){let[e,t]=a.useState(j),[r,w]=a.useState(N),[y,T]=a.useState(null),{toast:S}=(0,b.dj)(),A=(e,t)=>{y&&T(r=>r?{...r,[e]:t}:null)};return(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 h-full items-start",children:[(0,s.jsxs)(n.Zp,{className:"h-full flex flex-col no-print",children:[(0,s.jsx)(n.aR,{children:(0,s.jsx)(n.ZB,{children:"Th\xe8mes des besoins de l'assembl\xe9e"})}),(0,s.jsxs)(n.Wu,{className:"flex-grow flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex-shrink-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,s.jsx)(l.Button,{variant:"outline",size:"icon",onClick:()=>{let e={id:"theme-".concat(Date.now()),title:"Nouveau th\xe8me",description:"",orateur:"",programmedDate:""};t(t=>[...t,e]),T(e),S({title:"Nouveau th\xe8me ajout\xe9."})},children:(0,s.jsx)(u.A,{})}),(0,s.jsx)(l.Button,{variant:"outline",size:"icon",className:"text-destructive hover:text-destructive",onClick:()=>{if(y){t(e=>e.filter(e=>e.id!==y.id));let e=y.title;T(null),S({title:'Th\xe8me "'.concat(e,'" supprim\xe9.'),variant:"destructive"})}},disabled:!y,children:(0,s.jsx)(m.A,{})}),(0,s.jsxs)(l.Button,{onClick:()=>{y&&(t(e=>e.map(e=>e.id===y.id?y:e)),S({title:'Th\xe8me "'.concat(y.title,'" sauvegard\xe9.')}))},disabled:!y,className:"ml-auto",children:[(0,s.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(i.p,{id:"theme-title",placeholder:"Titre du th\xe8me",value:(null==y?void 0:y.title)||"",onChange:e=>A("title",e.target.value),disabled:!y})}),(0,s.jsx)("div",{children:(0,s.jsx)(c.T,{id:"theme-description",placeholder:"Description...",className:"h-20",value:(null==y?void 0:y.description)||"",onChange:e=>A("description",e.target.value),disabled:!y})})]})]}),(0,s.jsx)("div",{className:"flex-grow mt-4 border rounded-md overflow-hidden",children:(0,s.jsx)(d.F,{className:"h-full",children:(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{className:"sticky top-0 bg-muted",children:(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nd,{className:"w-2/3",children:"Titre"}),(0,s.jsx)(o.nd,{children:"Orateur"}),(0,s.jsx)(o.nd,{children:"Programm\xe9"})]})}),(0,s.jsx)(o.BF,{children:e.map(e=>(0,s.jsxs)(o.Hj,{onClick:()=>{T(e)},className:(0,v.cn)("cursor-pointer",(null==y?void 0:y.id)===e.id&&"bg-accent"),children:[(0,s.jsx)(o.nA,{children:e.title}),(0,s.jsx)(o.nA,{children:e.orateur}),(0,s.jsx)(o.nA,{children:e.programmedDate})]},e.id))})]})})})]})]}),(0,s.jsxs)(n.Zp,{className:"h-full flex flex-col",children:[(0,s.jsx)(n.aR,{className:"no-print",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(n.ZB,{children:"Besoins de l'assembl\xe9e programm\xe9s"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(h.A,{className:"h-5 w-5"})}),(0,s.jsx)(g.A,{type:"programme_week",label:"Enregistrer & Envoyer",getPayload:()=>({generatedAt:new Date().toISOString(),weeks:[{weekStart:new Date().toISOString(),themes:e,programmedNeeds:r}]}),save:()=>{try{localStorage.setItem("programme-besoins-assemblee",JSON.stringify({themes:e,programmedNeeds:r,savedAt:new Date().toISOString()}))}catch(e){}}}),(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:()=>{window.print()},children:(0,s.jsx)(x.A,{className:"h-5 w-5"})}),(0,s.jsx)(l.Button,{variant:"ghost",size:"icon",children:(0,s.jsx)(p.A,{className:"h-5 w-5"})})]})]})}),(0,s.jsxs)(n.Wu,{className:"flex-grow overflow-hidden printable-area",children:[(0,s.jsx)("div",{className:"print-only hidden my-4",children:(0,s.jsx)("h2",{className:"text-xl font-bold text-center",children:"Besoins de l'assembl\xe9e programm\xe9s"})}),(0,s.jsx)("div",{className:"border rounded-md h-full",children:(0,s.jsx)(d.F,{className:"h-full",children:(0,s.jsxs)(o.XI,{children:[(0,s.jsx)(o.A0,{className:"sticky top-0 bg-muted",children:(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nd,{className:"w-1/6",children:"Date"}),(0,s.jsx)(o.nd,{className:"w-[50px]",children:"min."}),(0,s.jsx)(o.nd,{children:"Titre"}),(0,s.jsx)(o.nd,{className:"w-1/4",children:"Orateur"})]})}),(0,s.jsx)(o.BF,{children:r.map(e=>(0,s.jsxs)(o.Hj,{children:[(0,s.jsx)(o.nA,{children:e.date}),(0,s.jsx)(o.nA,{children:e.minutes}),(0,s.jsx)(o.nA,{children:e.title}),(0,s.jsx)(o.nA,{children:e.orateur})]},e.id))})]})})})]})]})]})}},86948:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>u});var s=r(95155),a=r(12115),l=r(64269);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});n.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight text-primary",r),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},87270:(e,t,r)=>{"use strict";r.d(t,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>n,nA:()=>u,nd:()=>c});var s=r(95155),a=r(12115),l=r(64269);let n=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,l.cn)("w-full caption-bottom text-sm",r),...a})})});n.displayName="Table";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("thead",{ref:t,className:(0,l.cn)("[&_tr]:border-b",r),...a})});i.displayName="TableHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,l.cn)("[&_tr:last-child]:border-0",r),...a})});d.displayName="TableBody",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...a})}).displayName="TableFooter";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("tr",{ref:t,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...a})});o.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("th",{ref:t,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...a})});c.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("td",{ref:t,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("caption",{ref:t,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",r),...a})}).displayName="TableCaption"}},e=>{e.O(0,[830,4733,9034,4584,8441,1255,7358],()=>e(e.s=36885)),_N_E=e.O()}]);