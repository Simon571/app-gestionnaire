(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2058],{11647:(e,t,s)=>{"use strict";s.d(t,{E:()=>n});var r=s(95155);s(12115);var i=s(83101),l=s(64269);let a=(0,i.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:s,...i}=e;return(0,r.jsx)("div",{className:(0,l.cn)(a({variant:s}),t),...i})}},26333:(e,t,s)=>{"use strict";s.d(t,{AM:()=>n,Wv:()=>d,hl:()=>o});var r=s(95155),i=s(12115),l=s(31138),a=s(64269);let n=l.bL,d=l.l9,o=i.forwardRef((e,t)=>{let{className:s,align:i="center",sideOffset:n=4,...d}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsx)(l.UC,{ref:t,align:i,sideOffset:n,className:(0,a.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...d})})});o.displayName=l.UC.displayName},31120:(e,t,s)=>{"use strict";s.d(t,{T:()=>a});var r=s(95155),i=s(12115),l=s(64269);let a=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...i})});a.displayName="Textarea"},40099:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var r=s(95155),i=s(12115),l=s(3998),a=s(65142),n=s(11647),d=s(64269),o=s(11186),c=s(26333),u=s(30848),m=s(72251),p=s(26615),h=s(59007),x=s(73180),f=s(94979),g=s(65065),b=s(13630),v=s(76251),y=s(55666),j=s(2559),N=s(32265),w=s(78503),C=s(6943),S=s(96711),_=s(61470),k=s(38621),D=s(32078),E=s(51909),P=s(64480),M=s(87915),A=s(50425),B=s(10960),I=s(15894),O=s(37369),R=s(63817),L=s(31120),G=s(76444),z=s(6430);let q={opening:"42",middle:"160",closing:"34"},V=e=>{let t=[e.firstName,e.middleName,e.lastName,e.suffix].filter(Boolean).join(" ").trim();return e.displayName&&e.displayName.trim()||t||"Sans nom"},J=e=>{let{value:t,onChange:s,options:a,placeholder:n,className:o,disabled:h=!1,emptyLabel:x="Aucune personne disponible",valueLabel:f=null}=e,[g,b]=i.useState(!1),v=i.useMemo(()=>{var e;return null!=(e=a.find(e=>e.value===t))?e:null},[a,t]),y=i.useMemo(()=>{var e;return f&&t?f:null!=(e=null==v?void 0:v.label)?e:null},[null==v?void 0:v.label,t,f]),j=i.useCallback(e=>{if(t===e)return void s(null);s(e)},[s,t]);return(0,r.jsxs)(c.AM,{open:g&&!h,onOpenChange:b,children:[(0,r.jsx)(c.Wv,{asChild:!0,children:(0,r.jsxs)(l.Button,{type:"button",variant:"outline",role:"combobox","aria-expanded":g,disabled:h,className:(0,d.cn)("w-44 h-6 justify-between text-xs truncate px-2",h&&"opacity-60 cursor-not-allowed",o),children:[(0,r.jsx)("span",{className:"truncate text-left",children:y||n}),(0,r.jsx)(u.A,{className:"ml-2 h-3 w-3 shrink-0 opacity-50"})]})}),(0,r.jsx)(c.hl,{className:"p-0 w-64",align:"start",children:(0,r.jsxs)(R.uB,{children:[(0,r.jsx)(R.G7,{placeholder:"Rechercher...",className:"text-xs"}),(0,r.jsxs)(R.oI,{children:[(0,r.jsx)(R.xL,{children:x}),(0,r.jsxs)(R.L$,{children:[a.map(e=>(0,r.jsxs)(R.h_,{value:e.label,className:"text-xs",onSelect:()=>{j(e.value),b(!1)},children:[(0,r.jsx)(m.A,{className:(0,d.cn)("mr-2 h-3 w-3",(null==v?void 0:v.value)===e.value?"opacity-100":"opacity-0")}),(0,r.jsx)("span",{className:"truncate",children:e.label})]},e.value)),t&&(0,r.jsxs)(R.h_,{value:"__clear__",className:"text-xs text-red-600",onSelect:()=>{s(null),b(!1)},children:[(0,r.jsx)(p.A,{className:"mr-2 h-3 w-3"}),"Effacer la s\xe9lection"]})]})]})]})})]})},T="yyyy-MM-dd",F="vcm-manager-schedule",W=["Aucun","Premier contact","Nouvelle visite","Cours biblique","Discours d'\xe9l\xe8ve","Vid\xe9o","Discours","Discussion","Engage la conversation","Entretiens l'int\xe9r\xeat","Fais des disciples","Explique tes croyances - Discours","Explique tes croyances - D\xe9mo","Engagement","Entretien d'int\xe9r\xeat","Autre"];function U(){var e,t,s,d;let[u,m]=i.useState(!1),[p,R]=i.useState(()=>(0,_.k)(new Date,{weekStartsOn:1})),[U,$]=i.useState(1),[Z,H]=i.useState(()=>({...q})),[K,Q]=i.useState({}),[X,Y]=i.useState("2"),{syncProgrammeWeek:ee,isSyncing:et}=(0,O.w)();i.useEffect(()=>{m(!0)},[]);let[es,er]=i.useState(null),[ei,el]=i.useState(null),[ea,en]=i.useState(null),ed=i.useRef("/vcm/fr/vcm-program.normalized.json?v=".concat(Date.now())),eo=i.useRef("/vcm-program.json?v=".concat(Date.now())),[ec,eu]=i.useState({}),[em,ep]=i.useState({}),[eh,ex]=i.useState(""),ef=i.useCallback(e=>e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/['’]/g," ").replace(/\s+/g," ").trim():"",[]),eg=i.useCallback(e=>{let t="".concat(ef(e.title)," ").concat(ef(e.category)).trim();return t||"discours"!==e.type?t.includes("engage la conversation")||t.includes("engagement")?"Engagement":t.includes("entretiens l interet")||t.includes("entretien l interet")||t.includes("interet")?"Entretien d'int\xe9r\xeat":t.includes("discussion")?"Discussion":t.includes("discours")||"discours"===e.type?"Discours":"Autre":"Discours"},[ef]),{people:eb,isLoaded:ev}=(0,A.d)(),{toast:ey}=(0,I.dj)();i.useEffect(()=>{try{let e=window.localStorage.getItem(F);if(!e)return;let t=JSON.parse(e);if(t&&"object"==typeof t){let e={};Object.entries(t).forEach(t=>{let[s,r]=t;if(r&&"object"==typeof r&&"ministryCategories"in r){let t=r.ministryCategories;t&&"object"==typeof t&&(e[s]={...t})}}),Object.keys(e).length&&ep(e)}}catch(e){console.error("Erreur lors du chargement des cat\xe9gories minist\xe8re stock\xe9es :",e)}},[]),i.useEffect(()=>{let e=(0,k.GP)(p,T);try{let s=window.localStorage.getItem(F);if(!s){Q({}),ex(""),H({...q});return}let r=JSON.parse(s),i=null==r?void 0:r[e];if(i&&"object"==typeof i){var t;Q(null!=(t=i.assignments)?t:{}),i.songs&&"object"==typeof i.songs?H(e=>({...e,...i.songs})):H({...q}),"string"==typeof i.notes?ex(i.notes):ex(""),(1===i.hall||2===i.hall)&&$(i.hall),i.ministryCategories&&"object"==typeof i.ministryCategories&&(eu({...i.ministryCategories}),ep(t=>({...t,[e]:{...i.ministryCategories}})))}else Q({}),ex(""),H({...q})}catch(e){console.error("Erreur lors du chargement des donn\xe9es VCM pour la semaine :",e)}},[p]),i.useEffect(()=>{let e=!1;return fetch(ed.current,{cache:"no-store"}).then(e=>e.json()).then(t=>{e||el(t)}).catch(t=>{e||console.error("Erreur lors du chargement des donn\xe9es VCM normalis\xe9es:",t)}),()=>{e=!0}},[]),i.useEffect(()=>{if(!ei)return void en(null);let e=(0,k.GP)(p,T);console.log("\uD83D\uDD0D Recherche semaine pour:",e);let t=ei.weeks.find(t=>{if(t.startDate===e)return!0;if(t.startDate&&t.endDate){let s=new Date(t.startDate),r=new Date(t.endDate),i=new Date(e);return i>=s&&i<=r}return!1});t?(console.log("✅ Semaine trouv\xe9e:",t.weekTitle),en(t)):(console.log("❌ Aucune semaine trouv\xe9e. Semaines disponibles:",ei.weeks.map(e=>"".concat(e.startDate," - ").concat(e.weekTitle))),en(null))},[p,ei]),i.useEffect(()=>{let e=(0,k.GP)(p,T);fetch(eo.current,{cache:"no-store"}).then(e=>e.json()).then(t=>{t[e]?er(t[e]):er(null)}).catch(e=>{console.error("Erreur lors du chargement des donn\xe9es d'attribution VCM:",e)})},[p]);let ej=i.useMemo(()=>{let e=[{id:"president",title:"Pr\xe9sident",type:"assignment",duration:null},{id:"prayer",title:"Pri\xe8re du d\xe9but",type:"assignment",duration:null},{id:"discourse",title:"Des mani\xe8res de r\xe9v\xe9rer notre grand Dieu",type:"discourse",duration:10,number:1},{id:"gems",title:"Perles spirituelles",type:"gems",duration:10,number:2},{id:"bible",title:"Lecture de la Bible",type:"bible_reading",duration:null,number:3}],t=[{id:"life1",title:"Te sers-tu de l'appendice \xab Des v\xe9rit\xe9s bibliques toutes simples \xbb",type:"part",duration:15,number:7,category:"Partie Vie Chr\xe9tienne"},{id:"life2",title:"",type:"part",duration:0,number:null,category:"Partie Vie Chr\xe9tienne"},{id:"life3",title:"",type:"part",duration:0,number:null,category:"Partie Vie Chr\xe9tienne"},{id:"study",title:"\xc9tude biblique de l'assembl\xe9e",description:"(30 min) lft histoires 24-25.",type:"study",duration:30,number:null},{id:"final_prayer",title:"Pri\xe8re finale",type:"prayer",duration:null,number:null}],s=e;if(ea){let t=ea.sections.find(e=>"joyaux"===e.key);t&&t.items.length>0&&(s=[e[0],e[1]],t.items.forEach((e,t)=>{let r="number"==typeof e.number?e.number:t+1;s.push({id:"treasure".concat(t+1),title:e.theme||e.title,type:e.type,duration:e.duration||10,number:r})}),s.find(e=>"bible_reading"===e.type)||s.push(e[4]))}let r=[{id:"min1",title:"Engage la conversation",type:"ministry",duration:1,number:4,category:"Engage la conversation"},{id:"min2",title:"Engage la conversation",type:"ministry",duration:2,number:5,category:"Engage la conversation"},{id:"min3",title:"Entretiens l'int\xe9r\xeat",type:"ministry",duration:3,number:6,category:"Entretiens l'int\xe9r\xeat"},{id:"min4",title:"Fais des disciples",type:"ministry",duration:5,number:7,category:"Fais des disciples"}];if(ea){let e=ea.sections.find(e=>"ministere"===e.key);e&&e.items.length>0&&(r=e.items.map((e,t)=>{let s="number"==typeof e.number?e.number:t+4;return{id:"min".concat(t+1),title:e.theme||e.title,type:e.type||"ministry",duration:e.duration||0,number:s,category:e.title}}))}let i=t;if(ea){let e=ea.sections.find(e=>"vie_chretienne"===e.key);if(e&&e.items.length>0){let s=e.items.filter(e=>"study"!==e.type),r=e.items.find(e=>"study"===e.type);i=[...s.map((e,t)=>{let s="number"==typeof e.number?e.number:t+7;return{id:"life".concat(t+1),title:e.theme||e.title,type:"part",duration:e.duration||0,number:s,category:"Partie Vie Chr\xe9tienne"}}),r?{id:"study",title:r.theme||r.title,type:"study",duration:r.duration||30,number:"number"==typeof r.number?r.number:null,category:void 0}:t[3],t[4]]}}return{weekPeriod:(null==ea?void 0:ea.weekTitle)||(0,k.GP)(p,"MMMM dd",{locale:M.fr})+"-"+(0,k.GP)((0,D.f)(p,6),"dd",{locale:M.fr}),book:"Joyaux de la Parole de Dieu",sections:{treasures:s,ministry:r,christianLife:i}}},[ea,p]);i.useEffect(()=>{if(!ej.sections.ministry.length)return void eu({});let e=(0,k.GP)(p,T),t=em[e];if(t)return void eu({...t});let s={};ej.sections.ministry.forEach(e=>{s[e.id]=e.category||eg(e)}),eu(s),ep(t=>({...t,[e]:{...s}}))},[p,ej.sections.ministry,em,eg]),i.useEffect(()=>{if(0===Object.keys(K).length)return;let e="reunion_assignments";try{let t={...JSON.parse(window.localStorage.getItem(e)||"{}"),...K};window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error("Erreur lors de la sauvegarde automatique:",e)}},[K]);let eN=i.useMemo(()=>[{id:"1",firstName:"Jean",lastName:"Dupont",spiritual:{active:!0,function:"elder"},gender:"male",child:!1},{id:"2",firstName:"Marie",lastName:"Martin",spiritual:{active:!0,function:"servant"},gender:"female",child:!1},{id:"3",firstName:"Pierre",lastName:"Bernard",spiritual:{active:!0,function:"publisher"},gender:"male",child:!1},{id:"4",firstName:"Sophie",lastName:"Durand",spiritual:{active:!0,function:"publisher"},gender:"female",child:!1},{id:"5",firstName:"Paul",lastName:"Moreau",spiritual:{active:!0,function:"unbaptized"},gender:"male",child:!0}],[]),ew=i.useMemo(()=>ev&&eb.length>0?eb.filter(e=>{var t;return null==(t=e.spiritual)?void 0:t.active}):eN,[eb,ev,eN]),eC=i.useMemo(()=>ev&&eb.length>0?eb.filter(e=>{var t;return(null==(t=e.spiritual)?void 0:t.function)==="elder"}):eN.filter(e=>"elder"===e.spiritual.function),[eb,ev,eN]),eS=i.useMemo(()=>ev&&eb.length>0?eb.filter(e=>{var t,s;return(null==(t=e.spiritual)?void 0:t.function)==="elder"||(null==(s=e.spiritual)?void 0:s.function)==="servant"}):eN.filter(e=>"elder"===e.spiritual.function||"servant"===e.spiritual.function),[eb,ev,eN]),e_=i.useMemo(()=>ev&&eb.length>0?eb.filter(e=>"male"===e.gender||!0===e.child):eN.filter(e=>"male"===e.gender||!0===e.child),[eb,ev,eN]),ek=i.useMemo(()=>ev&&eb.length>0?eb.filter(e=>"male"===e.gender):eN.filter(e=>"male"===e.gender),[eb,ev,eN]),eD=i.useMemo(()=>{let e=ew.filter(e=>{var t,s;return!!(null==e||null==(s=e.assignments)||null==(t=s.gems)?void 0:t.bibleReading)}).filter(e=>"male"===e.gender);return e.length>0?e:e_.filter(e=>"male"===e.gender)},[ew,e_]),eE=i.useMemo(()=>{let e=ew.filter(e=>{var t,s;return!!(null==e||null==(s=e.assignments)||null==(t=s.christianLife)?void 0:t.reader)}).filter(e=>"male"===e.gender);return e.length>0?e:ek},[ew,ek]),eP=i.useMemo(()=>{let e=ew.filter(e=>{var t,s;return!!(null==e||null==(s=e.assignments)||null==(t=s.ministry)?void 0:t.interlocutor)});return e.length>0?e:e_},[ew,e_]),eM=i.useMemo(()=>{let e=new Map;return(ev&&eb.length>0?eb:eN).forEach(t=>{(null==t?void 0:t.id)&&e.set(t.id,t)}),e},[ev,eb,eN]),eA=i.useCallback(e=>e.filter(e=>!!(null==e?void 0:e.id)).map(e=>({value:e.id,label:V(e)})),[]),eB=i.useMemo(()=>({active:eA(ew),elders:eA(eC),eldersAndServants:eA(eS),brothers:eA(ek),brothersAndChildren:eA(e_),interlocutors:eA(eP),bibleReaders:eA(eD),congregationBibleStudyReaders:eA(eE)}),[ew,eC,eS,ek,e_,eP,eD,eE,eA]),eI=Array.from({length:200},(e,t)=>(t+1).toString()),eO=i.useMemo(()=>[{id:"treasures_president",label:"Pr\xe9sident",maxCount:3,defaultCount:1},{id:"treasures_opening_prayer",label:"Pri\xe8re d'ouverture",maxCount:3,defaultCount:1},{id:"treasures_discourse",label:"Discours",maxCount:3,defaultCount:1},{id:"treasures_gems",label:"Joyaux",maxCount:3,defaultCount:1},{id:"bible_reading",label:"Lecture biblique",maxCount:5,defaultCount:1},{id:"ministry_parts",label:"Parties du minist\xe8re",maxCount:10,defaultCount:3},{id:"life_parts",label:"Vie chr\xe9tienne",maxCount:5,defaultCount:2},{id:"study_conductor",label:"Conducteur \xe9tude",maxCount:3,defaultCount:1},{id:"study_reader",label:"Lecteur \xe9tude",maxCount:3,defaultCount:1},{id:"closing_prayer",label:"Pri\xe8re de fin",maxCount:3,defaultCount:1}],[]),eR=i.useCallback(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U;return t?"hall".concat(s,":").concat(e):e},[U]),eL=i.useCallback(function(e){var t;let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U;return null!=(t=K[eR(e,s,r)])?t:null},[K,eR,U]),eG=i.useCallback(function(e,t){let s=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:U,i=eR(e,s,r);Q(e=>{let s={...e};return t&&""!==t.trim()?s[i]=t:delete s[i],s})},[eR,U]),ez=i.useCallback(e=>{if(!e)return"Non attribu\xe9";let t=eM.get(e);return t?V(t):"Non trouv\xe9"},[eM]),eq=i.useCallback(e=>{if(!e)return null;let t=eM.get(e);return t?V(t):e},[eM]),eV=i.useCallback(e=>{$(e)},[]),eJ=i.useCallback(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U,r=eL(e,t,s);return{value:r,valueLabel:eq(r),onChange:r=>eG(e,r,t,s)}},[U,eq,eL,eG]),eT=e=>{let{studentId:t,assistantId:s}=e;return(0,r.jsxs)("div",{className:"p-3 space-y-2 min-w-[200px]",children:[(0,r.jsx)("div",{className:"font-semibold text-sm border-b pb-1",children:"Participation du cahier"}),(0,r.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"\xc9l\xe8ve/Student:"}),(0,r.jsx)("div",{className:"text-gray-700",children:ez(t)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Interlocuteur/Assistant:"}),(0,r.jsx)("div",{className:"text-gray-700",children:ez(s)})]})]})]})},eF=e=>{R("prev"===e?(0,E.k)(p,1):(0,P.J)(p,1))},eW=i.useCallback(e=>{if(0===Object.entries(e.selectedRoles).filter(e=>{let[t,s]=e;return s>0}).length)return void ey({title:"Saisie automatique",description:"Aucun r\xf4le s\xe9lectionn\xe9."});let t=0,s={},r="hall".concat(U,":"),i=new Set(Object.values(Object.entries(K).reduce((e,t)=>{let[s,i]=t;return s.startsWith(r)&&i&&(e[s]=i),e},{}))),l=function(r,l){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=eR(r,a,U);if(K[n]||s[n]){K[n]&&i.add(K[n]);return}let d=(t=>{if(!t.length)return null;let s=[...t];"random"===e.sortCriteria?s=s.sort(()=>Math.random()-.5):"alphabetical"===e.sortCriteria&&(s=s.sort((e,t)=>(e.name||"").localeCompare(t.name||"")));let r=s.find(e=>(null==e?void 0:e.id)&&!i.has(e.id));return(null==r?void 0:r.id)?(i.add(r.id),r.id):null})(l);d&&(s[n]=d,t++)};if(e.selectedRoles.treasures_president>0&&l("treasures_president",eS),e.selectedRoles.treasures_opening_prayer>0&&l("treasures_opening_prayer",ek),e.selectedRoles.treasures_discourse>0&&l("treasures_discourse",eS),e.selectedRoles.treasures_gems>0&&l("treasures_gems",eS),e.selectedRoles.bible_reading>0&&l("bible_reading",eD),e.selectedRoles.ministry_parts>0&&ej.sections.ministry.forEach((e,t)=>{l("ministry_".concat(t,"_student"),ew),l("ministry_".concat(t,"_assistant"),eP)}),e.selectedRoles.life_parts>0&&ej.sections.christianLife.filter(e=>"study"!==e.type&&"prayer"!==e.type).forEach((e,t)=>{l("life_".concat(t,"_participant"),eS)}),e.selectedRoles.study_conductor>0&&l("study_conductor",eC,!1),e.selectedRoles.study_reader>0&&l("study_reader",eE,!1),e.selectedRoles.closing_prayer>0&&l("closing_prayer",ek,!1),0===t)return void ey({title:"Saisie automatique",description:"Aucune attribution suppl\xe9mentaire \xe0 remplir pour cette salle."});Q(e=>({...e,...s})),ey({title:"Saisie automatique",description:"".concat(t," attributions ont \xe9t\xe9 compl\xe9t\xe9es pour la salle ").concat(U,".")})},[ew,K,ek,e_,U,eC,eS,eR,ey,ej.sections.christianLife,ej.sections.ministry]);i.useCallback(()=>{let e=(0,k.GP)(p,T);try{let t=window.localStorage.getItem(F),s=t?JSON.parse(t):{},r={...ec};s[e]={assignments:K,songs:Z,hall:U,ministryCategories:r,notes:eh,savedAt:new Date().toISOString()},window.localStorage.setItem(F,JSON.stringify(s)),ep(t=>({...t,[e]:r})),ey({title:"Donn\xe9es sauvegard\xe9es",description:"Les informations de la semaine ont \xe9t\xe9 enregistr\xe9es."})}catch(e){console.error("Erreur lors de la sauvegarde des donn\xe9es VCM :",e),ey({title:"Erreur de sauvegarde",description:"Impossible d'enregistrer les donn\xe9es.",variant:"destructive"})}},[K,Z,U,ec,eh,p,ey]);let[eU,e$]=i.useState(!1),eZ=i.useRef(!0);i.useEffect(()=>{if(eZ.current){eZ.current=!1;return}if(0===Object.keys(K).length)return;let e=setTimeout(async()=>{try{let e=(0,k.GP)(p,T),t=window.localStorage.getItem(F),s=t?JSON.parse(t):{};s[e]={assignments:K,songs:Z,hall:U,ministryCategories:ec,notes:eh,savedAt:new Date().toISOString()},window.localStorage.setItem(F,JSON.stringify(s))}catch(e){console.error("Erreur lors de la sauvegarde locale auto:",e)}let e=(0,D.f)(p,6),t=[];Object.entries(K).forEach(e=>{let[s,r]=e;if("string"==typeof r&&r){let e=eb.find(e=>e.id===r);e&&t.push({personId:e.id,personName:e.displayName,role:s,date:p.toISOString()})}}),await ee({weekStart:p.toISOString(),weekEnd:e.toISOString(),weekLabel:"".concat((0,k.GP)(p,"dd MMM",{locale:M.fr})," - ").concat((0,k.GP)(e,"dd MMM yyyy",{locale:M.fr})),assignments:K,songs:Z,participants:t,hall:U.toString()})},2e3);return()=>clearTimeout(e)},[K,Z,U,ec,eh,p,eb,ee]);let eH=i.useCallback(async()=>{e$(!0);try{let e=(0,k.GP)(p,T),t=window.localStorage.getItem(F),s=t?JSON.parse(t):{},r={...ec};s[e]={assignments:K,songs:Z,hall:U,ministryCategories:r,notes:eh,savedAt:new Date().toISOString()},window.localStorage.setItem(F,JSON.stringify(s)),ep(t=>({...t,[e]:r}))}catch(e){console.error("Erreur lors de la sauvegarde locale :",e),ey({title:"Erreur de sauvegarde",description:"Impossible d'enregistrer les donn\xe9es localement.",variant:"destructive"}),e$(!1);return}try{(0,k.GP)(p,T);let e=(0,D.f)(p,6),t=[],s=(e,s)=>{if(!s)return;let r=eb.find(e=>e.id===s);r&&t.push({personId:r.id,personName:r.displayName,role:e,date:p.toISOString()})};Object.entries(K).forEach(e=>{let[t,r]=e;"string"==typeof r?s(t,r):r&&"object"==typeof r&&("studentId"in r&&"string"==typeof r.studentId&&s("".concat(t,"_student"),r.studentId),"assistantId"in r&&"string"==typeof r.assistantId&&s("".concat(t,"_assistant"),r.assistantId))});let r={weekStart:p.toISOString(),weekEnd:e.toISOString(),weekLabel:"".concat((0,k.GP)(p,"dd MMM",{locale:M.fr})," - ").concat((0,k.GP)(e,"dd MMM yyyy",{locale:M.fr})),meetingType:"vie_chretienne_ministere",assignments:K,songs:Z,participants:t,hall:U},i=await (0,B.e)("/api/publisher-app/send",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"programme_week",payload:r,notify:!0})});if(i.ok)ey({title:"Enregistr\xe9 et envoy\xe9",description:"Le programme a \xe9t\xe9 sauvegard\xe9 et envoy\xe9 vers Publisher App."});else{let e=await i.json().catch(()=>({}));throw Error(e.error||"Erreur lors de l'envoi")}}catch(e){console.error("Failed to send to Flutter",e),ey({title:"Erreur d'envoi",description:e instanceof Error?e.message:"Donn\xe9es sauvegard\xe9es mais impossible d'envoyer vers Publisher App.",variant:"destructive"})}finally{e$(!1)}},[K,Z,U,ec,eh,p,eb,ey]),eK=eJ("treasures_president"),eQ=eJ("treasures_opening_prayer"),eX=eJ("treasures_discourse"),eY=eJ("treasures_gems"),e0=eJ("bible_reading"),e1=eJ("study_conductor",!1),e2=eJ("study_reader",!1),e3=eJ("closing_prayer",!1);return(0,r.jsx)("div",{className:"h-screen bg-gray-50 p-1 overflow-hidden",children:(0,r.jsxs)("div",{className:"max-w-full mx-auto h-full flex flex-col",children:[(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm mb-1 p-2 flex-shrink-0",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>eF("prev"),className:"h-8 w-8 p-0",children:(0,r.jsx)(h.A,{className:"h-4 w-4 rotate-90"})}),(0,r.jsx)("span",{className:"text-xs font-medium min-w-[100px] text-center",children:u?"".concat((0,k.GP)(p,"MMM dd",{locale:M.fr})," - ").concat((0,k.GP)((0,D.f)(p,6),"dd, yyyy",{locale:M.fr})):"..."}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>eF("next"),className:"h-8 w-8 p-0",children:(0,r.jsx)(h.A,{className:"h-4 w-4 -rotate-90"})}),(0,r.jsxs)("div",{className:"flex items-center gap-1 ml-4",children:[(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:eH,disabled:eU,className:"h-8 px-2 text-green-600 hover:text-green-700 hover:bg-green-50",title:"Enregistrer et envoyer vers Publisher App",children:eU?(0,r.jsx)("span",{className:"animate-spin h-4 w-4 border-2 border-green-600 border-t-transparent rounded-full"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.A,{className:"h-4 w-4"}),(0,r.jsx)(f.A,{className:"h-4 w-4 ml-1"})]})}),(0,r.jsx)(z.R,{roles:eO,onConfirm:eW}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>{Q({}),eu({}),ex("");let e=(0,k.GP)(p,T);ep(t=>{if(!(e in t))return t;let{[e]:s,...r}=t;return r}),ey({title:"Effacer attribution",description:"Toutes les attributions ont \xe9t\xe9 effac\xe9es"})},className:"h-8 w-8 p-0",title:"Effacer attribution",children:(0,r.jsx)(g.A,{className:"h-4 w-4"})}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>{Q({}),H({opening:"",middle:"",closing:""}),eu({}),ex("");let e=(0,k.GP)(p,T);ep(t=>{if(!(e in t))return t;let{[e]:s,...r}=t;return r}),ey({title:"Supprimer donn\xe9es",description:"Donn\xe9es de la r\xe9union supprim\xe9es"})},className:"h-8 w-8 p-0",title:"Supprimer donn\xe9es",children:(0,r.jsx)(b.A,{className:"h-4 w-4"})})]})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Vie chr\xe9tienne et minist\xe8re"}),(0,r.jsx)("h2",{className:"text-red-600 font-bold text-sm",children:u?"".concat((0,k.GP)(p,"MMMM dd",{locale:M.fr}),"-").concat((0,k.GP)((0,D.f)(p,6),"dd",{locale:M.fr})):"..."}),("10-06"===(0,k.GP)(p,"MM-dd")||"04-06"===(0,k.GP)(p,"MM-dd"))&&(0,r.jsx)("h2",{className:"text-sm font-semibold",children:"Assembl\xe9e de circonscription"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"text-xs",children:"Cantiques"}),(0,r.jsxs)(o.l6,{value:Z.opening,onValueChange:e=>H(t=>({...t,opening:e})),children:[(0,r.jsx)(o.bq,{className:"w-16 h-8 text-xs",children:(0,r.jsx)(o.yv,{})}),(0,r.jsx)(o.gC,{children:eI.map(e=>(0,r.jsx)(o.eb,{value:e,children:e},e))})]}),(0,r.jsxs)(o.l6,{value:Z.middle,onValueChange:e=>H(t=>({...t,middle:e})),children:[(0,r.jsx)(o.bq,{className:"w-16 h-8 text-xs",children:(0,r.jsx)(o.yv,{})}),(0,r.jsx)(o.gC,{children:eI.map(e=>(0,r.jsx)(o.eb,{value:e,children:e},e))})]}),(0,r.jsxs)(o.l6,{value:Z.closing,onValueChange:e=>H(t=>({...t,closing:e})),children:[(0,r.jsx)(o.bq,{className:"w-16 h-8 text-xs",children:(0,r.jsx)(o.yv,{})}),(0,r.jsx)(o.gC,{children:eI.map(e=>(0,r.jsx)(o.eb,{value:e,children:e},e))})]})]}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>{window.print()},className:"h-8 w-8 p-0",title:"Impression",children:(0,r.jsx)(v.A,{className:"h-4 w-4"})}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>{window.open("https://wol.jw.org/fr","_blank")},className:"h-8 w-8 p-0",title:"wol.jw.org",children:(0,r.jsx)(y.A,{className:"h-4 w-4"})})]})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-1",children:[(0,r.jsxs)("div",{className:"border border-blue-300 rounded",children:[(0,r.jsx)("div",{className:"bg-blue-200 px-2 py-1 border-b border-blue-300",children:(0,r.jsxs)("h3",{className:"font-semibold text-blue-900 flex items-center gap-2 text-sm",children:[(0,r.jsx)(j.A,{className:"h-3 w-3"}),"\uD83D\uDC8E Joyaux de la Parole de Dieu"]})}),(0,r.jsxs)("div",{className:"p-2 space-y-2 bg-white",children:[(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs w-16",children:"Pr\xe9sident"}),(0,r.jsx)(J,{...eK,options:eB.eldersAndServants,placeholder:"Pr\xe9sident",disabled:0===eB.eldersAndServants.length})]}),(0,r.jsx)("div",{}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs w-20",children:"Pri\xe8re d'ouverture"}),(0,r.jsx)(J,{...eQ,options:eB.brothers,placeholder:"Fr\xe8re",disabled:0===eB.brothers.length})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,r.jsxs)("div",{className:"col-span-3 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs w-16",children:"Discours"}),(0,r.jsx)(J,{...eX,options:eB.eldersAndServants,placeholder:"Orateur",disabled:0===eB.eldersAndServants.length})]}),(0,r.jsxs)("div",{className:"col-span-5 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs",children:"1."}),(0,r.jsx)(a.p,{className:"h-6 text-xs flex-1",placeholder:(null==(e=ej.sections.treasures.find(e=>"discours"===e.type||"discourse"===e.type))?void 0:e.title)||"Discours"}),(0,r.jsxs)(n.E,{variant:"secondary",className:"bg-blue-200 text-blue-800 text-xs h-5",children:[(null==(t=ej.sections.treasures.find(e=>"discours"===e.type||"discourse"===e.type))?void 0:t.duration)||10," min."]}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,r.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})]}),(0,r.jsxs)("div",{className:"col-span-4 flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-xs w-20",children:"2. Perles spirituelles"}),(0,r.jsx)(J,{...eY,options:eB.eldersAndServants,placeholder:"Participant",disabled:0===eB.eldersAndServants.length}),(0,r.jsx)(n.E,{variant:"secondary",className:"bg-blue-200 text-blue-800 text-xs h-5",children:"10 min."}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,r.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Button,{variant:1===U?"default":"outline",size:"sm",onClick:()=>eV(1),className:"h-6 w-6 p-0 ".concat(1===U?"bg-blue-500 text-white":"bg-blue-100 text-blue-800 border-blue-300"),children:"1"}),(0,r.jsx)(l.Button,{variant:2===U?"default":"outline",size:"sm",onClick:()=>eV(2),className:"h-6 w-6 p-0 ".concat(2===U?"bg-blue-500 text-white":"bg-blue-100 text-blue-800 border-blue-300"),children:"2"})]}),(0,r.jsx)("div",{}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(o.l6,{value:X,onValueChange:Y,children:[(0,r.jsx)(o.bq,{className:"w-12 h-6 text-xs",children:(0,r.jsx)(o.yv,{})}),(0,r.jsx)(o.gC,{children:["1","2","3","4","5"].map(e=>(0,r.jsx)(o.eb,{value:e,children:e},e))})]}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",title:"Ajouter une classe",children:(0,r.jsx)(N.A,{className:"h-3 w-3"})}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",title:"Supprimer une classe",children:(0,r.jsx)(w.A,{className:"h-3 w-3"})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("span",{className:"text-xs w-20",children:["3. Lecture de la Bible ",2===U?"(Salle 2)":""]}),(0,r.jsx)(J,{...e0,options:eB.bibleReaders,placeholder:"Lecteur",disabled:0===eB.bibleReaders.length}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,r.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})]}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{})]})]})]}),(0,r.jsxs)("div",{className:"border border-orange-300 rounded",children:[(0,r.jsx)("div",{className:"bg-orange-200 px-2 py-1 border-b border-orange-300",children:(0,r.jsxs)("h3",{className:"font-semibold text-orange-900 flex items-center gap-2 text-sm",children:[(0,r.jsx)(C.A,{className:"h-3 w-3"}),"\uD83D\uDDE3️ Applique-toi au minist\xe8re ",2===U?"(Salle 2)":""]})}),(0,r.jsx)("div",{className:"p-1 space-y-1 bg-white",children:ej.sections.ministry.map((e,t)=>{var s,i,d;let u=null==es||null==(s=es.ministryParts)?void 0:s[t],m=e.title||"",h=null!=(d=null!=(i=ec[e.id])?i:m)?d:eg(e),x="number"==typeof e.number?e.number:t+4,f=(0,k.GP)(p,T),g=!!h&&!W.includes(h),b=eJ("ministry_".concat(t,"_student")),v=eJ("ministry_".concat(t,"_assistant"));return(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)(o.l6,{value:h,onValueChange:t=>{eu(s=>({...s,[e.id]:t})),ep(s=>({...s,[f]:{...s[f]||{},[e.id]:t}}))},children:[(0,r.jsx)(o.bq,{className:"w-48 h-6 text-xs",children:(0,r.jsx)(o.yv,{placeholder:"S\xe9lectionner"})}),(0,r.jsxs)(o.gC,{children:[g&&(0,r.jsx)(o.eb,{value:h,children:h}),W.map(e=>(0,r.jsx)(o.eb,{value:e,children:e},e))]})]}),(0,r.jsx)(J,{...b,options:eB.active,placeholder:"Participant",disabled:0===eB.active.length}),(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-1",children:[(0,r.jsxs)("span",{className:"text-xs",children:[x,"."]}),(0,r.jsx)(a.p,{className:"h-6 text-xs flex-1",value:e.title||"",readOnly:!0,title:e.title||""})]}),(0,r.jsxs)(c.AM,{children:[(0,r.jsx)(c.Wv,{asChild:!0,children:(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,r.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})}),(0,r.jsx)(c.hl,{className:"w-auto p-0",children:(0,r.jsx)(eT,{studentId:(null==u?void 0:u.studentId)||null,assistantId:(null==u?void 0:u.assistantId)||null})})]}),(0,r.jsx)(n.E,{variant:"secondary",className:"bg-orange-200 text-orange-800 text-xs h-5",children:e.duration?"".concat(e.duration," min."):"0 min."}),"Discours"!==h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"text-xs w-20",children:"Interlocuteur"}),(0,r.jsx)(J,{...v,options:eB.interlocutors,placeholder:"Interlocuteur",disabled:0===eB.interlocutors.length})]})]},"".concat(e.id,"_salle").concat(U))})})]}),(0,r.jsxs)("div",{className:"border border-red-300 rounded",children:[(0,r.jsx)("div",{className:"bg-red-200 px-2 py-1 border-b border-red-300",children:(0,r.jsxs)("h3",{className:"font-semibold text-red-900 flex items-center gap-2 text-sm",children:[(0,r.jsx)(S.A,{className:"h-3 w-3"}),"❤️ Vie chr\xe9tienne"]})}),(0,r.jsxs)("div",{className:"p-1 space-y-1 bg-white",children:[ej.sections.christianLife.filter(e=>"study"!==e.type&&"prayer"!==e.type).map((e,t)=>{var s,i,d;let u=null==es||null==(s=es.christianLifeParts)?void 0:s[t],m=eJ("life_".concat(t,"_participant")),p=eJ("life_".concat(t,"_subject"),!1),h=eJ("life_".concat(t,"_type"),!1),x=(e.title||"Partie vie chr\xe9tienne").toLowerCase().includes("besoin"),f=h.value||(x?"Besoins de l'assembl\xe9e":"Partie vie chr\xe9tienne");return(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)(o.l6,{value:f,onValueChange:e=>h.onChange(e),children:[(0,r.jsx)(o.bq,{className:"w-48 h-6 text-xs",children:(0,r.jsx)(o.yv,{})}),(0,r.jsxs)(o.gC,{children:[(0,r.jsx)(o.eb,{value:"Partie vie chr\xe9tienne",children:"Partie vie chr\xe9tienne"}),(0,r.jsx)(o.eb,{value:"Besoins de l'assembl\xe9e",children:"Besoins de l'assembl\xe9e"})]})]}),(0,r.jsx)(J,{...m,options:eB.eldersAndServants,placeholder:"Participant",disabled:0===eB.eldersAndServants.length}),(0,r.jsxs)("div",{className:"flex items-center gap-1 flex-1",children:[(0,r.jsxs)("span",{className:"text-xs",children:[e.number,"."]}),(0,r.jsx)(a.p,{className:"h-6 text-xs flex-1",placeholder:e.title||"Sujet...",value:null!=(d=null!=(i=p.value)?i:e.title)?d:"",onChange:e=>p.onChange(e.target.value),readOnly:!x,title:e.title||""})]}),(0,r.jsxs)(c.AM,{children:[(0,r.jsx)(c.Wv,{asChild:!0,children:(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,r.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})}),(0,r.jsx)(c.hl,{className:"w-auto p-0",children:(0,r.jsxs)("div",{className:"p-3 space-y-2 min-w-[200px]",children:[(0,r.jsx)("div",{className:"font-semibold text-sm border-b pb-1",children:"Participation du cahier"}),(0,r.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Participant:"}),(0,r.jsx)("div",{className:"text-gray-700",children:ez((null==u?void 0:u.participantId)||null)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Dur\xe9e:"}),(0,r.jsxs)("div",{className:"text-gray-700",children:[(null==u?void 0:u.duration)||0," min."]})]}),(null==u?void 0:u.theme)&&(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"font-medium",children:"Th\xe8me:"}),(0,r.jsx)("div",{className:"text-gray-700",children:u.theme})]})]})]})})]}),(0,r.jsxs)(n.E,{variant:"secondary",className:"bg-red-200 text-red-800 text-xs h-5",children:[e.duration," min."]})]},"life_part_".concat(t))}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-48 h-6 text-xs font-semibold flex items-center",children:"\xc9tude biblique de l'assembl\xe9e"}),(0,r.jsx)(J,{...e1,options:eB.elders,placeholder:"Conducteur",disabled:0===eB.elders.length,emptyLabel:"Aucun conducteur disponible"}),(0,r.jsx)("div",{className:"flex items-center gap-1 flex-1",children:(0,r.jsx)(a.p,{className:"h-6 text-xs flex-1",placeholder:(null==(s=ej.sections.christianLife.find(e=>"study"===e.type))?void 0:s.title)||"(30 min) lft histoires 24-25."})}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,r.jsx)("span",{className:"text-xs",children:"\uD83D\uDCD6"})}),(0,r.jsxs)(n.E,{variant:"secondary",className:"bg-red-200 text-red-800 text-xs h-5",children:[(null==(d=ej.sections.christianLife.find(e=>"study"===e.type))?void 0:d.duration)||30," min."]}),(0,r.jsx)("span",{className:"text-xs w-20",children:"Lecteur"}),(0,r.jsx)(J,{...e2,options:eB.congregationBibleStudyReaders,placeholder:"Lecteur",disabled:0===eB.congregationBibleStudyReaders.length})]},"etude_biblique"),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("span",{className:"w-48 h-6 text-xs font-semibold flex items-center",children:"Pri\xe8re finale"}),(0,r.jsx)(J,{...e3,options:eB.brothers,placeholder:"Fr\xe8re",disabled:0===eB.brothers.length})]},"priere_finale")]})]}),(0,r.jsxs)("div",{className:"border border-gray-200 rounded",children:[(0,r.jsx)("div",{className:"bg-gray-100 px-2 py-1 border-b border-gray-200",children:(0,r.jsx)("h3",{className:"font-semibold text-gray-800 text-sm flex items-center gap-2",children:"Notes de la semaine"})}),(0,r.jsxs)("div",{className:"p-2 bg-white space-y-2",children:[(0,r.jsx)(G.Label,{htmlFor:"week-notes",className:"text-xs text-gray-600",children:"Observations, besoins locaux, rappels…"}),(0,r.jsx)(L.T,{id:"week-notes",value:eh,onChange:e=>ex(e.target.value),placeholder:"Saisir les remarques importantes pour cette semaine.",className:"min-h-[80px] text-sm"})]})]})]})]})})}},56108:(e,t,s)=>{Promise.resolve().then(s.bind(s,40099))},63817:(e,t,s)=>{"use strict";s.d(t,{G7:()=>o,L$:()=>m,h_:()=>p,oI:()=>c,uB:()=>d,xL:()=>u});var r=s(95155),i=s(12115),l=s(41808),a=s(90109),n=s(64269);s(51834);let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(l.uB,{ref:t,className:(0,n.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",s),...i})});d.displayName=l.uB.displayName;let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,r.jsx)(a.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,r.jsx)(l.uB.Input,{ref:t,className:(0,n.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),...i})]})});o.displayName=l.uB.Input.displayName;let c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(l.uB.List,{ref:t,className:(0,n.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",s),...i})});c.displayName=l.uB.List.displayName;let u=i.forwardRef((e,t)=>(0,r.jsx)(l.uB.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));u.displayName=l.uB.Empty.displayName;let m=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(l.uB.Group,{ref:t,className:(0,n.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",s),...i})});m.displayName=l.uB.Group.displayName,i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(l.uB.Separator,{ref:t,className:(0,n.cn)("-mx-1 h-px bg-border",s),...i})}).displayName=l.uB.Separator.displayName;let p=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,r.jsx)(l.uB.Item,{ref:t,className:(0,n.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none aria-selected:bg-accent aria-selected:text-accent-foreground",s),...i})});p.displayName=l.uB.Item.displayName}},e=>{e.O(0,[830,3928,5502,4733,9823,4244,4325,4589,5392,1084,7941,9325,8675,8441,1255,7358],()=>e(e.s=56108)),_N_E=e.O()}]);