(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8132],{2920:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>N});var r=s(95155),t=s(12115),l=s(3998),n=s(86948),i=s(11186),d=s(65142),o=s(13381),c=s(56397),u=s(4056),f=s(76251),m=s(47974),p=s(87270),x=s(73457),h=s(64269),g=s(90043);function b(e){let{users:a,onSelectionChange:s}=e,[i,d]=t.useState(new Set),[o,c]=t.useState(null),u=t.useMemo(()=>{let e=[...a];return null!==o&&e.sort((e,a)=>{let s=e[o.key],r=a[o.key];return void 0===s&&void 0!==r?"ascending"===o.direction?1:-1:void 0===r&&void 0!==s||s<r?"ascending"===o.direction?-1:1:s>r?"ascending"===o.direction?1:-1:0}),e},[a,o]),f=e=>{let a="ascending";o&&o.key===e&&"ascending"===o.direction&&(a="descending"),c({key:e,direction:a})};return(0,r.jsx)(n.Zp,{children:(0,r.jsx)(n.Wu,{className:"p-0",children:(0,r.jsxs)(p.XI,{children:[(0,r.jsx)(p.A0,{children:(0,r.jsxs)(p.Hj,{children:[(0,r.jsx)(p.nd,{children:(0,r.jsx)(x.S,{checked:i.size>0&&i.size===a.length,onCheckedChange:e=>{e?(d(new Set(a.map(e=>e.id))),s(a[a.length-1]||null)):(d(new Set),s(null))}})}),(0,r.jsx)(p.nd,{children:(0,r.jsxs)(l.Button,{variant:"ghost",onClick:()=>f("lastName"),children:["Nom de famille",(0,r.jsx)(g.A,{className:"ml-2 h-4 w-4"})]})}),(0,r.jsx)(p.nd,{children:(0,r.jsxs)(l.Button,{variant:"ghost",onClick:()=>f("firstName"),children:["Pr\xe9nom",(0,r.jsx)(g.A,{className:"ml-2 h-4 w-4"})]})}),(0,r.jsx)(p.nd,{children:"PIN"}),(0,r.jsx)(p.nd,{children:"D\xe9l\xe9gu\xe9"}),(0,r.jsx)(p.nd,{children:"Appareils connect\xe9s"})]})}),(0,r.jsx)(p.BF,{children:u.map(e=>(0,r.jsxs)(p.Hj,{className:(0,h.cn)("hover:bg-muted/50","Non connect\xe9"===e.status&&"bg-red-100 dark:bg-red-900/20 hover:bg-red-200 dark:hover:bg-red-900/30",i.has(e.id)&&"bg-blue-100 dark:bg-blue-900/20"),onClick:()=>((e,r)=>{let t=new Set(i);if(r?t.add(e):t.delete(e),d(t),0===t.size)s(null);else{let e=Array.from(t).pop();s(a.find(a=>a.id===e)||null)}})(e.id,!i.has(e.id)),children:[(0,r.jsx)(p.nA,{children:(0,r.jsx)(x.S,{checked:i.has(e.id)})}),(0,r.jsx)(p.nA,{children:e.lastName}),(0,r.jsx)(p.nA,{children:e.firstName}),(0,r.jsx)(p.nA,{children:e.pin}),(0,r.jsx)(p.nA,{children:e.delegate||"N/A"}),(0,r.jsx)(p.nA,{children:e.devices.length>0?"".concat(e.devices.length," appareil(s)"):"Non connect\xe9"})]},e.id))})]})})})}var j=s(50425);function N(){let{people:e,preachingGroups:a}=(0,j.d)(),[s,p]=t.useState(null),[x,h]=t.useState("all"),[g,N]=t.useState("all"),[v,y]=t.useState(""),w=t.useCallback(()=>{(null==s?void 0:s.email)&&(window.location.href="mailto:".concat(s.email,"?subject=Invitation \xe0 utiliser l'application Publisher&body=Bonjour,"))},[s]),k=t.useMemo(()=>e.map(e=>((e,a)=>{var s;let r=(null==(s=a.find(a=>a.id===e.spiritual.group))?void 0:s.name)||"Non assign\xe9",t=e.pin||"N/A",l="Non connect\xe9";return e.spiritual.active?l="Actif":e.spiritual.isDeleted&&(l="Inactif"),{id:e.id,lastName:e.lastName,firstName:e.firstName,email:e.email1||e.email2||"",pin:t,delegate:void 0,status:l,group:r,devices:[]}})(e,a)),[e,a]),C=t.useMemo(()=>{let e=v.trim().toLowerCase();return k.filter(a=>{var s,r;let t="all"===x||a.status===x,l="all"===g||a.group===g,n=!e||a.firstName.toLowerCase().includes(e)||a.lastName.toLowerCase().includes(e)||(null==(s=a.pin)?void 0:s.toLowerCase().includes(e))||(null!=(r=a.email)?r:"").toLowerCase().includes(e);return t&&l&&n})},[k,x,g,v]),A=!s;return(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-[280px_1fr] gap-6",children:[(0,r.jsx)("div",{className:"flex flex-col gap-4",children:(0,r.jsxs)(n.Zp,{children:[(0,r.jsx)(n.aR,{children:(0,r.jsx)(n.ZB,{children:"Actions"})}),(0,r.jsxs)(n.Wu,{className:"flex flex-col gap-2",children:[(0,r.jsxs)(l.Button,{variant:"outline",disabled:A,className:"justify-start gap-2",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Actualiser la personne"})]}),(0,r.jsxs)(l.Button,{variant:"outline",disabled:A,className:"justify-start gap-2",children:[(0,r.jsx)(c.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"R\xe9initialiser le PIN"})]}),(0,r.jsxs)(l.Button,{variant:"outline",disabled:A,className:"justify-start gap-2",children:[(0,r.jsx)(u.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Attribuer un d\xe9l\xe9gu\xe9"})]}),(0,r.jsxs)(l.Button,{variant:"outline",className:"justify-start gap-2",onClick:()=>window.print(),children:[(0,r.jsx)(f.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Imprimer"})]}),(0,r.jsxs)(l.Button,{variant:"outline",className:"justify-start gap-2",disabled:A,onClick:w,children:[(0,r.jsx)(m.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{children:"Envoyer un e-mail dâ€™invitation"})]})]})]})}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,r.jsx)(d.p,{placeholder:"Rechercher par nom, PIN ou e-mail...",className:"max-w-sm",value:v,onChange:e=>y(e.target.value)}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)(i.l6,{value:x,onValueChange:h,children:[(0,r.jsx)(i.bq,{children:(0,r.jsx)(i.yv,{placeholder:"Statut"})}),(0,r.jsxs)(i.gC,{children:[(0,r.jsx)(i.eb,{value:"all",children:"Tous les statuts"}),(0,r.jsx)(i.eb,{value:"Actif",children:"Actif"}),(0,r.jsx)(i.eb,{value:"Inactif",children:"Inactif"}),(0,r.jsx)(i.eb,{value:"Non connect\xe9",children:"Non connect\xe9"})]})]}),(0,r.jsxs)(i.l6,{value:g,onValueChange:N,children:[(0,r.jsx)(i.bq,{children:(0,r.jsx)(i.yv,{placeholder:"Groupe"})}),(0,r.jsxs)(i.gC,{children:[(0,r.jsx)(i.eb,{value:"all",children:"Tous les groupes"}),a.map(e=>(0,r.jsx)(i.eb,{value:e.name,children:e.name},e.id))]})]})]})]}),(0,r.jsx)(b,{users:C,onSelectionChange:p})]})]})}},3998:(e,a,s)=>{"use strict";s.d(a,{Button:()=>c,r:()=>o});var r=s(95155),t=s(12115),l=s(17129),n=s(83101),i=s(92033),d=s(64269);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,a)=>{let{className:s,variant:t,size:n,asChild:c=!1,loading:u=!1,loadingText:f="Patientez...",children:m,...p}=e,x=c?l.DX:"button",h=u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),f]}):(0,r.jsx)(r.Fragment,{children:m});return(0,r.jsx)(x,{className:(0,d.cn)(o({variant:t,size:n,className:s})),ref:a,disabled:u,"aria-busy":u,...p,children:c?m:h})});c.displayName="Button"},11186:(e,a,s)=>{"use strict";s.d(a,{bq:()=>f,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>u});var r=s(95155),t=s(12115),l=s(4729),n=s(59007),i=s(42614),d=s(72251),o=s(64269);let c=l.bL;l.YJ;let u=l.WT,f=t.forwardRef((e,a)=>{let{className:s,children:t,...i}=e;return(0,r.jsxs)(l.l9,{ref:a,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",s),...i,children:[t,(0,r.jsx)(l.In,{asChild:!0,children:(0,r.jsx)(n.A,{className:"h-4 w-4 opacity-50"})})]})});f.displayName=l.l9.displayName;let m=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.PP,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});m.displayName=l.PP.displayName;let p=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.wn,{ref:a,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})});p.displayName=l.wn.displayName;let x=t.forwardRef((e,a)=>{let{className:s,children:t,position:n="popper",...i}=e;return(0,r.jsx)(l.ZL,{children:(0,r.jsxs)(l.UC,{ref:a,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...i,children:[(0,r.jsx)(m,{}),(0,r.jsx)(l.LM,{className:(0,o.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(p,{})]})})});x.displayName=l.UC.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.JU,{ref:a,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",s),...t})}).displayName=l.JU.displayName;let h=t.forwardRef((e,a)=>{let{className:s,children:t,...n}=e;return(0,r.jsxs)(l.q7,{ref:a,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...n,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(l.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(l.p4,{children:t})]})});h.displayName=l.q7.displayName,t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.wv,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",s),...t})}).displayName=l.wv.displayName},65142:(e,a,s)=>{"use strict";s.d(a,{p:()=>n});var r=s(95155),t=s(12115),l=s(64269);let n=t.forwardRef((e,a)=>{let{className:s,type:t,...n}=e;return(0,r.jsx)("input",{type:t,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:ring-yellow-400/30 focus-visible:border-yellow-400",s),ref:a,...n})});n.displayName="Input"},73457:(e,a,s)=>{"use strict";s.d(a,{S:()=>d});var r=s(95155),t=s(12115),l=s(38162),n=s(72251),i=s(64269);let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)(l.bL,{ref:a,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground","accent-amber-500","data-[state=checked]:bg-amber-500 data-[state=checked]:border-amber-500",s),...t,children:(0,r.jsx)(l.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})})});d.displayName=l.bL.displayName},86948:(e,a,s)=>{"use strict";s.d(a,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>i,wL:()=>u});var r=s(95155),t=s(12115),l=s(64269);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...t})});n.displayName="Card";let i=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",s),...t})});i.displayName="CardHeader";let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("h3",{ref:a,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight text-primary",s),...t})});d.displayName="CardTitle";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("p",{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",s),...t})});o.displayName="CardDescription";let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("p-6 pt-0",s),...t})});c.displayName="CardContent";let u=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{ref:a,className:(0,l.cn)("flex items-center p-6 pt-0",s),...t})});u.displayName="CardFooter"},87270:(e,a,s)=>{"use strict";s.d(a,{A0:()=>i,BF:()=>d,Hj:()=>o,XI:()=>n,nA:()=>u,nd:()=>c});var r=s(95155),t=s(12115),l=s(64269);let n=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:a,className:(0,l.cn)("w-full caption-bottom text-sm",s),...t})})});n.displayName="Table";let i=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("thead",{ref:a,className:(0,l.cn)("[&_tr]:border-b",s),...t})});i.displayName="TableHeader";let d=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("tbody",{ref:a,className:(0,l.cn)("[&_tr:last-child]:border-0",s),...t})});d.displayName="TableBody",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("tfoot",{ref:a,className:(0,l.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...t})}).displayName="TableFooter";let o=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("tr",{ref:a,className:(0,l.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...t})});o.displayName="TableRow";let c=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("th",{ref:a,className:(0,l.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...t})});c.displayName="TableHead";let u=t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("td",{ref:a,className:(0,l.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...t})});u.displayName="TableCell",t.forwardRef((e,a)=>{let{className:s,...t}=e;return(0,r.jsx)("caption",{ref:a,className:(0,l.cn)("mt-4 text-sm text-muted-foreground",s),...t})}).displayName="TableCaption"},88306:(e,a,s)=>{Promise.resolve().then(s.bind(s,2920))}},e=>{e.O(0,[830,3928,5502,9450,7941,8441,1255,7358],()=>e(e.s=88306)),_N_E=e.O()}]);