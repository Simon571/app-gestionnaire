(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1050],{18018:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]])},18046:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},18186:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]])},19637:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},30285:(e,s,a)=>{"use strict";a.d(s,{Button:()=>o,r:()=>c});var r=a(95155),t=a(12115),n=a(66634),l=a(74466),i=a(50172),d=a(59434);let c=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef((e,s)=>{let{className:a,variant:t,size:l,asChild:o=!1,loading:u=!1,loadingText:m="Patientez...",children:p,...x}=e,h=o?n.DX:"button",f=u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.A,{className:"mr-2 h-4 w-4 animate-spin"}),m]}):(0,r.jsx)(r.Fragment,{children:p});return(0,r.jsx)(h,{className:(0,d.cn)(c({variant:t,size:l,className:a})),ref:s,disabled:u,"aria-busy":u,...x,children:o?p:f})});o.displayName="Button"},30955:(e,s,a)=>{Promise.resolve().then(a.bind(a,70700))},40968:(e,s,a)=>{"use strict";a.d(s,{b:()=>i});var r=a(12115),t=a(63540),n=a(95155),l=r.forwardRef((e,s)=>(0,n.jsx)(t.sG.label,{...e,ref:s,onMouseDown:s=>{var a;s.target.closest("button, input, select, textarea")||(null==(a=e.onMouseDown)||a.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));l.displayName="Label";var i=l},47262:(e,s,a)=>{"use strict";a.d(s,{S:()=>d});var r=a(95155),t=a(12115),n=a(76981),l=a(10518),i=a(59434);let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.bL,{ref:s,className:(0,i.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground","accent-amber-500","data-[state=checked]:bg-amber-500 data-[state=checked]:border-amber-500",a),...t,children:(0,r.jsx)(n.C1,{className:(0,i.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})})});d.displayName=n.bL.displayName},50286:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},54165:(e,s,a)=>{"use strict";a.d(s,{Cf:()=>p,Es:()=>h,HM:()=>u,L3:()=>f,c7:()=>x,lG:()=>d,rr:()=>j,zM:()=>c});var r=a(95155),t=a(12115),n=a(45821),l=a(25318),i=a(59434);let d=n.bL,c=n.l9,o=n.ZL,u=n.bm,m=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.hJ,{ref:s,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...t})});m.displayName=n.hJ.displayName;let p=t.forwardRef((e,s)=>{let{className:a,children:t,...d}=e;return(0,r.jsxs)(o,{children:[(0,r.jsx)(m,{}),(0,r.jsxs)(n.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[t,(0,r.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});p.displayName=n.UC.displayName;let x=e=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",s),...a})};x.displayName="DialogHeader";let h=e=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a})};h.displayName="DialogFooter";let f=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.hE,{ref:s,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...t})});f.displayName=n.hE.displayName;let j=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.VY,{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...t})});j.displayName=n.VY.displayName},59409:(e,s,a)=>{"use strict";a.d(s,{bq:()=>m,eb:()=>f,gC:()=>h,l6:()=>o,yv:()=>u});var r=a(95155),t=a(12115),n=a(43433),l=a(79556),i=a(77381),d=a(10518),c=a(59434);let o=n.bL;n.YJ;let u=n.WT,m=t.forwardRef((e,s)=>{let{className:a,children:t,...i}=e;return(0,r.jsxs)(n.l9,{ref:s,className:(0,c.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[t,(0,r.jsx)(n.In,{asChild:!0,children:(0,r.jsx)(l.A,{className:"h-4 w-4 opacity-50"})})]})});m.displayName=n.l9.displayName;let p=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.PP,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(i.A,{className:"h-4 w-4"})})});p.displayName=n.PP.displayName;let x=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.wn,{ref:s,className:(0,c.cn)("flex cursor-default items-center justify-center py-1",a),...t,children:(0,r.jsx)(l.A,{className:"h-4 w-4"})})});x.displayName=n.wn.displayName;let h=t.forwardRef((e,s)=>{let{className:a,children:t,position:l="popper",...i}=e;return(0,r.jsx)(n.ZL,{children:(0,r.jsxs)(n.UC,{ref:s,className:(0,c.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...i,children:[(0,r.jsx)(p,{}),(0,r.jsx)(n.LM,{className:(0,c.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),(0,r.jsx)(x,{})]})})});h.displayName=n.UC.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.JU,{ref:s,className:(0,c.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...t})}).displayName=n.JU.displayName;let f=t.forwardRef((e,s)=>{let{className:a,children:t,...l}=e;return(0,r.jsxs)(n.q7,{ref:s,className:(0,c.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...l,children:[(0,r.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,r.jsx)(n.VF,{children:(0,r.jsx)(d.A,{className:"h-4 w-4"})})}),(0,r.jsx)(n.p4,{children:t})]})});f.displayName=n.q7.displayName,t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.wv,{ref:s,className:(0,c.cn)("-mx-1 my-1 h-px bg-muted",a),...t})}).displayName=n.wv.displayName},62523:(e,s,a)=>{"use strict";a.d(s,{p:()=>l});var r=a(95155),t=a(12115),n=a(59434);let l=t.forwardRef((e,s)=>{let{className:a,type:t,...l}=e;return(0,r.jsx)("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:ring-yellow-400/30 focus-visible:border-yellow-400",a),ref:s,...l})});l.displayName="Input"},66424:(e,s,a)=>{"use strict";a.d(s,{F:()=>i});var r=a(95155),t=a(12115),n=a(47655),l=a(59434);let i=t.forwardRef((e,s)=>{let{className:a,children:t,...i}=e;return(0,r.jsxs)(n.bL,{ref:s,className:(0,l.cn)("relative overflow-hidden",a),...i,children:[(0,r.jsx)(n.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,r.jsx)(d,{}),(0,r.jsx)(n.OK,{})]})});i.displayName=n.bL.displayName;let d=t.forwardRef((e,s)=>{let{className:a,orientation:t="vertical",...i}=e;return(0,r.jsx)(n.VM,{ref:s,orientation:t,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,r.jsx)(n.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=n.VM.displayName},66695:(e,s,a)=>{"use strict";a.d(s,{BT:()=>c,Wu:()=>o,ZB:()=>d,Zp:()=>l,aR:()=>i,wL:()=>u});var r=a(95155),t=a(12115),n=a(59434);let l=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...t})});l.displayName="Card";let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...t})});i.displayName="CardHeader";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h3",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight text-primary",a),...t})});d.displayName="CardTitle";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",a),...t})});c.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent";let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",a),...t})});u.displayName="CardFooter"},67270:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},68510:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("PersonStanding",[["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["path",{d:"m9 20 3-6 3 6",key:"se2kox"}],["path",{d:"m6 8 6 2 6-2",key:"4o3us4"}],["path",{d:"M12 10v4",key:"1kjpxc"}]])},70700:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>z});var r=a(95155),t=a(12115),n=a(66695),l=a(30285),i=a(85127),d=a(50286),c=a(68510),o=a(18046),u=a(77223),m=a(19637),p=a(18018),x=a(67270),h=a(18186),f=a(79239),j=a(59409),g=a(85057),b=a(59434),v=a(32714),N=a(54165),y=a(62523),w=a(47262),k=a(66424);let A=e=>{let{onSave:s,onCancel:a}=e,[n,i]=t.useState("");return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&(s(n),i(""))},children:[(0,r.jsx)("div",{className:"grid gap-4 py-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(g.Label,{htmlFor:"name",className:"text-right",children:"Nom du groupe"}),(0,r.jsx)(y.p,{id:"name",value:n,onChange:e=>i(e.target.value),className:"col-span-3",placeholder:"Ex: Groupe 1"})]})}),(0,r.jsxs)(N.Es,{children:[(0,r.jsx)(l.Button,{type:"button",variant:"ghost",onClick:a,children:"Annuler"}),(0,r.jsx)(l.Button,{type:"submit",children:"Sauvegarder"})]})]})},C=e=>{let{gender:s}=e;return"male"===s?(0,r.jsx)(d.A,{className:"h-4 w-4 text-blue-500"}):"female"===s?(0,r.jsx)(c.A,{className:"h-4 w-4 text-pink-500"}):null},_=e=>"permanent"===e.spiritual.pioneer.status?"PP":"special"===e.spiritual.pioneer.status?"PS":"missionary"===e.spiritual.pioneer.status?"M":"aux-permanent"===e.spiritual.pioneer.status?"PA":"elder"===e.spiritual.function?"A":"servant"===e.spiritual.function?"AM":"publisher"===e.spiritual.function?"P":"",R=()=>{let{people:e,preachingGroups:s,addPreachingGroup:a,deletePreachingGroup:c,isLoaded:f}=(0,v.d)(),[b,y]=t.useState(!1),[R,M]=t.useState([]),[P,S]=t.useState(10),[z,F]=t.useState(1),B=(e,s)=>{s?M(s=>[...s,e]):M(s=>s.filter(s=>s!==e))},L=t.useMemo(()=>{let a=[...s].sort((e,s)=>e.name.localeCompare(s.name)),r={};return e.forEach(e=>{let s=e.spiritual.group;s&&(r[s]||(r[s]=[]),r[s].push(e))}),a.map(e=>{let s=r[e.id]||[],a=s.find(e=>"overseer"===e.spiritual.roleInGroup),t=s.find(e=>"assistant"===e.spiritual.roleInGroup);return{id:e.id,name:e.name,members:s,stats:{overseer:a?"".concat(a.lastName," ").concat(a.firstName):"N/A",assistant:t?"".concat(t.lastName," ").concat(t.firstName):"N/A",total:s.length}}})},[e,s]),E=Math.max(1,Math.ceil(L.length/P)),H=L.slice((z-1)*P,z*P);return f?(0,r.jsxs)(n.Zp,{className:"printable-area",children:[(0,r.jsx)(n.aR,{className:"no-print",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(N.lG,{open:b,onOpenChange:y,children:[(0,r.jsx)(N.zM,{asChild:!0,children:(0,r.jsx)(l.Button,{size:"icon",variant:"outline",children:(0,r.jsx)(o.A,{})})}),(0,r.jsxs)(N.Cf,{children:[(0,r.jsx)(N.c7,{children:(0,r.jsx)(N.L3,{children:"Ajouter un groupe de pr\xe9dication"})}),(0,r.jsx)(A,{onSave:e=>{a(e),y(!1)},onCancel:()=>y(!1)})]})]}),(0,r.jsx)(l.Button,{size:"icon",variant:"outline",onClick:()=>{window.confirm("\xcates-vous s\xfbr de vouloir supprimer ".concat(R.length," groupe(s) ? Cette action est irr\xe9versible."))&&(R.forEach(e=>c(e)),M([]))},disabled:0===R.length,children:(0,r.jsx)(u.A,{})}),(0,r.jsx)(l.Button,{size:"icon",variant:"outline",onClick:()=>{let e="Voici la liste des groupes de pr\xe9dication :\n\n";L.forEach(s=>{e+="----------------------------------------\n",e+="".concat(s.name,"\n"),e+="----------------------------------------\n",e+="Responsable: ".concat(s.stats.overseer,"\n"),e+="Adjoint: ".concat(s.stats.assistant,"\n"),e+="Total: ".concat(s.stats.total,"\n\n"),e+="Membres:\n",s.members.forEach(s=>{e+="- ".concat(s.displayName,"\n")}),e+="\n\n"}),window.location.href="mailto:?subject=".concat(encodeURIComponent("Liste des groupes de pr\xe9dication"),"&body=").concat(encodeURIComponent(e))},children:(0,r.jsx)(m.A,{})}),(0,r.jsx)(l.Button,{size:"icon",variant:"outline",onClick:()=>{window.print()},children:(0,r.jsx)(p.A,{})}),(0,r.jsx)(l.Button,{size:"icon",variant:"outline",children:(0,r.jsx)(x.A,{})})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(g.Label,{htmlFor:"groups-per-page",className:"whitespace-nowrap",children:"Groupes par page :"}),(0,r.jsxs)(j.l6,{value:String(P),onValueChange:e=>{S(Number(e)),F(1)},children:[(0,r.jsx)(j.bq,{id:"groups-per-page",className:"w-[80px]",children:(0,r.jsx)(j.yv,{})}),(0,r.jsx)(j.gC,{children:(0,r.jsxs)(k.F,{className:"h-[40vh]",children:[[...Array(10)].map((e,s)=>(0,r.jsx)(j.eb,{value:String(s+1),children:s+1},s+1)),(0,r.jsx)(j.eb,{value:String(L.length||10),children:"Tous"})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>F(e=>Math.max(1,e-1)),disabled:1===z,children:"Pr\xe9c\xe9dent"}),(0,r.jsxs)("span",{className:"text-sm text-muted-foreground",children:["Page ",z," sur ",E]}),(0,r.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>F(e=>e+1),disabled:z>=E,children:"Suivant"})]})]})]})}),(0,r.jsx)(n.Wu,{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:H.map(e=>(0,r.jsxs)(n.Zp,{className:"flex flex-col",children:[(0,r.jsxs)(n.aR,{className:"p-2 border-b bg-muted/30 flex-row items-center gap-2",children:[(0,r.jsx)(w.S,{id:"select-".concat(e.id),className:"no-print",onCheckedChange:s=>B(e.id,!!s),checked:R.includes(e.id)}),(0,r.jsx)(n.ZB,{className:"text-base",children:e.name})]}),(0,r.jsx)(n.Wu,{className:"p-0 flex-grow",children:(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)(i.XI,{children:[(0,r.jsx)(i.A0,{children:(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nd,{children:"Nom"}),(0,r.jsx)(i.nd,{children:"Pr\xe9nom"}),(0,r.jsx)(i.nd,{className:"w-8 p-1",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})}),(0,r.jsx)(i.nd,{className:"w-8 p-1",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})}),(0,r.jsx)(i.nd,{children:"Statut"})]})}),(0,r.jsx)(i.BF,{children:e.members.map(e=>(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nA,{className:"p-1 font-medium",children:e.lastName}),(0,r.jsx)(i.nA,{className:"p-1",children:e.firstName}),(0,r.jsx)(i.nA,{className:"p-1 text-center",children:e.isHeadOfFamily&&(0,r.jsx)(h.A,{className:"w-4 h-4 inline-block"})}),(0,r.jsx)(i.nA,{className:"p-1 text-center",children:(0,r.jsx)(C,{gender:e.gender})}),(0,r.jsx)(i.nA,{className:"p-1 text-xs",children:_(e)})]},e.id))})]})})}),(0,r.jsx)(n.wL,{className:"p-2 border-t text-xs text-muted-foreground",children:(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-x-2 w-full",children:[(0,r.jsxs)("span",{children:["(Resp.) ",e.stats.overseer]}),(0,r.jsxs)("span",{children:["(Adj.) ",e.stats.assistant]}),(0,r.jsxs)("span",{children:["Total: ",e.stats.total]})]})})]},e.id))})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-lg text-muted-foreground",children:"Chargement des donn\xe9es..."})})},M=e=>{let{onSave:s,onCancel:a}=e,[n,i]=t.useState("");return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&(s(n),i(""))},children:[(0,r.jsx)("div",{className:"grid gap-4 py-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,r.jsx)(g.Label,{htmlFor:"name",className:"text-right",children:"Nom de la famille"}),(0,r.jsx)(y.p,{id:"name",value:n,onChange:e=>i(e.target.value),className:"col-span-3",placeholder:"Ex: Famille Dupont"})]})}),(0,r.jsxs)(N.Es,{children:[(0,r.jsx)(l.Button,{type:"button",variant:"ghost",onClick:a,children:"Annuler"}),(0,r.jsx)(l.Button,{type:"submit",children:"Sauvegarder"})]})]})},P={all:"Tous",families:"Familles",all_publishers:"Tous les proclamateurs",active_publishers:"Proclamateurs actifs",irregular_publishers:"Proclamateurs irr\xe9guliers",inactive_publishers:"Proclamateurs inactifs",unbaptized_publishers:"Proclamateurs non baptis\xe9s",not_publishers:"Pas proclamateurs",baptized:"Baptis\xe9(e)",elders:"Anciens",servants:"Assistants",appointed_brothers:"Fr\xe8res nomm\xe9s",active_unappointed_brothers:"Fr\xe8res actifs non nomm\xe9s",brothers:"Fr\xe8res",sisters:"Sœurs",all_pioneers:"Tous les pionniers",regular_pioneers:"Pionniers permanents",auxiliary_pioneers:"Pionniers auxiliaires",special_pioneers:"Pionniers sp\xe9ciaux",missionaries:"Missionnaires affect\xe9s dans le territoire",group_overseers:"Responsables de groupe",group_assistants:"Adjoints de groupe",family_heads:"Chef de famille",aged_or_infirm:"\xc2g\xe9/infirme",child:"Enfant",blind:"Aveugle",deaf:"Sourd",incarcerated:"Incarc��r\xe9",other_personal_info:"Autres informations personnelles",anointed:"Oint",kh_key:"Cl\xe9 de la Salle du Royaume",tele_volunteer:"T\xe9l\xe9volontaire",complex_volunteer:"Volontaire au complexe",bethel_volunteer:"Volontaire au B\xc9THEL",direct_reports:"Rapports envoy\xe9s directement \xe0 la filiale",deleted:"Supprim\xe9",departed:"Parti(e)"},S=()=>{let{families:e,people:s,addFamily:a,deleteFamily:c,preachingGroups:m,isLoaded:x}=(0,v.d)(),[f,g]=t.useState(!1),[b,y]=t.useState([]),[A,_]=t.useState("all"),[R,S]=t.useState("all-groups"),z=(e,s)=>{s?y(s=>[...s,e]):y(s=>s.filter(s=>s!==e))},F=t.useMemo(()=>{let a=s.filter(e=>{if("all"===A||"families"===A)return!0;let s=e.spiritual;if(!s)return!1;switch(A){case"all_publishers":return s.function&&["publisher","servant","elder","unbaptized"].includes(s.function);case"active_publishers":return s.active;case"irregular_publishers":return s.active&&!s.regular;case"inactive_publishers":return!s.active;case"unbaptized_publishers":return"unbaptized"===s.function;case"not_publishers":return!s.function;case"baptized":return!!s.baptismDate;case"elders":return"elder"===s.function;case"servants":return"servant"===s.function;case"appointed_brothers":return"male"===e.gender&&("elder"===s.function||"servant"===s.function);case"active_unappointed_brothers":return"male"===e.gender&&s.active&&!s.function;case"brothers":return"male"===e.gender;case"sisters":return"female"===e.gender;case"all_pioneers":return!!s.pioneer.status;case"regular_pioneers":return"permanent"===s.pioneer.status;case"auxiliary_pioneers":return"aux-permanent"===s.pioneer.status;case"special_pioneers":return"special"===s.pioneer.status;case"missionaries":return"missionary"===s.pioneer.status;case"group_overseers":return"overseer"===s.roleInGroup;case"group_assistants":return"assistant"===s.roleInGroup;case"family_heads":return e.isHeadOfFamily;case"aged_or_infirm":return e.agedOrInfirm;case"child":return e.child;case"blind":return e.blind;case"deaf":return e.deaf;case"incarcerated":return e.incarcerated;case"other_personal_info":return!!e.otherInfo;case"anointed":return s.anointed;case"kh_key":return!!s.kingdomHallKey;case"tele_volunteer":return!!s.teleVolunteerDate;case"complex_volunteer":return!!s.complexVolunteerDate;case"bethel_volunteer":return!!s.bethelVolunteerDate;case"direct_reports":return s.directReports;case"deleted":return s.isDeleted;case"departed":return e.departed;default:return!0}}),r="all-groups"===R?a:"unassigned"===R?a.filter(e=>!e.spiritual.group):a.filter(e=>e.spiritual.group===R);return[...e].sort((e,s)=>e.name.localeCompare(s.name)).map(e=>({...e,members:r.filter(s=>s.familyId===e.id)})).filter(e=>e.members.length>0)},[e,s,A,R]);return x?(0,r.jsxs)(n.Zp,{className:"printable-area",children:[(0,r.jsx)(n.aR,{className:"no-print",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(n.ZB,{children:"Familles"}),(0,r.jsxs)(j.l6,{value:A,onValueChange:_,children:[(0,r.jsx)(j.bq,{className:"w-[280px]",children:(0,r.jsx)(j.yv,{})}),(0,r.jsx)(j.gC,{children:(0,r.jsx)(k.F,{className:"h-[40vh]",children:Object.entries(P).map(e=>{let[s,a]=e;return(0,r.jsx)(j.eb,{value:s,children:a},s)})})})]}),(0,r.jsxs)(j.l6,{value:R,onValueChange:S,children:[(0,r.jsx)(j.bq,{className:"w-[180px]",children:(0,r.jsx)(j.yv,{placeholder:"Tous les groupes"})}),(0,r.jsx)(j.gC,{children:(0,r.jsxs)(k.F,{className:"h-[40vh]",children:[(0,r.jsx)(j.eb,{value:"all-groups",children:"Tous les groupes"}),m.sort((e,s)=>e.name.localeCompare(s.name)).map(e=>(0,r.jsx)(j.eb,{value:e.id,children:e.name},e.id)),(0,r.jsx)(j.eb,{value:"unassigned",children:"Non attribu\xe9"})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)(N.lG,{open:f,onOpenChange:g,children:[(0,r.jsx)(N.zM,{asChild:!0,children:(0,r.jsx)(l.Button,{size:"icon",variant:"outline",children:(0,r.jsx)(o.A,{})})}),(0,r.jsxs)(N.Cf,{children:[(0,r.jsx)(N.c7,{children:(0,r.jsx)(N.L3,{children:"Ajouter une famille"})}),(0,r.jsx)(M,{onSave:e=>{a(e),g(!1)},onCancel:()=>g(!1)})]})]}),(0,r.jsx)(l.Button,{size:"icon",variant:"outline",onClick:()=>{window.confirm("\xcates-vous s\xfbr de vouloir supprimer ".concat(b.length," famille(s) ? Les membres de la famille ne seront pas supprim\xe9s, mais seulement leur affiliation familiale."))&&(b.forEach(e=>c(e)),y([]))},disabled:0===b.length,children:(0,r.jsx)(u.A,{})}),(0,r.jsx)(l.Button,{size:"icon",variant:"outline",onClick:()=>{window.print()},children:(0,r.jsx)(p.A,{})})]})]})}),(0,r.jsx)(n.Wu,{children:"all"===A&&"all-groups"===R?(0,r.jsx)(n.Zp,{children:(0,r.jsx)(n.Wu,{className:"p-0",children:(0,r.jsxs)(i.XI,{children:[(0,r.jsx)(i.A0,{children:(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nd,{children:"Famille"}),(0,r.jsx)(i.nd,{children:"Nom"}),(0,r.jsx)(i.nd,{children:"Pr\xe9nom"}),(0,r.jsx)(i.nd,{className:"w-8 p-1",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})}),(0,r.jsx)(i.nd,{className:"w-8 p-1",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})})]})}),(0,r.jsx)(i.BF,{children:F.flatMap(e=>e.members.map(s=>(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nA,{className:"p-1 font-bold",children:e.name}),(0,r.jsx)(i.nA,{className:"p-1 font-medium",children:s.lastName}),(0,r.jsx)(i.nA,{className:"p-1",children:s.firstName}),(0,r.jsx)(i.nA,{className:"p-1 text-center",children:s.isHeadOfFamily&&(0,r.jsx)(h.A,{className:"w-4 h-4 inline-block"})}),(0,r.jsx)(i.nA,{className:"p-1 text-center",children:(0,r.jsx)(C,{gender:s.gender})})]},s.id)))})]})})}):(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:F.map(e=>(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"p-2 border-b bg-muted/30 flex-row items-center gap-2",children:[(0,r.jsx)(w.S,{id:"select-family-".concat(e.id),className:"no-print",onCheckedChange:s=>z(e.id,!!s),checked:b.includes(e.id)}),(0,r.jsx)(n.ZB,{className:"text-base",children:e.name})]}),(0,r.jsx)(n.Wu,{className:"p-0",children:(0,r.jsxs)(i.XI,{children:[(0,r.jsx)(i.A0,{children:(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nd,{children:"Nom"}),(0,r.jsx)(i.nd,{children:"Pr\xe9nom"}),(0,r.jsx)(i.nd,{className:"w-8 p-1",children:(0,r.jsx)(h.A,{className:"w-4 h-4"})}),(0,r.jsx)(i.nd,{className:"w-8 p-1",children:(0,r.jsx)(d.A,{className:"w-4 h-4"})})]})}),(0,r.jsx)(i.BF,{children:e.members.map(e=>(0,r.jsxs)(i.Hj,{children:[(0,r.jsx)(i.nA,{className:"p-1 font-medium",children:e.lastName}),(0,r.jsx)(i.nA,{className:"p-1",children:e.firstName}),(0,r.jsx)(i.nA,{className:"p-1 text-center",children:e.isHeadOfFamily&&(0,r.jsx)(h.A,{className:"w-4 h-4 inline-block"})}),(0,r.jsx)(i.nA,{className:"p-1 text-center",children:(0,r.jsx)(C,{gender:e.gender})})]},e.id))})]})})]},e.id))})})]}):(0,r.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,r.jsx)("p",{className:"text-lg text-muted-foreground",children:"Chargement des donn\xe9es..."})})};function z(){let[e,s]=t.useState("preaching_groups");return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("div",{children:(0,r.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:"Groupes et Familles"})}),(0,r.jsxs)("div",{className:"flex gap-2 border-b",children:[(0,r.jsxs)(l.Button,{variant:"ghost",onClick:()=>s("preaching_groups"),className:(0,b.cn)("rounded-b-none","preaching_groups"===e&&"border-b-2 border-primary"),children:[(0,r.jsx)(f.A,{className:"mr-2 h-4 w-4"}),"Groupes"]}),(0,r.jsxs)(l.Button,{variant:"ghost",onClick:()=>s("families"),className:(0,b.cn)("rounded-b-none","families"===e&&"border-b-2 border-primary"),children:[(0,r.jsx)(h.A,{className:"mr-2 h-4 w-4"}),"Familles"]})]}),(0,r.jsxs)("div",{children:["preaching_groups"===e&&(0,r.jsx)(R,{}),"families"===e&&(0,r.jsx)(S,{})]})]})}},76981:(e,s,a)=>{"use strict";a.d(s,{C1:()=>A,bL:()=>k});var r=a(12115),t=a(6101),n=a(46081),l=a(85185),i=a(5845),d=a(45503),c=a(11275),o=a(28905),u=a(63540),m=a(95155),p="Checkbox",[x,h]=(0,n.A)(p),[f,j]=x(p),g=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,name:n,checked:d,defaultChecked:c,required:o,disabled:p,value:x="on",onCheckedChange:h,form:j,...g}=e,[b,v]=r.useState(null),k=(0,t.s)(s,e=>v(e)),A=r.useRef(!1),C=!b||j||!!b.closest("form"),[_=!1,R]=(0,i.i)({prop:d,defaultProp:c,onChange:h}),M=r.useRef(_);return r.useEffect(()=>{let e=null==b?void 0:b.form;if(e){let s=()=>R(M.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[b,R]),(0,m.jsxs)(f,{scope:a,state:_,disabled:p,children:[(0,m.jsx)(u.sG.button,{type:"button",role:"checkbox","aria-checked":y(_)?"mixed":_,"aria-required":o,"data-state":w(_),"data-disabled":p?"":void 0,disabled:p,value:x,...g,ref:k,onKeyDown:(0,l.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.m)(e.onClick,e=>{R(e=>!!y(e)||!e),C&&(A.current=e.isPropagationStopped(),A.current||e.stopPropagation())})}),C&&(0,m.jsx)(N,{control:b,bubbles:!A.current,name:n,value:x,checked:_,required:o,disabled:p,form:j,style:{transform:"translateX(-100%)"},defaultChecked:!y(c)&&c})]})});g.displayName=p;var b="CheckboxIndicator",v=r.forwardRef((e,s)=>{let{__scopeCheckbox:a,forceMount:r,...t}=e,n=j(b,a);return(0,m.jsx)(o.C,{present:r||y(n.state)||!0===n.state,children:(0,m.jsx)(u.sG.span,{"data-state":w(n.state),"data-disabled":n.disabled?"":void 0,...t,ref:s,style:{pointerEvents:"none",...e.style}})})});v.displayName=b;var N=e=>{let{control:s,checked:a,bubbles:t=!0,defaultChecked:n,...l}=e,i=r.useRef(null),o=(0,d.Z)(a),u=(0,c.X)(s);r.useEffect(()=>{let e=i.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==a&&s){let r=new Event("click",{bubbles:t});e.indeterminate=y(a),s.call(e,!y(a)&&a),e.dispatchEvent(r)}},[o,a,t]);let p=r.useRef(!y(a)&&a);return(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=n?n:p.current,...l,tabIndex:-1,ref:i,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return"indeterminate"===e}function w(e){return y(e)?"indeterminate":e?"checked":"unchecked"}var k=g,A=v},77223:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},79239:(e,s,a)=>{"use strict";a.d(s,{A:()=>r});let r=(0,a(40157).A)("UsersRound",[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]])},85057:(e,s,a)=>{"use strict";a.d(s,{Label:()=>c});var r=a(95155),t=a(12115),n=a(40968),l=a(74466),i=a(59434);let d=(0,l.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(n.b,{ref:s,className:(0,i.cn)(d(),a),...t})});c.displayName=n.b.displayName},85127:(e,s,a)=>{"use strict";a.d(s,{A0:()=>i,BF:()=>d,Hj:()=>c,XI:()=>l,nA:()=>u,nd:()=>o});var r=a(95155),t=a(12115),n=a(59434);let l=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,n.cn)("w-full caption-bottom text-sm",a),...t})})});l.displayName="Table";let i=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("thead",{ref:s,className:(0,n.cn)("[&_tr]:border-b",a),...t})});i.displayName="TableHeader";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tbody",{ref:s,className:(0,n.cn)("[&_tr:last-child]:border-0",a),...t})});d.displayName="TableBody",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tfoot",{ref:s,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...t})}).displayName="TableFooter";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("tr",{ref:s,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...t})});c.displayName="TableRow";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("th",{ref:s,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...t})});o.displayName="TableHead";let u=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("td",{ref:s,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...t})});u.displayName="TableCell",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("caption",{ref:s,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",a),...t})}).displayName="TableCaption"}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,9456,2925,1720,7655,7689,8441,1684,7358],()=>s(30955)),_N_E=e.O()}]);