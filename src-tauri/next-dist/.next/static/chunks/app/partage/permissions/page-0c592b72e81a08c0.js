(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2698],{30285:(e,r,s)=>{"use strict";s.d(r,{Button:()=>c,r:()=>o});var a=s(95155),l=s(12115),i=s(66634),t=s(74466),n=s(50172),d=s(59434);let o=(0,t.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=l.forwardRef((e,r)=>{let{className:s,variant:l,size:t,asChild:c=!1,loading:u=!1,loadingText:m="Patientez...",children:f,...b}=e,p=c?i.DX:"button",x=u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}),m]}):(0,a.jsx)(a.Fragment,{children:f});return(0,a.jsx)(p,{className:(0,d.cn)(o({variant:l,size:t,className:s})),ref:r,disabled:u,"aria-busy":u,...b,children:c?f:x})});c.displayName="Button"},30356:(e,r,s)=>{"use strict";s.d(r,{C:()=>o,z:()=>d});var a=s(95155),l=s(12115),i=s(54059),t=s(70154),n=s(59434);let d=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)(i.bL,{className:(0,n.cn)("grid gap-2",s),...l,ref:r})});d.displayName=i.bL.displayName;let o=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)(i.q7,{ref:r,className:(0,n.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...l,children:(0,a.jsx)(i.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(t.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});o.displayName=i.q7.displayName},47700:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>w});var a=s(95155),l=s(12115),i=s(18186),t=s(51920),n=s(50286),d=s(87824),o=s(91721),c=s(67554),u=s(59119),m=s(32714),f=s(59434),b=s(66695),p=s(30285),x=s(30356),h=s(66424),g=s(85127);let j=[{id:"assembly",label:"Assembl\xe9e",icon:i.A,permissions:[{id:"assembly_admin",label:"Administration de l'assembl\xe9e"},{id:"bulletin_board",label:"Tableau d'affichage"},{id:"events",label:"\xc9v\xe8nements de l'assembl\xe9e"},{id:"preaching_activity",label:"Activit\xe9 de pr\xe9dication"},{id:"other_groups",label:"Autres groupes"},{id:"meeting_attendance",label:"Assistance aux r\xe9unions"},{id:"publications",label:"Publications"}]},{id:"schedule",label:"Programme",icon:t.A,permissions:[{id:"life_and_ministry_meeting",label:"R\xe9union Vie et minist\xe8re"},{id:"congregation_needs",label:"Besoins de l'assembl\xe9e"},{id:"public_talks",label:"Discours publics"},{id:"preaching_and_witnessing",label:"Pr\xe9dication et T\xe9moignage"},{id:"services",label:"Services"},{id:"maintenance",label:"Maintenance"},{id:"cleaning",label:"Nettoyage et Entretien"}]},{id:"people",label:"Personnes",icon:n.A,permissions:[{id:"personal_info",label:"Informations sur la personne"},{id:"spiritual_person",label:"Personne Spirituel"},{id:"assign_person",label:"Personne Attribuer"},{id:"publisher_reports",label:"Rapports du proclamateur"}]},{id:"territory",label:"Territoire",icon:d.A,permissions:[{id:"territories",label:"Territoires"}]},{id:"me",label:"Moi",icon:o.A,permissions:[{id:"tasks",label:"T\xe2ches"}]}],N=e=>{let{label:r,value:s,onChange:i}=e,t=l.useId();return(0,a.jsxs)("div",{className:"flex items-center justify-between border-b py-3",children:[(0,a.jsx)("span",{className:"text-sm",children:r}),(0,a.jsxs)(x.z,{value:s,onValueChange:i,className:"flex items-center gap-4",children:[(0,a.jsx)(x.C,{value:"edit",id:"".concat(t,"-edit"),className:"h-6 w-6 border-green-600 text-green-600 focus:ring-green-600"}),(0,a.jsx)(x.C,{value:"view",id:"".concat(t,"-view"),className:"h-6 w-6 border-orange-500 text-orange-500 focus:ring-orange-500"}),(0,a.jsx)(x.C,{value:"none",id:"".concat(t,"-none"),className:"h-6 w-6 border-red-600 text-red-600 focus:ring-red-600"})]})]})},v=()=>j.flatMap(e=>e.permissions).reduce((e,r)=>("publisher_reports"===r.id||"territories"===r.id?e[r.id]="view":e[r.id]="none",e),{}),y=e=>{let{users:r,selectedUser:s,onSelectUser:l}=e;return(0,a.jsxs)(b.Zp,{className:"h-full",children:[(0,a.jsx)(b.aR,{children:(0,a.jsx)(b.ZB,{children:"Utilisateurs de partage"})}),(0,a.jsx)(b.Wu,{className:"p-0",children:(0,a.jsx)(h.F,{className:"h-[calc(100vh-200px)]",children:(0,a.jsx)(g.XI,{children:(0,a.jsx)(g.BF,{children:r.map(e=>(0,a.jsx)(g.Hj,{onClick:()=>l(e),className:(0,f.cn)("cursor-pointer",(null==s?void 0:s.id)===e.id&&"bg-accent"),children:(0,a.jsx)(g.nA,{children:e.displayName})},e.id))})})})})]})};function w(){let{people:e,updatePerson:r}=(0,m.d)(),[s,i]=l.useState(null),[t,n]=l.useState(v());l.useEffect(()=>{s?n(s.sharingPermissions||v()):n(v())},[s]);let d=(e,r)=>{n(s=>({...s,[e]:r}))};return(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-[300px_1fr] gap-4",children:[(0,a.jsx)(y,{users:e,selectedUser:s,onSelectUser:i}),(0,a.jsxs)(b.Zp,{children:[(0,a.jsxs)(b.aR,{children:[(0,a.jsxs)(b.ZB,{children:["Permissions pour ",s?s.displayName:"aucun utilisateur s\xe9lectionn\xe9"]}),(0,a.jsx)(b.BT,{children:"G\xe9rer les autorisations d'acc\xe8s pour l'utilisateur s\xe9lectionn\xe9."})]}),(0,a.jsx)(b.Wu,{className:"grid gap-8 md:grid-cols-2",children:j.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"flex items-center text-lg font-semibold",children:[(0,a.jsx)(e.icon,{className:"mr-3 h-5 w-5 text-primary"}),e.label]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,a.jsx)("span",{children:"Modifier"}),(0,a.jsx)("span",{children:"Voir"}),(0,a.jsx)("span",{children:"Aucun"})]})]}),(0,a.jsx)("div",{className:"flex flex-col",children:e.permissions.map(e=>(0,a.jsx)(N,{label:e.label,value:t[e.id]||"none",onChange:r=>d(e.id,r)},e.id))})]},e.id))}),(0,a.jsxs)(b.wL,{className:"flex justify-end gap-2",children:[(0,a.jsxs)(p.Button,{variant:"outline",onClick:()=>{n(Object.keys(t).reduce((e,r)=>(e[r]="none",e),{}))},disabled:!s,children:[(0,a.jsx)(c.A,{className:"mr-2 h-4 w-4"}),"R\xe9initialiser"]}),(0,a.jsxs)(p.Button,{onClick:()=>{s&&(r({...s,sharingPermissions:t}),alert("Permissions sauvegard\xe9es !"))},disabled:!s,children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"}),"Sauvegarder"]})]})]})]})}},66424:(e,r,s)=>{"use strict";s.d(r,{F:()=>n});var a=s(95155),l=s(12115),i=s(47655),t=s(59434);let n=l.forwardRef((e,r)=>{let{className:s,children:l,...n}=e;return(0,a.jsxs)(i.bL,{ref:r,className:(0,t.cn)("relative overflow-hidden",s),...n,children:[(0,a.jsx)(i.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,a.jsx)(d,{}),(0,a.jsx)(i.OK,{})]})});n.displayName=i.bL.displayName;let d=l.forwardRef((e,r)=>{let{className:s,orientation:l="vertical",...n}=e;return(0,a.jsx)(i.VM,{ref:r,orientation:l,className:(0,t.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",s),...n,children:(0,a.jsx)(i.lr,{className:"relative flex-1 rounded-full bg-border"})})});d.displayName=i.VM.displayName},66695:(e,r,s)=>{"use strict";s.d(r,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>t,aR:()=>n,wL:()=>u});var a=s(95155),l=s(12115),i=s(59434);let t=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s),...l})});t.displayName="Card";let n=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",s),...l})});n.displayName="CardHeader";let d=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight text-primary",s),...l})});d.displayName="CardTitle";let o=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",s),...l})});o.displayName="CardDescription";let c=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",s),...l})});c.displayName="CardContent";let u=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",s),...l})});u.displayName="CardFooter"},85127:(e,r,s)=>{"use strict";s.d(r,{A0:()=>n,BF:()=>d,Hj:()=>o,XI:()=>t,nA:()=>u,nd:()=>c});var a=s(95155),l=s(12115),i=s(59434);let t=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:r,className:(0,i.cn)("w-full caption-bottom text-sm",s),...l})})});t.displayName="Table";let n=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("thead",{ref:r,className:(0,i.cn)("[&_tr]:border-b",s),...l})});n.displayName="TableHeader";let d=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("tbody",{ref:r,className:(0,i.cn)("[&_tr:last-child]:border-0",s),...l})});d.displayName="TableBody",l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("tfoot",{ref:r,className:(0,i.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...l})}).displayName="TableFooter";let o=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("tr",{ref:r,className:(0,i.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...l})});o.displayName="TableRow";let c=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("th",{ref:r,className:(0,i.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",s),...l})});c.displayName="TableHead";let u=l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("td",{ref:r,className:(0,i.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",s),...l})});u.displayName="TableCell",l.forwardRef((e,r)=>{let{className:s,...l}=e;return(0,a.jsx)("caption",{ref:r,className:(0,i.cn)("mt-4 text-sm text-muted-foreground",s),...l})}).displayName="TableCaption"},90884:(e,r,s)=>{Promise.resolve().then(s.bind(s,47700))}},e=>{var r=r=>e(e.s=r);e.O(0,[4277,9456,7655,1844,4402,7689,8441,1684,7358],()=>r(90884)),_N_E=e.O()}]);