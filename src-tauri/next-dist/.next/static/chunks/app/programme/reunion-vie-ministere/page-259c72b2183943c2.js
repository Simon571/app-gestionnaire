(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2058],{24948:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>F});var i=t(95155),l=t(12115),n=t(30285),r=t(62523),a=t(26126),c=t(59434),d=t(59409),o=t(14636),u=t(21887),m=t(10518),h=t(25318),x=t(79556),p=t(59119),g=t(89829),f=t(47326),v=t(77223),b=t(18018),j=t(57679),y=t(58962),N=t(18046),w=t(86438),C=t(50286),S=t(68098),D=t(34548),_=t(41784),A=t(70831),E=t(76198),k=t(96019),P=t(16946),M=t(32714),O=t(87481),T=t(17972),I=t(88539),B=t(85057);let z={opening:"42",middle:"160",closing:"34"},q=e=>{let s=[e.firstName,e.middleName,e.lastName,e.suffix].filter(Boolean).join(" ").trim();return e.displayName&&e.displayName.trim()||s||"Sans nom"},L=e=>{let{value:s,onChange:t,options:r,placeholder:a,className:d,disabled:x=!1,emptyLabel:p="Aucune personne disponible",valueLabel:g=null}=e,[f,v]=l.useState(!1),b=l.useMemo(()=>{var e;return null!=(e=r.find(e=>e.value===s))?e:null},[r,s]),j=l.useMemo(()=>{var e;return g&&s?g:null!=(e=null==b?void 0:b.label)?e:null},[null==b?void 0:b.label,s,g]),y=l.useCallback(e=>{if(s===e)return void t(null);t(e)},[t,s]);return(0,i.jsxs)(o.AM,{open:f&&!x,onOpenChange:v,children:[(0,i.jsx)(o.Wv,{asChild:!0,children:(0,i.jsxs)(n.Button,{type:"button",variant:"outline",role:"combobox","aria-expanded":f,disabled:x,className:(0,c.cn)("w-44 h-6 justify-between text-xs truncate px-2",x&&"opacity-60 cursor-not-allowed",d),children:[(0,i.jsx)("span",{className:"truncate text-left",children:j||a}),(0,i.jsx)(u.A,{className:"ml-2 h-3 w-3 shrink-0 opacity-50"})]})}),(0,i.jsx)(o.hl,{className:"p-0 w-64",align:"start",children:(0,i.jsxs)(T.uB,{children:[(0,i.jsx)(T.G7,{placeholder:"Rechercher...",className:"text-xs"}),(0,i.jsxs)(T.oI,{children:[(0,i.jsx)(T.xL,{children:p}),(0,i.jsxs)(T.L$,{children:[r.map(e=>(0,i.jsxs)(T.h_,{value:e.label,className:"text-xs",onSelect:()=>{y(e.value),v(!1)},children:[(0,i.jsx)(m.A,{className:(0,c.cn)("mr-2 h-3 w-3",(null==b?void 0:b.value)===e.value?"opacity-100":"opacity-0")}),(0,i.jsx)("span",{className:"truncate",children:e.label})]},e.value)),s&&(0,i.jsxs)(T.h_,{value:"__clear__",className:"text-xs text-red-600",onSelect:()=>{t(null),v(!1)},children:[(0,i.jsx)(h.A,{className:"mr-2 h-3 w-3"}),"Effacer la s\xe9lection"]})]})]})]})})]})},V="yyyy-MM-dd",G="vcm-manager-schedule",J=["Aucun","Premier contact","Nouvelle visite","Cours biblique","Discours d'\xe9l\xe8ve","Vid\xe9o","Discours","Discussion","Engage la conversation","Entretiens l'int\xe9r\xeat","Fais des disciples","Explique tes croyances - Discours","Explique tes croyances - D\xe9mo","Engagement","Entretien d'int\xe9r\xeat","Autre"];function F(){var e,s,t,c;let[u,m]=l.useState((0,D.k)(new Date,{weekStartsOn:1})),[h,T]=l.useState(1),[F,R]=l.useState(()=>({...z})),[W,U]=l.useState({}),[X,$]=l.useState("2"),[H,K]=l.useState(null),[Q,Y]=l.useState(null),[Z,ee]=l.useState(null),es=l.useRef("/vcm/fr/vcm-program.normalized.json?v=".concat(Date.now())),et=l.useRef("/vcm-program.json?v=".concat(Date.now())),[ei,el]=l.useState({}),[en,er]=l.useState({}),[ea,ec]=l.useState(""),ed=l.useCallback(e=>e?e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/['’]/g," ").replace(/\s+/g," ").trim():"",[]),eo=l.useCallback(e=>{let s="".concat(ed(e.title)," ").concat(ed(e.category)).trim();return s||"discours"!==e.type?s.includes("engage la conversation")||s.includes("engagement")?"Engagement":s.includes("entretiens l interet")||s.includes("entretien l interet")||s.includes("interet")?"Entretien d'int\xe9r\xeat":s.includes("discussion")?"Discussion":s.includes("discours")||"discours"===e.type?"Discours":"Autre":"Discours"},[ed]),{people:eu,isLoaded:em}=(0,M.d)(),{toast:eh}=(0,O.dj)();l.useEffect(()=>{try{let e=window.localStorage.getItem(G);if(!e)return;let s=JSON.parse(e);if(s&&"object"==typeof s){let e={};Object.entries(s).forEach(s=>{let[t,i]=s;if(i&&"object"==typeof i&&"ministryCategories"in i){let s=i.ministryCategories;s&&"object"==typeof s&&(e[t]={...s})}}),Object.keys(e).length&&er(e)}}catch(e){console.error("Erreur lors du chargement des cat\xe9gories minist\xe8re stock\xe9es :",e)}},[]),l.useEffect(()=>{let e=(0,_.GP)(u,V);try{let t=window.localStorage.getItem(G);if(!t){U({}),ec(""),R({...z});return}let i=JSON.parse(t),l=null==i?void 0:i[e];if(l&&"object"==typeof l){var s;U(null!=(s=l.assignments)?s:{}),l.songs&&"object"==typeof l.songs?R(e=>({...e,...l.songs})):R({...z}),"string"==typeof l.notes?ec(l.notes):ec(""),(1===l.hall||2===l.hall)&&T(l.hall),l.ministryCategories&&"object"==typeof l.ministryCategories&&(el({...l.ministryCategories}),er(s=>({...s,[e]:{...l.ministryCategories}})))}else U({}),ec(""),R({...z})}catch(e){console.error("Erreur lors du chargement des donn\xe9es VCM pour la semaine :",e)}},[u]),l.useEffect(()=>{let e=!1;return fetch(es.current,{cache:"no-store"}).then(e=>e.json()).then(s=>{e||Y(s)}).catch(s=>{e||console.error("Erreur lors du chargement des donn\xe9es VCM normalis\xe9es:",s)}),()=>{e=!0}},[]),l.useEffect(()=>{if(!Q)return void ee(null);let e=(0,_.GP)(u,V);console.log("\uD83D\uDD0D Recherche semaine pour:",e);let s=Q.weeks.find(s=>{if(s.startDate===e)return!0;if(s.startDate&&s.endDate){let t=new Date(s.startDate),i=new Date(s.endDate),l=new Date(e);return l>=t&&l<=i}return!1});s?(console.log("✅ Semaine trouv\xe9e:",s.weekTitle),ee(s)):(console.log("❌ Aucune semaine trouv\xe9e. Semaines disponibles:",Q.weeks.map(e=>"".concat(e.startDate," - ").concat(e.weekTitle))),ee(null))},[u,Q]),l.useEffect(()=>{let e=(0,_.GP)(u,V);fetch(et.current,{cache:"no-store"}).then(e=>e.json()).then(s=>{s[e]?K(s[e]):K(null)}).catch(e=>{console.error("Erreur lors du chargement des donn\xe9es d'attribution VCM:",e)})},[u]);let ex=l.useMemo(()=>{let e=[{id:"president",title:"Pr\xe9sident",type:"assignment",duration:null},{id:"prayer",title:"Pri\xe8re du d\xe9but",type:"assignment",duration:null},{id:"discourse",title:"Des mani\xe8res de r\xe9v\xe9rer notre grand Dieu",type:"discourse",duration:10,number:1},{id:"gems",title:"Perles spirituelles",type:"gems",duration:10,number:2},{id:"bible",title:"Lecture de la Bible",type:"bible_reading",duration:null,number:3}],s=[{id:"life1",title:"Te sers-tu de l'appendice \xab Des v\xe9rit\xe9s bibliques toutes simples \xbb",type:"part",duration:15,number:7,category:"Partie Vie Chr\xe9tienne"},{id:"life2",title:"",type:"part",duration:0,number:null,category:"Partie Vie Chr\xe9tienne"},{id:"life3",title:"",type:"part",duration:0,number:null,category:"Partie Vie Chr\xe9tienne"},{id:"study",title:"\xc9tude biblique de l'assembl\xe9e",description:"(30 min) lft histoires 24-25.",type:"study",duration:30,number:null},{id:"final_prayer",title:"Pri\xe8re finale",type:"prayer",duration:null,number:null}],t=e;if(Z){let s=Z.sections.find(e=>"joyaux"===e.key);s&&s.items.length>0&&(t=[e[0],e[1]],s.items.forEach((e,s)=>{let i="number"==typeof e.number?e.number:s+1;t.push({id:"treasure".concat(s+1),title:e.theme||e.title,type:e.type,duration:e.duration||10,number:i})}),t.find(e=>"bible_reading"===e.type)||t.push(e[4]))}let i=[{id:"min1",title:"Engage la conversation",type:"ministry",duration:1,number:4,category:"Engage la conversation"},{id:"min2",title:"Engage la conversation",type:"ministry",duration:2,number:5,category:"Engage la conversation"},{id:"min3",title:"Entretiens l'int\xe9r\xeat",type:"ministry",duration:3,number:6,category:"Entretiens l'int\xe9r\xeat"},{id:"min4",title:"Fais des disciples",type:"ministry",duration:5,number:7,category:"Fais des disciples"}];if(Z){let e=Z.sections.find(e=>"ministere"===e.key);e&&e.items.length>0&&(i=e.items.map((e,s)=>{let t="number"==typeof e.number?e.number:s+4;return{id:"min".concat(s+1),title:e.theme||e.title,type:e.type||"ministry",duration:e.duration||0,number:t,category:e.title}}))}let l=s;if(Z){let e=Z.sections.find(e=>"vie_chretienne"===e.key);if(e&&e.items.length>0){let t=e.items.filter(e=>"study"!==e.type),i=e.items.find(e=>"study"===e.type);l=[...t.map((e,s)=>{let t="number"==typeof e.number?e.number:s+7;return{id:"life".concat(s+1),title:e.theme||e.title,type:"part",duration:e.duration||0,number:t,category:"Partie Vie Chr\xe9tienne"}}),i?{id:"study",title:i.theme||i.title,type:"study",duration:i.duration||30,number:"number"==typeof i.number?i.number:null,category:void 0}:s[3],s[4]]}}return{weekPeriod:(null==Z?void 0:Z.weekTitle)||(0,_.GP)(u,"MMMM dd",{locale:P.fr})+"-"+(0,_.GP)((0,A.f)(u,6),"dd",{locale:P.fr}),book:"Joyaux de la Parole de Dieu",sections:{treasures:t,ministry:i,christianLife:l}}},[Z,u]);l.useEffect(()=>{if(!ex.sections.ministry.length)return void el({});let e=(0,_.GP)(u,V),s=en[e];if(s)return void el({...s});let t={};ex.sections.ministry.forEach(e=>{t[e.id]=e.category||eo(e)}),el(t),er(s=>({...s,[e]:{...t}}))},[u,ex.sections.ministry,en,eo]),l.useEffect(()=>{if(0===Object.keys(W).length)return;let e="reunion_assignments";try{let s={...JSON.parse(window.localStorage.getItem(e)||"{}"),...W};window.localStorage.setItem(e,JSON.stringify(s))}catch(e){console.error("Erreur lors de la sauvegarde automatique:",e)}},[W]);let ep=l.useMemo(()=>[{id:"1",firstName:"Jean",lastName:"Dupont",spiritual:{active:!0,function:"elder"},gender:"male",child:!1},{id:"2",firstName:"Marie",lastName:"Martin",spiritual:{active:!0,function:"servant"},gender:"female",child:!1},{id:"3",firstName:"Pierre",lastName:"Bernard",spiritual:{active:!0,function:"publisher"},gender:"male",child:!1},{id:"4",firstName:"Sophie",lastName:"Durand",spiritual:{active:!0,function:"publisher"},gender:"female",child:!1},{id:"5",firstName:"Paul",lastName:"Moreau",spiritual:{active:!0,function:"unbaptized"},gender:"male",child:!0}],[]),eg=l.useMemo(()=>em&&eu.length>0?eu.filter(e=>{var s;return null==(s=e.spiritual)?void 0:s.active}):ep,[eu,em,ep]),ef=l.useMemo(()=>em&&eu.length>0?eu.filter(e=>{var s;return(null==(s=e.spiritual)?void 0:s.function)==="elder"}):ep.filter(e=>"elder"===e.spiritual.function),[eu,em,ep]),ev=l.useMemo(()=>em&&eu.length>0?eu.filter(e=>{var s,t;return(null==(s=e.spiritual)?void 0:s.function)==="elder"||(null==(t=e.spiritual)?void 0:t.function)==="servant"}):ep.filter(e=>"elder"===e.spiritual.function||"servant"===e.spiritual.function),[eu,em,ep]),eb=l.useMemo(()=>em&&eu.length>0?eu.filter(e=>"male"===e.gender||!0===e.child):ep.filter(e=>"male"===e.gender||!0===e.child),[eu,em,ep]),ej=l.useMemo(()=>em&&eu.length>0?eu.filter(e=>"male"===e.gender):ep.filter(e=>"male"===e.gender),[eu,em,ep]),ey=l.useMemo(()=>{let e=new Map;return(em&&eu.length>0?eu:ep).forEach(s=>{(null==s?void 0:s.id)&&e.set(s.id,s)}),e},[em,eu,ep]),eN=l.useCallback(e=>e.filter(e=>!!(null==e?void 0:e.id)).map(e=>({value:e.id,label:q(e)})),[]),ew=l.useMemo(()=>({active:eN(eg),elders:eN(ef),eldersAndServants:eN(ev),brothers:eN(ej),brothersAndChildren:eN(eb)}),[eg,ef,ev,ej,eb,eN]),eC=Array.from({length:200},(e,s)=>(s+1).toString()),eS=l.useCallback(function(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return s?"hall".concat(t,":").concat(e):e},[h]),eD=l.useCallback(function(e){var s;let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return null!=(s=W[eS(e,t,i)])?s:null},[W,eS,h]),e_=l.useCallback(function(e,s){let t=!(arguments.length>2)||void 0===arguments[2]||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,l=eS(e,t,i);U(e=>{let t={...e};return s&&""!==s.trim()?t[l]=s:delete t[l],t})},[eS,h]),eA=l.useCallback(e=>{if(!e)return"Non attribu\xe9";let s=ey.get(e);return s?q(s):"Non trouv\xe9"},[ey]),eE=l.useCallback(e=>{if(!e)return null;let s=ey.get(e);return s?q(s):e},[ey]),ek=l.useCallback(e=>{T(e)},[]),eP=l.useCallback(function(e){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,i=eD(e,s,t);return{value:i,valueLabel:eE(i),onChange:i=>e_(e,i,s,t)}},[h,eE,eD,e_]),eM=e=>{let{studentId:s,assistantId:t}=e;return(0,i.jsxs)("div",{className:"p-3 space-y-2 min-w-[200px]",children:[(0,i.jsx)("div",{className:"font-semibold text-sm border-b pb-1",children:"Participation du cahier"}),(0,i.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"\xc9l\xe8ve/Student:"}),(0,i.jsx)("div",{className:"text-gray-700",children:eA(s)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Interlocuteur/Assistant:"}),(0,i.jsx)("div",{className:"text-gray-700",children:eA(t)})]})]})]})},eO=e=>{m("prev"===e?(0,E.k)(u,1):(0,k.J)(u,1))},eT=l.useCallback(()=>{let e="hall".concat(h,":"),s=new Set(Object.values(Object.entries(W).reduce((s,t)=>{let[i,l]=t;return i.startsWith(e)&&l&&(s[i]=l),s},{}))),t=e=>{if(!e.length)return null;let t=e.find(e=>(null==e?void 0:e.id)&&!s.has(e.id));if(null==t?void 0:t.id)return s.add(t.id),t.id;let i=e[0];return(null==i?void 0:i.id)?(s.add(i.id),i.id):null},i={},l=function(e,l){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],r=eS(e,n,h);if(W[r]){W[r]&&s.add(W[r]);return}let a=t(l);a&&(i[r]=a)};if(l("treasures_president",ev),l("treasures_opening_prayer",ej),l("treasures_discourse",ev),l("treasures_gems",ev),l("bible_reading",eb),ex.sections.ministry.forEach((e,s)=>{l("ministry_".concat(s,"_student"),eg),l("ministry_".concat(s,"_assistant"),eb)}),ex.sections.christianLife.filter(e=>"study"!==e.type&&"prayer"!==e.type).forEach((e,s)=>{l("life_".concat(s,"_participant"),ev)}),l("study_conductor",ef,!1),l("study_reader",ej,!1),l("closing_prayer",ej,!1),0===Object.keys(i).length)return void eh({title:"Saisie automatique",description:"Aucune attribution suppl\xe9mentaire \xe0 remplir pour cette salle."});U(e=>({...e,...i})),eh({title:"Saisie automatique",description:"".concat(Object.keys(i).length," attributions ont \xe9t\xe9 compl\xe9t\xe9es pour la salle ").concat(h,".")})},[eg,W,ej,eb,h,ef,ev,eS,eh,ex.sections.christianLife,ex.sections.ministry]),eI=l.useCallback(()=>{let e=(0,_.GP)(u,V);try{let s=window.localStorage.getItem(G),t=s?JSON.parse(s):{},i={...ei};t[e]={assignments:W,songs:F,hall:h,ministryCategories:i,notes:ea,savedAt:new Date().toISOString()},window.localStorage.setItem(G,JSON.stringify(t)),er(s=>({...s,[e]:i})),eh({title:"Donn\xe9es sauvegard\xe9es",description:"Les informations de la semaine ont \xe9t\xe9 enregistr\xe9es."})}catch(e){console.error("Erreur lors de la sauvegarde des donn\xe9es VCM :",e),eh({title:"Erreur de sauvegarde",description:"Impossible d'enregistrer les donn\xe9es.",variant:"destructive"})}},[W,F,h,ei,ea,u,eh]),eB=eP("treasures_president"),ez=eP("treasures_opening_prayer"),eq=eP("treasures_discourse"),eL=eP("treasures_gems"),eV=eP("bible_reading"),eG=eP("study_conductor",!1),eJ=eP("study_reader",!1),eF=eP("closing_prayer",!1);return(0,i.jsx)("div",{className:"h-screen bg-gray-50 p-1 overflow-hidden",children:(0,i.jsxs)("div",{className:"max-w-full mx-auto h-full flex flex-col",children:[(0,i.jsx)("div",{className:"bg-white rounded-lg shadow-sm mb-1 p-2 flex-shrink-0",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>eO("prev"),className:"h-8 w-8 p-0",children:(0,i.jsx)(x.A,{className:"h-4 w-4 rotate-90"})}),(0,i.jsxs)("span",{className:"text-xs font-medium min-w-[100px] text-center",children:[(0,_.GP)(u,"MMM dd",{locale:P.fr})," - ",(0,_.GP)((0,A.f)(u,6),"dd, yyyy",{locale:P.fr})]}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>eO("next"),className:"h-8 w-8 p-0",children:(0,i.jsx)(x.A,{className:"h-4 w-4 -rotate-90"})}),(0,i.jsxs)("div",{className:"flex items-center gap-1 ml-4",children:[(0,i.jsx)(n.Button,{variant:"outline",size:"sm",onClick:eI,className:"h-8 w-8 p-0",title:"Sauvegarder",children:(0,i.jsx)(p.A,{className:"h-4 w-4"})}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",onClick:eT,className:"h-8 w-8 p-0",title:"Saisie automatique",children:(0,i.jsx)(g.A,{className:"h-4 w-4"})}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>{U({}),el({}),ec("");let e=(0,_.GP)(u,V);er(s=>{if(!(e in s))return s;let{[e]:t,...i}=s;return i}),eh({title:"Effacer attribution",description:"Toutes les attributions ont \xe9t\xe9 effac\xe9es"})},className:"h-8 w-8 p-0",title:"Effacer attribution",children:(0,i.jsx)(f.A,{className:"h-4 w-4"})}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>{U({}),R({opening:"",middle:"",closing:""}),el({}),ec("");let e=(0,_.GP)(u,V);er(s=>{if(!(e in s))return s;let{[e]:t,...i}=s;return i}),eh({title:"Supprimer donn\xe9es",description:"Donn\xe9es de la r\xe9union supprim\xe9es"})},className:"h-8 w-8 p-0",title:"Supprimer donn\xe9es",children:(0,i.jsx)(v.A,{className:"h-4 w-4"})})]})]}),(0,i.jsxs)("div",{className:"text-center",children:[(0,i.jsx)("h1",{className:"text-xl font-bold",children:"Vie chr\xe9tienne et minist\xe8re"}),(0,i.jsxs)("h2",{className:"text-red-600 font-bold text-sm",children:[(0,_.GP)(u,"MMMM dd",{locale:P.fr}),"-",(0,_.GP)((0,A.f)(u,6),"dd",{locale:P.fr})]}),("10-06"===(0,_.GP)(u,"MM-dd")||"04-06"===(0,_.GP)(u,"MM-dd"))&&(0,i.jsx)("h2",{className:"text-sm font-semibold",children:"Assembl\xe9e de circonscription"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"text-xs",children:"Cantiques"}),(0,i.jsxs)(d.l6,{value:F.opening,onValueChange:e=>R(s=>({...s,opening:e})),children:[(0,i.jsx)(d.bq,{className:"w-16 h-8 text-xs",children:(0,i.jsx)(d.yv,{})}),(0,i.jsx)(d.gC,{children:eC.map(e=>(0,i.jsx)(d.eb,{value:e,children:e},e))})]}),(0,i.jsxs)(d.l6,{value:F.middle,onValueChange:e=>R(s=>({...s,middle:e})),children:[(0,i.jsx)(d.bq,{className:"w-16 h-8 text-xs",children:(0,i.jsx)(d.yv,{})}),(0,i.jsx)(d.gC,{children:eC.map(e=>(0,i.jsx)(d.eb,{value:e,children:e},e))})]}),(0,i.jsxs)(d.l6,{value:F.closing,onValueChange:e=>R(s=>({...s,closing:e})),children:[(0,i.jsx)(d.bq,{className:"w-16 h-8 text-xs",children:(0,i.jsx)(d.yv,{})}),(0,i.jsx)(d.gC,{children:eC.map(e=>(0,i.jsx)(d.eb,{value:e,children:e},e))})]})]}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>{window.print()},className:"h-8 w-8 p-0",title:"Impression",children:(0,i.jsx)(b.A,{className:"h-4 w-4"})}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",onClick:()=>{window.open("https://wol.jw.org/fr","_blank")},className:"h-8 w-8 p-0",title:"wol.jw.org",children:(0,i.jsx)(j.A,{className:"h-4 w-4"})})]})]})}),(0,i.jsxs)("div",{className:"flex-1 overflow-y-auto space-y-1",children:[(0,i.jsxs)("div",{className:"border border-blue-300 rounded",children:[(0,i.jsx)("div",{className:"bg-blue-200 px-2 py-1 border-b border-blue-300",children:(0,i.jsxs)("h3",{className:"font-semibold text-blue-900 flex items-center gap-2 text-sm",children:[(0,i.jsx)(y.A,{className:"h-3 w-3"}),"\uD83D\uDC8E Joyaux de la Parole de Dieu"]})}),(0,i.jsxs)("div",{className:"p-2 space-y-2 bg-white",children:[(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-xs w-16",children:"Pr\xe9sident"}),(0,i.jsx)(L,{...eB,options:ew.eldersAndServants,placeholder:"Pr\xe9sident",disabled:0===ew.eldersAndServants.length})]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-xs w-20",children:"Pri\xe8re d'ouverture"}),(0,i.jsx)(L,{...ez,options:ew.brothers,placeholder:"Fr\xe8re",disabled:0===ew.brothers.length})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-12 gap-2 items-center",children:[(0,i.jsxs)("div",{className:"col-span-3 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-xs w-16",children:"Discours"}),(0,i.jsx)(L,{...eq,options:ew.eldersAndServants,placeholder:"Orateur",disabled:0===ew.eldersAndServants.length})]}),(0,i.jsxs)("div",{className:"col-span-5 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-xs",children:"1."}),(0,i.jsx)(r.p,{className:"h-6 text-xs flex-1",placeholder:(null==(e=ex.sections.treasures.find(e=>"discours"===e.type||"discourse"===e.type))?void 0:e.title)||"Discours"}),(0,i.jsxs)(a.E,{variant:"secondary",className:"bg-blue-200 text-blue-800 text-xs h-5",children:[(null==(s=ex.sections.treasures.find(e=>"discours"===e.type||"discourse"===e.type))?void 0:s.duration)||10," min."]}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,i.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})]}),(0,i.jsxs)("div",{className:"col-span-4 flex items-center gap-2",children:[(0,i.jsx)("span",{className:"text-xs w-20",children:"2. Perles spirituelles"}),(0,i.jsx)(L,{...eL,options:ew.eldersAndServants,placeholder:"Participant",disabled:0===ew.eldersAndServants.length}),(0,i.jsx)(a.E,{variant:"secondary",className:"bg-blue-200 text-blue-800 text-xs h-5",children:"10 min."}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,i.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(n.Button,{variant:1===h?"default":"outline",size:"sm",onClick:()=>ek(1),className:"h-6 w-6 p-0 ".concat(1===h?"bg-blue-500 text-white":"bg-blue-100 text-blue-800 border-blue-300"),children:"1"}),(0,i.jsx)(n.Button,{variant:2===h?"default":"outline",size:"sm",onClick:()=>ek(2),className:"h-6 w-6 p-0 ".concat(2===h?"bg-blue-500 text-white":"bg-blue-100 text-blue-800 border-blue-300"),children:"2"})]}),(0,i.jsx)("div",{}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(d.l6,{value:X,onValueChange:$,children:[(0,i.jsx)(d.bq,{className:"w-12 h-6 text-xs",children:(0,i.jsx)(d.yv,{})}),(0,i.jsx)(d.gC,{children:["1","2","3","4","5"].map(e=>(0,i.jsx)(d.eb,{value:e,children:e},e))})]}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",title:"Ajouter une classe",children:(0,i.jsx)(N.A,{className:"h-3 w-3"})}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",title:"Supprimer une classe",children:(0,i.jsx)(w.A,{className:"h-3 w-3"})})]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-3 gap-4 items-center",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)("span",{className:"text-xs w-20",children:["3. Lecture de la Bible ",2===h?"(Salle 2)":""]}),(0,i.jsx)(L,{...eV,options:ew.brothersAndChildren,placeholder:"Lecteur",disabled:0===ew.brothersAndChildren.length}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,i.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})]}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]})]})]}),(0,i.jsxs)("div",{className:"border border-orange-300 rounded",children:[(0,i.jsx)("div",{className:"bg-orange-200 px-2 py-1 border-b border-orange-300",children:(0,i.jsxs)("h3",{className:"font-semibold text-orange-900 flex items-center gap-2 text-sm",children:[(0,i.jsx)(C.A,{className:"h-3 w-3"}),"\uD83D\uDDE3️ Applique-toi au minist\xe8re ",2===h?"(Salle 2)":""]})}),(0,i.jsx)("div",{className:"p-1 space-y-1 bg-white",children:ex.sections.ministry.map((e,s)=>{var t,l,c;let m=null==H||null==(t=H.ministryParts)?void 0:t[s],x=e.title||"",p=null!=(c=null!=(l=ei[e.id])?l:x)?c:eo(e),g="number"==typeof e.number?e.number:s+4,f=(0,_.GP)(u,V),v=!!p&&!J.includes(p),b=eP("ministry_".concat(s,"_student")),j=eP("ministry_".concat(s,"_assistant"));return(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsxs)(d.l6,{value:p,onValueChange:s=>{el(t=>({...t,[e.id]:s})),er(t=>({...t,[f]:{...t[f]||{},[e.id]:s}}))},children:[(0,i.jsx)(d.bq,{className:"w-48 h-6 text-xs",children:(0,i.jsx)(d.yv,{placeholder:"S\xe9lectionner"})}),(0,i.jsxs)(d.gC,{children:[v&&(0,i.jsx)(d.eb,{value:p,children:p}),J.map(e=>(0,i.jsx)(d.eb,{value:e,children:e},e))]})]}),(0,i.jsx)(L,{...b,options:ew.active,placeholder:"Participant",disabled:0===ew.active.length}),(0,i.jsxs)("div",{className:"flex items-center gap-1 flex-1",children:[(0,i.jsxs)("span",{className:"text-xs",children:[g,"."]}),(0,i.jsx)(r.p,{className:"h-6 text-xs flex-1",value:e.title||"",readOnly:!0,title:e.title||""})]}),(0,i.jsxs)(o.AM,{children:[(0,i.jsx)(o.Wv,{asChild:!0,children:(0,i.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,i.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})}),(0,i.jsx)(o.hl,{className:"w-auto p-0",children:(0,i.jsx)(eM,{studentId:(null==m?void 0:m.studentId)||null,assistantId:(null==m?void 0:m.assistantId)||null})})]}),(0,i.jsx)(a.E,{variant:"secondary",className:"bg-orange-200 text-orange-800 text-xs h-5",children:e.duration?"".concat(e.duration," min."):"0 min."}),"Discours"!==p&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{className:"text-xs w-20",children:"Interlocuteur"}),(0,i.jsx)(L,{...j,options:ew.brothersAndChildren,placeholder:"Interlocuteur",disabled:0===ew.brothersAndChildren.length})]})]},"".concat(e.id,"_salle").concat(h))})})]}),(0,i.jsxs)("div",{className:"border border-red-300 rounded",children:[(0,i.jsx)("div",{className:"bg-red-200 px-2 py-1 border-b border-red-300",children:(0,i.jsxs)("h3",{className:"font-semibold text-red-900 flex items-center gap-2 text-sm",children:[(0,i.jsx)(S.A,{className:"h-3 w-3"}),"❤️ Vie chr\xe9tienne"]})}),(0,i.jsxs)("div",{className:"p-1 space-y-1 bg-white",children:[ex.sections.christianLife.filter(e=>"study"!==e.type&&"prayer"!==e.type).map((e,s)=>{var t;let l=null==H||null==(t=H.christianLifeParts)?void 0:t[s],c=eP("life_".concat(s,"_participant")),u=eP("life_".concat(s,"_subject"),e.title||""),m=eP("life_".concat(s,"_type"),""),h=(e.title||"Partie vie chr\xe9tienne").toLowerCase().includes("besoin"),x=m.value||(h?"Besoins de l'assembl\xe9e":"Partie vie chr\xe9tienne");return(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsxs)(d.l6,{value:x,onValueChange:e=>m.onChange(e),children:[(0,i.jsx)(d.bq,{className:"w-48 h-6 text-xs",children:(0,i.jsx)(d.yv,{})}),(0,i.jsxs)(d.gC,{children:[(0,i.jsx)(d.eb,{value:"Partie vie chr\xe9tienne",children:"Partie vie chr\xe9tienne"}),(0,i.jsx)(d.eb,{value:"Besoins de l'assembl\xe9e",children:"Besoins de l'assembl\xe9e"})]})]}),(0,i.jsx)(L,{...c,options:ew.eldersAndServants,placeholder:"Participant",disabled:0===ew.eldersAndServants.length}),(0,i.jsxs)("div",{className:"flex items-center gap-1 flex-1",children:[(0,i.jsxs)("span",{className:"text-xs",children:[e.number,"."]}),(0,i.jsx)(r.p,{className:"h-6 text-xs flex-1",placeholder:e.title||"Sujet...",value:u.value||"",onChange:e=>u.onChange(e.target.value),readOnly:!h,title:e.title||""})]}),(0,i.jsxs)(o.AM,{children:[(0,i.jsx)(o.Wv,{asChild:!0,children:(0,i.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,i.jsx)("span",{className:"text-xs",children:"\uD83D\uDCC4"})})}),(0,i.jsx)(o.hl,{className:"w-auto p-0",children:(0,i.jsxs)("div",{className:"p-3 space-y-2 min-w-[200px]",children:[(0,i.jsx)("div",{className:"font-semibold text-sm border-b pb-1",children:"Participation du cahier"}),(0,i.jsxs)("div",{className:"space-y-1 text-xs",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Participant:"}),(0,i.jsx)("div",{className:"text-gray-700",children:eA((null==l?void 0:l.participantId)||null)})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Dur\xe9e:"}),(0,i.jsxs)("div",{className:"text-gray-700",children:[(null==l?void 0:l.duration)||0," min."]})]}),(null==l?void 0:l.theme)&&(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:"font-medium",children:"Th\xe8me:"}),(0,i.jsx)("div",{className:"text-gray-700",children:l.theme})]})]})]})})]}),(0,i.jsxs)(a.E,{variant:"secondary",className:"bg-red-200 text-red-800 text-xs h-5",children:[e.duration," min."]})]},"life_part_".concat(s))}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"w-48 h-6 text-xs font-semibold flex items-center",children:"\xc9tude biblique de l'assembl\xe9e"}),(0,i.jsx)(L,{...eG,options:ew.elders,placeholder:"Conducteur",disabled:0===ew.elders.length,emptyLabel:"Aucun conducteur disponible"}),(0,i.jsx)("div",{className:"flex items-center gap-1 flex-1",children:(0,i.jsx)(r.p,{className:"h-6 text-xs flex-1",placeholder:(null==(t=ex.sections.christianLife.find(e=>"study"===e.type))?void 0:t.title)||"(30 min) lft histoires 24-25."})}),(0,i.jsx)(n.Button,{variant:"outline",size:"sm",className:"h-6 w-6 p-0",children:(0,i.jsx)("span",{className:"text-xs",children:"\uD83D\uDCD6"})}),(0,i.jsxs)(a.E,{variant:"secondary",className:"bg-red-200 text-red-800 text-xs h-5",children:[(null==(c=ex.sections.christianLife.find(e=>"study"===e.type))?void 0:c.duration)||30," min."]}),(0,i.jsx)("span",{className:"text-xs w-20",children:"Lecteur"}),(0,i.jsx)(L,{...eJ,options:ew.brothers,placeholder:"Lecteur",disabled:0===ew.brothers.length})]},"etude_biblique"),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[(0,i.jsx)("span",{className:"w-48 h-6 text-xs font-semibold flex items-center",children:"Pri\xe8re finale"}),(0,i.jsx)(L,{...eF,options:ew.brothers,placeholder:"Fr\xe8re",disabled:0===ew.brothers.length})]},"priere_finale")]})]}),(0,i.jsxs)("div",{className:"border border-gray-200 rounded",children:[(0,i.jsx)("div",{className:"bg-gray-100 px-2 py-1 border-b border-gray-200",children:(0,i.jsx)("h3",{className:"font-semibold text-gray-800 text-sm flex items-center gap-2",children:"Notes de la semaine"})}),(0,i.jsxs)("div",{className:"p-2 bg-white space-y-2",children:[(0,i.jsx)(B.Label,{htmlFor:"week-notes",className:"text-xs text-gray-600",children:"Observations, besoins locaux, rappels…"}),(0,i.jsx)(I.T,{id:"week-notes",value:ea,onChange:e=>ec(e.target.value),placeholder:"Saisir les remarques importantes pour cette semaine.",className:"min-h-[80px] text-sm"})]})]})]})]})})}},56108:(e,s,t)=>{Promise.resolve().then(t.bind(t,24948))},87481:(e,s,t)=>{"use strict";t.d(s,{dj:()=>m});var i=t(12115);let l=0,n=new Map,r=e=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),o({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,s)},a=(e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}},c=[],d={toasts:[]};function o(e){d=a(d,e),c.forEach(e=>{e(d)})}function u(e){let{...s}=e,t=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),i=()=>o({type:"DISMISS_TOAST",toastId:t});return o({type:"ADD_TOAST",toast:{...s,id:t,open:!0,onOpenChange:e=>{e||i()}}}),{id:t,dismiss:i,update:e=>o({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,s]=i.useState(d);return i.useEffect(()=>(c.push(s),()=>{let e=c.indexOf(s);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>o({type:"DISMISS_TOAST",toastId:e})}}},88539:(e,s,t)=>{"use strict";t.d(s,{T:()=>r});var i=t(95155),l=t(12115),n=t(59434);let r=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,i.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:s,...l})});r.displayName="Textarea"}},e=>{var s=s=>e(e.s=s);e.O(0,[4277,9456,2925,1720,5988,3957,7344,6914,7689,1678,8441,1684,7358],()=>s(56108)),_N_E=e.O()}]);